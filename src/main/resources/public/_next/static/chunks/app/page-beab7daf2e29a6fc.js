(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{29153:(e,t,s)=>{Promise.resolve().then(s.bind(s,94921))},94921:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>h});var r=s(58081),a=s(82149),n=s(19651),o=s(5160),c=s(22486),i=s(24085),l=s(5064),m=s(38194),u=s(51567),d=s(68299),j=s(49011),g=s(40953),x=s(67552);function h(){let e=(0,n.useRouter)(),t=(0,n.useSearchParams)(),{isLicenseValid:s,isInitializing:h,validateLicense:p,logout:N}=(0,x.Y)(),w=t.get("tab")||"weekly",f=t.get("project"),k=t.get("week"),[v,b]=(0,a.useState)(()=>{if(k){let e=new Date(k);if(!isNaN(e.getTime()))return e}return new Date}),[T,S]=(0,a.useState)(f),P=(0,a.useRef)(!1),{statsData:y,projectUrls:C,ignoredProjects:D,projectCustomNames:R,loading:U,error:E,idleTimeoutMinutes:_,setIdleTimeoutMinutes:I,storageType:L,setStorageType:O,settingsLoading:W,fetchStats:A,fetchProjectUrls:M,createProjectUrl:V,updateProjectUrl:Y,deleteProjectUrl:Z,addIgnoredProject:$,removeIgnoredProject:q,saveProjectCustomName:z,removeProjectCustomName:B}=(0,g.u)(s);(0,a.useEffect)(()=>{S(f)},[f]),(0,a.useEffect)(()=>{if(k&&!P.current){let e=new Date(k);isNaN(e.getTime())||k===v.toISOString().split("T")[0]||b(e)}},[k,v]);let F=s=>{P.current=!0;let r=new URLSearchParams(t.toString());s.tab&&r.set("tab",s.tab),void 0!==s.project&&(s.project?r.set("project",s.project):r.delete("project")),s.week&&r.set("week",s.week);let a="".concat(window.location.pathname,"?").concat(r.toString());e.push(a,{scroll:!1}),setTimeout(()=>{P.current=!1},100)},G=e=>{S(e),F({project:e})};return h?(0,r.jsx)(l.U,{}):s?U?(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 p-6 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)(c.A,{className:"w-8 h-8 animate-spin mx-auto mb-4"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Loading time tracking data..."})]})}):E?(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 p-6 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsxs)("p",{className:"text-red-600 mb-4",children:["Error: ",E]}),(0,r.jsxs)(o.$,{onClick:A,children:[(0,r.jsx)(c.A,{className:"w-4 h-4 mr-2"}),"Retry"]})]})}):(0,r.jsx)("div",{className:"min-h-screen bg-stone-50 p-6",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto space-y-6",children:[(0,r.jsx)(m.Y,{idleTimeoutMinutes:_,onIdleTimeoutChange:I,storageType:L,onStorageTypeChange:O,onRefresh:A,onLogout:N,settingsLoading:W}),(0,r.jsx)(u.p,{currentWeek:v,onNavigateWeek:e=>{let t;"current"===e?t=new Date:(t=new Date(v)).setDate(t.getDate()+("next"===e?7:-7)),b(t),F({week:t.toISOString().split("T")[0]})}}),(0,r.jsx)(d.T,{statsData:y,currentWeek:v,idleTimeoutMinutes:_,onViewProject:G}),(0,r.jsx)(j.Z,{statsData:y,projectUrls:C,ignoredProjects:D,projectCustomNames:R,currentWeek:v,idleTimeoutMinutes:_,onCreateUrl:V,onUpdateUrl:Y,onDeleteUrl:Z,onRefreshUrls:M,onAddIgnoredProject:$,onRemoveIgnoredProject:q,onSaveProjectCustomName:z,onRemoveProjectCustomName:B,selectedProject:T||void 0,onProjectSelect:G,activeTab:w,onTabChange:e=>{F({tab:e})}})]})}):(0,r.jsx)(i.N,{onValidate:p})}}},e=>{var t=t=>e(e.s=t);e.O(0,[882,754,35,497,954,358],()=>t(29153)),_N_E=e.O()}]);