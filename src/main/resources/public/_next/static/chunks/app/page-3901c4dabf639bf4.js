(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{4921:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>j});var a=s(8081),r=s(2149),n=s(9651),i=s(5160),o=s(2486),c=s(3140),l=s(5064),m=s(8194),u=s(1567),d=s(2432),g=s(7086),h=s(7552);function j(){let e=(0,n.useRouter)(),t=(0,n.useSearchParams)(),{isLicenseValid:s,isInitializing:j,validateLicense:x,logout:p}=(0,h.Y)(),N=t.get("tab")||"timesheet",w=t.get("week"),[k,v]=(0,r.useState)(()=>{if(w){let e=new Date(w);if(!isNaN(e.getTime()))return e}return new Date}),b=(0,r.useRef)(!1),{statsData:f,projectUrls:P,ignoredProjects:T,projectCustomNames:S,wrikeProjects:C,wrikeProjectsLoading:y,loading:D,error:R,idleTimeoutMinutes:U,setIdleTimeoutMinutes:I,storageType:_,setStorageType:E,settingsLoading:L,fetchStats:W,fetchProjectUrls:M,fetchWrikeProjects:O,createProjectUrl:A,updateProjectUrl:Y,deleteProjectUrl:F,addIgnoredProject:V,removeIgnoredProject:Z,saveProjectCustomName:$,removeProjectCustomName:q}=(0,g.u)(s);(0,r.useEffect)(()=>{if(w&&!b.current){let e=new Date(w);isNaN(e.getTime())||w===k.toISOString().split("T")[0]||v(e)}},[w,k]);let z=s=>{b.current=!0;let a=new URLSearchParams(t.toString());s.tab&&a.set("tab",s.tab),s.week&&a.set("week",s.week);let r="".concat(window.location.pathname,"?").concat(a.toString());e.push(r,{scroll:!1}),setTimeout(()=>{b.current=!1},100)};return j?(0,a.jsx)(l.U,{}):s?D?(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 p-6 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(o.A,{className:"w-8 h-8 animate-spin mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Loading time tracking data..."})]})}):R?(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 p-6 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("p",{className:"text-red-600 mb-4",children:["Error: ",R]}),(0,a.jsxs)(i.$,{onClick:W,children:[(0,a.jsx)(o.A,{className:"w-4 h-4 mr-2"}),"Retry"]})]})}):(0,a.jsx)("div",{className:"min-h-screen bg-stone-50 p-6",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto space-y-6",children:[(0,a.jsx)(m.Y,{idleTimeoutMinutes:U,onIdleTimeoutChange:I,storageType:_,onStorageTypeChange:E,onRefresh:W,onLogout:p,settingsLoading:L}),(0,a.jsx)(u.p,{currentWeek:k,onNavigateWeek:e=>{let t;"current"===e?t=new Date:(t=new Date(k)).setDate(t.getDate()+("next"===e?7:-7)),v(t),z({week:t.toISOString().split("T")[0]})}}),(0,a.jsx)(d.Z,{statsData:f,ignoredProjects:T,projectCustomNames:S,projectUrls:P,wrikeProjects:C,wrikeProjectsLoading:y,wrikeProjectMappings:[],currentWeek:k,idleTimeoutMinutes:U,onIdleTimeoutChange:I,onAddIgnoredProject:V,onRemoveIgnoredProject:Z,onSaveProjectCustomName:$,onRemoveProjectCustomName:q,onCreateUrl:A,onUpdateUrl:Y,onDeleteUrl:F,onFetchWrikeProjects:O,onSaveWrikeMapping:()=>Promise.resolve(),activeTab:N,onTabChange:e=>{z({tab:e})}})]})}):(0,a.jsx)(c.N,{onValidate:x})}},9153:(e,t,s)=>{Promise.resolve().then(s.bind(s,4921))}},e=>{var t=t=>e(e.s=t);e.O(0,[882,38,506,497,954,358],()=>t(9153)),_N_E=e.O()}]);