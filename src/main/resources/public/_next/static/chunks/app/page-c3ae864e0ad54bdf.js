(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{4921:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>h});var n=s(8081),r=s(2149),a=s(9651),i=s(5160),o=s(2486),c=s(3140),l=s(5064),m=s(8194),u=s(1567),d=s(667),g=s(7086),j=s(7552);function h(){let e=(0,a.useRouter)(),t=(0,a.useSearchParams)(),{isLicenseValid:s,isInitializing:h,validateLicense:x,logout:p}=(0,j.Y)(),N=t.get("tab")||"timesheet",w=t.get("week"),[k,v]=(0,r.useState)(()=>{if(w){let e=new Date(w);if(!isNaN(e.getTime()))return e}return new Date}),b=(0,r.useRef)(!1),{statsData:f,projectUrls:P,ignoredProjects:C,projectCustomNames:S,projectClients:T,commits:y,wrikeProjects:D,wrikeProjectsLoading:R,loading:U,error:I,idleTimeoutMinutes:_,setIdleTimeoutMinutes:E,storageType:L,setStorageType:W,settingsLoading:M,fetchStats:O,fetchProjectUrls:A,fetchWrikeProjects:Y,createProjectUrl:F,updateProjectUrl:V,deleteProjectUrl:Z,addIgnoredProject:$,removeIgnoredProject:q,saveProjectCustomName:z,removeProjectCustomName:B,saveProjectClient:G,removeProjectClient:H}=(0,g.u)(s);(0,r.useEffect)(()=>{if(w&&!b.current){let e=new Date(w);isNaN(e.getTime())||w===k.toISOString().split("T")[0]||v(e)}},[w,k]);let J=s=>{b.current=!0;let n=new URLSearchParams(t.toString());s.tab&&n.set("tab",s.tab),s.week&&n.set("week",s.week);let r="".concat(window.location.pathname,"?").concat(n.toString());e.push(r,{scroll:!1}),setTimeout(()=>{b.current=!1},100)};return h?(0,n.jsx)(l.U,{}):s?U?(0,n.jsx)("div",{className:"min-h-screen bg-gray-50 p-6 flex items-center justify-center",children:(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)(o.A,{className:"w-8 h-8 animate-spin mx-auto mb-4"}),(0,n.jsx)("p",{className:"text-gray-600",children:"Loading time tracking data..."})]})}):I?(0,n.jsx)("div",{className:"min-h-screen bg-gray-50 p-6 flex items-center justify-center",children:(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsxs)("p",{className:"text-red-600 mb-4",children:["Error: ",I]}),(0,n.jsxs)(i.$,{onClick:O,children:[(0,n.jsx)(o.A,{className:"w-4 h-4 mr-2"}),"Retry"]})]})}):(0,n.jsx)("div",{className:"min-h-screen bg-stone-50 p-6",children:(0,n.jsxs)("div",{className:"max-w-7xl mx-auto space-y-6",children:[(0,n.jsx)(m.Y,{idleTimeoutMinutes:_,onIdleTimeoutChange:E,storageType:L,onStorageTypeChange:W,onRefresh:O,onLogout:p,settingsLoading:M}),(0,n.jsx)(u.p,{currentWeek:k,onNavigateWeek:e=>{let t;"current"===e?t=new Date:(t=new Date(k)).setDate(t.getDate()+("next"===e?7:-7)),v(t),J({week:t.toISOString().split("T")[0]})}}),(0,n.jsx)(d.Z,{statsData:f,ignoredProjects:C,projectCustomNames:S,projectClients:T,projectUrls:P,commits:y,wrikeProjects:D,wrikeProjectsLoading:R,wrikeProjectMappings:[],currentWeek:k,idleTimeoutMinutes:_,onIdleTimeoutChange:E,onAddIgnoredProject:$,onRemoveIgnoredProject:q,onSaveProjectCustomName:z,onRemoveProjectCustomName:B,onSaveProjectClient:G,onRemoveProjectClient:H,onCreateUrl:F,onUpdateUrl:V,onDeleteUrl:Z,onFetchWrikeProjects:Y,onSaveWrikeMapping:()=>Promise.resolve(),activeTab:N,onTabChange:e=>{J({tab:e})}})]})}):(0,n.jsx)(c.N,{onValidate:x})}},9153:(e,t,s)=>{Promise.resolve().then(s.bind(s,4921))}},e=>{var t=t=>e(e.s=t);e.O(0,[882,970,23,497,954,358],()=>t(9153)),_N_E=e.O()}]);