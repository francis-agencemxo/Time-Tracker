(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[105],{4658:(e,t,s)=>{Promise.resolve().then(s.bind(s,7323))},7323:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>S});var a=s(8081),r=s(2149),n=s(9651),c=s(5160),i=s(2486),o=s(3140),l=s(5064),d=s(8194),x=s(1567),m=s(6810),h=s(7188),j=s(4404),u=s(1018);let p=(0,u.A)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);var g=s(209),f=s(7531);let N=(0,u.A)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);var w=s(7093);function k(e){let{statsData:t,currentWeek:s,idleTimeoutMinutes:r,onViewProject:n}=e,{getTotalHoursThisWeek:i,getAvgHoursPerDay:o,getTargetHoursThisWeek:l,getActiveProjects:d,getCompletedTasks:x,getProjectTotals:u,getWeekStart:k,getWeekEnd:v,isCurrentWeek:y,formatHoursForChart:b}=(0,w.L)(t,s,r),S=i(),T=l(),P=o(),R=d(),W=x(),C=u()[0];return(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,a.jsxs)(m.Zp,{children:[(0,a.jsxs)(m.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(m.ZB,{className:"text-sm font-medium",children:y()?"Total Hours This Week":"Total Hours Selected Week"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(h.A,{className:"h-4 w-4 text-muted-foreground"}),(0,a.jsx)(c.$,{variant:"ghost",size:"sm",onClick:()=>{let e=new URL(window.location.href),t="".concat(e.origin,"/dashboard?tab=weekly&week=").concat(s.toISOString().split("T")[0]);navigator.clipboard.writeText(t).then(()=>{console.log("Link copied to clipboard!")})},className:"h-6 w-6 p-0 hover:bg-gray-100",title:"Copy shareable link",children:(0,a.jsx)(j.A,{className:"h-3 w-3"})})]})]}),(0,a.jsxs)(m.Wu,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:b(S)}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Target: ",T,"h (",k(s).toLocaleDateString("en-US",{month:"short",day:"numeric"})," -"," ",v(s).toLocaleDateString("en-US",{month:"short",day:"numeric"}),")"]})]})]}),(0,a.jsxs)(m.Zp,{children:[(0,a.jsxs)(m.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(m.ZB,{className:"text-sm font-medium",children:"Average per Weekday"}),(0,a.jsx)(p,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsxs)(m.Wu,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:b(P)}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Target: 8h per weekday (Mon-Fri)"})]})]}),(0,a.jsxs)(m.Zp,{children:[(0,a.jsxs)(m.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(m.ZB,{className:"text-sm font-medium",children:"Active Projects"}),(0,a.jsx)(g.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsxs)(m.Wu,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:R}),(0,a.jsxs)("div",{className:"flex items-center justify-between mt-2",children:[(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:C?"".concat(C.name," is top project"):"No projects"}),C&&n&&(0,a.jsxs)(c.$,{variant:"ghost",size:"sm",onClick:()=>n(C.name),className:"h-6 px-2 text-xs text-teal-600 hover:text-teal-700 hover:bg-teal-50",children:[(0,a.jsx)(f.A,{className:"w-3 h-3 mr-1"}),"View"]})]})]})]}),(0,a.jsxs)(m.Zp,{children:[(0,a.jsxs)(m.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(m.ZB,{className:"text-sm font-medium",children:"Recent Sessions"}),(0,a.jsx)(N,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsxs)(m.Wu,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:W}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Last 3 days"})]})]})]})}var v=s(2432),y=s(7086),b=s(7552);function S(){let e=(0,n.useRouter)(),t=(0,n.useSearchParams)(),{isLicenseValid:s,isInitializing:m,validateLicense:h,logout:j}=(0,b.Y)(),u=t.get("tab")||"weekly",p=t.get("project"),g=t.get("week"),[f,N]=(0,r.useState)(()=>{if(g){let e=new Date(g);if(!isNaN(e.getTime()))return e}return new Date}),[w,S]=(0,r.useState)(p),T=(0,r.useRef)(!1),{statsData:P,projectUrls:R,ignoredProjects:W,projectCustomNames:C,wrikeProjects:A,wrikeProjectsLoading:D,wrikeProjectMappings:L,loading:M,error:Z,idleTimeoutMinutes:I,setIdleTimeoutMinutes:U,settingsLoading:E,fetchStats:_,fetchProjectUrls:O,createProjectUrl:B,updateProjectUrl:H,deleteProjectUrl:V,addIgnoredProject:$,removeIgnoredProject:z,saveProjectCustomName:F,removeProjectCustomName:Y,fetchWrikeProjects:q,saveWrikeProjectMapping:G}=(0,y.u)(s);(0,r.useEffect)(()=>{S(p)},[p]),(0,r.useEffect)(()=>{if(g&&!T.current){let e=new Date(g);isNaN(e.getTime())||g===f.toISOString().split("T")[0]||N(e)}},[g,f]);let J=s=>{T.current=!0;let a=new URLSearchParams(t.toString());s.tab&&a.set("tab",s.tab),void 0!==s.project&&(s.project?a.set("project",s.project):a.delete("project")),s.week&&a.set("week",s.week);let r="".concat(window.location.pathname,"?").concat(a.toString());e.push(r,{scroll:!1}),setTimeout(()=>{T.current=!1},100)};return m?(0,a.jsx)(l.U,{}):s?M?(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 p-6 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(i.A,{className:"w-8 h-8 animate-spin mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Loading time tracking data..."})]})}):Z?(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 p-6 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("p",{className:"text-red-600 mb-4",children:["Error: ",Z]}),(0,a.jsxs)(c.$,{onClick:_,children:[(0,a.jsx)(i.A,{className:"w-4 h-4 mr-2"}),"Retry"]})]})}):(0,a.jsx)("div",{className:"min-h-screen bg-stone-50 p-6",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto space-y-6",children:[(0,a.jsx)(d.Y,{idleTimeoutMinutes:I,onIdleTimeoutChange:U,onRefresh:_,onLogout:j,settingsLoading:E}),(0,a.jsx)(x.p,{currentWeek:f,onNavigateWeek:e=>{let t;"current"===e?t=new Date:(t=new Date(f)).setDate(t.getDate()+("next"===e?7:-7)),N(t),J({week:t.toISOString().split("T")[0]})}}),(0,a.jsx)(k,{statsData:P,currentWeek:f,idleTimeoutMinutes:I,onViewProject:e=>{S(e),J({project:e})}}),(0,a.jsx)(v.Z,{statsData:P,ignoredProjects:W,projectCustomNames:C,wrikeProjects:A,wrikeProjectsLoading:D,wrikeProjectMappings:L,currentWeek:f,idleTimeoutMinutes:I,onIdleTimeoutChange:U,onAddIgnoredProject:$,onRemoveIgnoredProject:z,onSaveProjectCustomName:F,onRemoveProjectCustomName:Y,onFetchWrikeProjects:q,onSaveWrikeMapping:G,activeTab:u,onTabChange:e=>{J({tab:e})}})]})}):(0,a.jsx)(o.N,{onValidate:h})}}},e=>{var t=t=>e(e.s=t);e.O(0,[882,190,506,497,954,358],()=>t(4658)),_N_E=e.O()}]);