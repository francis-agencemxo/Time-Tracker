(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{5016:(e,t,a)=>{"use strict";a.d(t,{cn:()=>n});var r=a(2821),s=a(5889);function n(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,s.QP)((0,r.$)(t))}},7645:()=>{},8871:(e,t,a)=>{Promise.resolve().then(a.bind(a,9623))},9623:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>tg});var r=a(5155),s=a(2115),n=a(63),i=a(2467),l=a(3101),o=a(5016);let c=(0,l.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=s.forwardRef((e,t)=>{let{className:a,variant:s,size:n,asChild:l=!1,...d}=e,m=l?i.DX:"button";return(0,r.jsx)(m,{className:(0,o.cn)(c({variant:s,size:n,className:a})),ref:t,...d})});d.displayName="Button";var m=a(9559);let u=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,o.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...s})});u.displayName="Card";let h=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,o.cn)("flex flex-col space-y-1.5 p-6",a),...s})});h.displayName="CardHeader";let x=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,o.cn)("text-2xl font-semibold leading-none tracking-tight",a),...s})});x.displayName="CardTitle";let g=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,o.cn)("text-sm text-muted-foreground",a),...s})});g.displayName="CardDescription";let p=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,o.cn)("p-6 pt-0",a),...s})});p.displayName="CardContent",s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,o.cn)("flex items-center p-6 pt-0",a),...s})}).displayName="CardFooter";let f=s.forwardRef((e,t)=>{let{className:a,type:s,...n}=e;return(0,r.jsx)("input",{type:s,className:(0,o.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:t,...n})});f.displayName="Input";var j=a(489);let y=(0,l.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),v=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(j.b,{ref:t,className:(0,o.cn)(y(),a),...s})});v.displayName=j.b.displayName;let N=(0,l.F)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),b=s.forwardRef((e,t)=>{let{className:a,variant:s,...n}=e;return(0,r.jsx)("div",{ref:t,role:"alert",className:(0,o.cn)(N({variant:s}),a),...n})});b.displayName="Alert",s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("h5",{ref:t,className:(0,o.cn)("mb-1 font-medium leading-none tracking-tight",a),...s})}).displayName="AlertTitle";let w=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,o.cn)("text-sm [&_p]:leading-relaxed",a),...s})});w.displayName="AlertDescription";let k=(0,l.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function S(e){let{className:t,variant:a,...s}=e;return(0,r.jsx)("div",{className:(0,o.cn)(k({variant:a}),t),...s})}var T=a(9511),C=a(5229);let A=T.bL;T.l9;let D=T.ZL;T.bm;let E=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(T.hJ,{ref:t,className:(0,o.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...s})});E.displayName=T.hJ.displayName;let P=s.forwardRef((e,t)=>{let{className:a,children:s,...n}=e;return(0,r.jsxs)(D,{children:[(0,r.jsx)(E,{}),(0,r.jsxs)(T.UC,{ref:t,className:(0,o.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...n,children:[s,(0,r.jsxs)(T.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,r.jsx)(C.A,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});P.displayName=T.UC.displayName;let I=e=>{let{className:t,...a}=e;return(0,r.jsx)("div",{className:(0,o.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...a})};I.displayName="DialogHeader";let O=e=>{let{className:t,...a}=e;return(0,r.jsx)("div",{className:(0,o.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a})};O.displayName="DialogFooter";let R=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(T.hE,{ref:t,className:(0,o.cn)("text-lg font-semibold leading-none tracking-tight",a),...s})});R.displayName=T.hE.displayName;let L=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(T.VY,{ref:t,className:(0,o.cn)("text-sm text-muted-foreground",a),...s})});L.displayName=T.VY.displayName;var U=a(9708),F=a(523),M=a(2529),z=a(3327),W=a(6983),H=a(7910),J=a(5370),V=a(6132),_=a(5299),B=a(9068),q=a(5426);let Y="mxo-time-tracker-license",K=()=>{let[e,t]=(0,s.useState)(!1),[a,r]=(0,s.useState)(null),[n,i]=(0,s.useState)(!0);(0,s.useEffect)(()=>{(async()=>{let e=localStorage.getItem(Y);if(e){let a=localStorage.getItem("".concat(Y,"-last-checked")),s=new Date().getTime();if(a&&s-Number.parseInt(a)<864e5){t(!0),r(e),i(!1);return}await l(e)?(t(!0),r(e),localStorage.setItem("".concat(Y,"-last-checked"),s.toString())):(localStorage.removeItem(Y),localStorage.removeItem("".concat(Y,"-last-checked")))}i(!1)})()},[]);let l=async e=>{try{let t=await fetch("".concat("","/api/license"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({license_key:e.trim()})});if(!t.ok)return console.error("License validation API error:",t.status,t.statusText),!1;let a=await t.json();return!0===a.valid||"valid"===a.status}catch(t){return console.error("License validation error:",t),["MXO-DEV-2025"].includes(e.trim().toUpperCase())}},o=async()=>{try{if(a){let e=await fetch("".concat("","/api/license/logout"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({license_key:a.trim()})});e.ok||console.warn("Logout API error:",e.status,e.statusText)}}catch(e){console.error("Logout API error:",e)}finally{localStorage.removeItem(Y),localStorage.removeItem("".concat(Y,"-last-checked")),t(!1),r(null)}};return{isLicenseValid:e,validatedLicense:a,isInitializing:n,validateLicense:async e=>{let a=await l(e);if(!a)return console.warn("Invalid license key:",e),!1;if(a){let a=e.trim();return localStorage.setItem(Y,a),t(!0),r(a),!0}return!1},logout:o,getLicenseInfo:()=>{if(!a)return null;let e=["MXO-DEV-2025","@38R8UyyB8F6VR7","MXO"].map(e=>e.toUpperCase()).includes(a.toUpperCase());return{key:a,type:e?"Demo":"Licensed",isDemo:e}},checkBackendAvailability:async()=>{try{return(await fetch("".concat("","/api/stats"),{method:"GET",signal:AbortSignal.timeout(3e3)})).ok}catch(e){return console.error("Backend health check failed:",e),!1}}}},X=["MXO-DEV-2025"];function G(e){let{onValidate:t}=e,{checkBackendAvailability:a}=K(),[n,i]=(0,s.useState)(""),[l,o]=(0,s.useState)(""),[c,m]=(0,s.useState)(!1),[j,y]=(0,s.useState)(!1),[N,k]=(0,s.useState)(!1);(0,s.useEffect)(()=>{{let e=localStorage.getItem("privacy-acknowledged");k("true"===e),"true"!==e&&y(!0)}},[]),(0,s.useEffect)(()=>{{let e=new URLSearchParams(window.location.search),t=e.get("license")||e.get("licensekey");if(t){i(t),o("");let e=window.location.pathname;window.history.replaceState({},document.title,e),T(t)}}},[]);let T=async e=>{m(!0);try{await t(e.trim())||(await a()?o("The license key from login portal is invalid. Please try again."):o("Please open a PhpStorm project with the Time Tracker plugin to access the dashboard."))}catch(e){o("Failed to validate license from login portal. Please check your connection.")}finally{m(!1)}},C=window.location.hostname.includes("v0.dev")||window.location.hostname.includes("vusercontent.net")||!1;console.log(window.location);let D=async e=>{e.preventDefault(),o(""),m(!0);try{await t(n.trim())||(await a()?o("Invalid license key. Please check your key and try again."):o("Please open a PhpStorm project with the Time Tracker plugin to access the dashboard."))}catch(e){o("Failed to validate license. Please check your connection and try again.")}finally{m(!1)}};return(0,r.jsxs)("div",{className:"min-h-screen bg-stone-50 dark:bg-gray-900 flex items-center justify-center p-6",children:[(0,r.jsx)(A,{open:j,onOpenChange:y,children:(0,r.jsxs)(P,{className:"max-w-2xl",children:[(0,r.jsxs)(I,{children:[(0,r.jsxs)(R,{className:"flex items-center gap-2 text-xl dark:text-gray-100",children:[(0,r.jsx)(U.A,{className:"h-6 w-6 text-teal-600 dark:text-teal-400"}),"Privacy & Data Storage"]}),(0,r.jsx)(L,{className:"dark:text-gray-400",children:"Understanding how your data is stored and protected"})]}),(0,r.jsxs)("div",{className:"space-y-4 py-4",children:[(0,r.jsxs)(b,{className:"border-teal-200 bg-teal-50 dark:border-teal-800 dark:bg-teal-950",children:[(0,r.jsx)(F.A,{className:"h-4 w-4 text-teal-600 dark:text-teal-400"}),(0,r.jsxs)(w,{className:"text-teal-800 dark:text-teal-200",children:[(0,r.jsx)("strong",{children:"All data stays on your computer."})," Your time tracking data is stored locally and never uploaded to any server."]})]}),(0,r.jsxs)("div",{className:"space-y-3 text-sm",children:[(0,r.jsxs)("div",{className:"flex gap-3",children:[(0,r.jsx)(M.A,{className:"h-5 w-5 text-green-600 dark:text-green-400 shrink-0 mt-0.5"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium dark:text-gray-200",children:"Local Storage Only"}),(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"All time tracking data is stored in your browser's local storage on your computer. No data is sent to external servers."})]})]}),(0,r.jsxs)("div",{className:"flex gap-3",children:[(0,r.jsx)(M.A,{className:"h-5 w-5 text-green-600 dark:text-green-400 shrink-0 mt-0.5"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium dark:text-gray-200",children:"No Cloud Synchronization"}),(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Your data remains private and is not synchronized or backed up to any cloud service."})]})]}),(0,r.jsxs)("div",{className:"flex gap-3",children:[(0,r.jsx)(M.A,{className:"h-5 w-5 text-green-600 dark:text-green-400 shrink-0 mt-0.5"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium dark:text-gray-200",children:"License Validation Only"}),(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"The only external connection is for license validation. Your usage data and project information are never shared."})]})]}),(0,r.jsxs)("div",{className:"flex gap-3",children:[(0,r.jsx)(z.A,{className:"h-5 w-5 text-blue-600 dark:text-blue-400 shrink-0 mt-0.5"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium dark:text-gray-200",children:"Your Responsibility"}),(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-2",children:"Since data is stored locally, you are responsible for backing up your data if needed."}),(0,r.jsxs)("p",{className:"text-gray-600 dark:text-gray-400 text-xs font-mono bg-gray-100 dark:bg-gray-800 p-2 rounded border dark:border-gray-700 break-all",children:["Database location: ",(()=>{let e=window.navigator.userAgent.toLowerCase(),t=e.includes("win"),a=e.includes("mac");return t?"%USERPROFILE%\\.cache\\phpstorm-time-tracker\\data.db":"~/.cache/phpstorm-time-tracker/data.db"})()]})]})]})]})]}),(0,r.jsx)(O,{children:(0,r.jsxs)(d,{onClick:()=>{localStorage.setItem("privacy-acknowledged","true"),k(!0),y(!1)},className:"w-full bg-teal-600 hover:bg-teal-700 dark:bg-teal-700 dark:hover:bg-teal-800",children:[(0,r.jsx)(M.A,{className:"w-4 h-4 mr-2"}),"I Understand - Continue"]})})]})}),(0,r.jsxs)("div",{className:"w-full max-w-md space-y-6",children:[(0,r.jsxs)("div",{className:"text-center space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-center gap-3",children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-teal-600 to-teal-800 rounded-xl flex items-center justify-center shadow-lg",children:(0,r.jsx)(W.A,{className:"h-7 w-7 text-white"})}),(0,r.jsx)("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-amber-500 rounded-full flex items-center justify-center",children:(0,r.jsx)("div",{className:"w-2 h-2 bg-white rounded-full"})})]}),(0,r.jsx)(H.A,{className:"h-8 w-8 text-teal-600 dark:text-teal-400"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-teal-800 dark:text-teal-400",children:"Development Time Tracker"}),(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"License validation required"})]})]}),(0,r.jsxs)(u,{children:[(0,r.jsxs)(h,{children:[(0,r.jsxs)(x,{className:"flex items-center gap-2",children:[(0,r.jsx)(J.A,{className:"h-5 w-5"}),"Enter License Key"]}),(0,r.jsx)(g,{children:"Please enter your valid license key to access the time tracking dashboard."})]}),(0,r.jsx)(p,{children:(0,r.jsxs)("form",{onSubmit:D,className:"space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(v,{htmlFor:"license-key",children:"License Key"}),(0,r.jsx)(f,{id:"license-key",type:"text",placeholder:"Enter your license key",value:n,onChange:e=>i(e.target.value),required:!0,className:"font-mono",disabled:c})]}),l&&(0,r.jsxs)(b,{variant:"destructive",children:[(0,r.jsx)(V.A,{className:"h-4 w-4"}),(0,r.jsx)(w,{children:l})]}),n&&!l&&(0,r.jsxs)(b,{className:"border-green-200 bg-green-50 dark:border-green-800 dark:bg-green-950",children:[(0,r.jsx)(M.A,{className:"h-4 w-4 text-green-600 dark:text-green-400"}),(0,r.jsx)(w,{className:"text-green-800 dark:text-green-200",children:'License key loaded successfully. Click "Validate License" to continue.'})]}),(0,r.jsx)(d,{type:"submit",className:"w-full bg-teal-600 hover:bg-teal-700 dark:bg-teal-700 dark:hover:bg-teal-800",disabled:c||!n.trim(),children:c?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(_.A,{className:"w-4 h-4 animate-spin mr-2"}),"Validating with API..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(M.A,{className:"w-4 h-4 mr-2"}),"Validate License"]})}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,r.jsx)("span",{className:"w-full border-t"})}),(0,r.jsx)("div",{className:"relative flex justify-center text-xs uppercase",children:(0,r.jsx)("span",{className:"bg-background px-2 text-muted-foreground",children:"Or"})})]}),(0,r.jsxs)(d,{type:"button",variant:"outline",className:"w-full",onClick:()=>{let e=window.location.origin+window.location.pathname,t="https://addons.francislabonte.com/licenses/getkey/codepulse?return=".concat(encodeURIComponent(e));window.location.href=t},disabled:c,children:[(0,r.jsx)(B.A,{className:"w-4 h-4 mr-2"}),"Validate by Login"]})]})})]}),(0,r.jsx)(u,{className:"border-blue-200 dark:border-blue-800",children:(0,r.jsxs)(h,{children:[(0,r.jsxs)(x,{className:"text-sm text-blue-800 dark:text-blue-400 flex items-center gap-2",children:[(0,r.jsx)(B.A,{className:"h-4 w-4"}),"License Validation"]}),(0,r.jsx)(g,{className:"text-xs dark:text-gray-400",children:C?"Running in preview mode - demo keys available below":"Licenses are validated through addons.francislabonte.com API"})]})}),C&&(0,r.jsxs)(u,{className:"border-teal-200 dark:border-teal-800",children:[(0,r.jsxs)(h,{children:[(0,r.jsx)(x,{className:"text-sm text-teal-800 dark:text-teal-400",children:"Demo License Key"}),(0,r.jsx)(g,{className:"text-xs dark:text-gray-400",children:"For testing purposes, you can use this demo key:"})]}),(0,r.jsx)(p,{className:"space-y-3",children:X.map((e,t)=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-2 bg-teal-50 dark:bg-teal-950 rounded border dark:border-teal-800",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(S,{variant:"outline",className:"text-xs dark:border-teal-700",children:e.includes("DEV")?"DEV":e.includes("PRO")?"PRO":"DEMO"}),(0,r.jsx)("code",{className:"text-xs font-mono text-teal-700 dark:text-teal-300",children:e})]}),(0,r.jsxs)("div",{className:"flex gap-1",children:[(0,r.jsx)(d,{variant:"ghost",size:"sm",onClick:()=>{navigator.clipboard.writeText(e)},className:"h-6 w-6 p-0 hover:bg-teal-100 dark:hover:bg-teal-900",title:"Copy to clipboard",disabled:c,children:(0,r.jsx)(q.A,{className:"h-3 w-3"})}),(0,r.jsx)(d,{variant:"ghost",size:"sm",onClick:()=>{i(e),o("")},className:"h-6 px-2 text-xs hover:bg-teal-100 dark:hover:bg-teal-900",disabled:c,children:"Use"})]})]},e))})]}),(0,r.jsxs)("div",{className:"text-center space-y-2",children:[(0,r.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:C?"Preview mode: Demo keys work offline for testing.":"License validation requires an internet connection."}),(0,r.jsx)("button",{onClick:()=>y(!0),className:"text-xs text-teal-600 dark:text-teal-400 hover:text-teal-700 dark:hover:text-teal-300 underline",children:"View Privacy & Data Storage Information"})]})]})]})}function Z(){return(0,r.jsx)("div",{className:"min-h-screen bg-stone-50 flex items-center justify-center p-6",children:(0,r.jsxs)("div",{className:"text-center space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-center gap-3",children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-teal-600 to-teal-800 rounded-xl flex items-center justify-center shadow-lg",children:(0,r.jsx)(W.A,{className:"h-7 w-7 text-white"})}),(0,r.jsx)("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-amber-500 rounded-full flex items-center justify-center",children:(0,r.jsx)("div",{className:"w-2 h-2 bg-white rounded-full"})})]}),(0,r.jsx)(H.A,{className:"h-8 w-8 text-teal-600"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-teal-800",children:"Development Time Tracker"}),(0,r.jsx)("p",{className:"text-gray-600 mt-2",children:"Initializing application..."})]}),(0,r.jsxs)("div",{className:"flex items-center justify-center gap-3",children:[(0,r.jsx)(_.A,{className:"h-6 w-6 animate-spin text-teal-600"}),(0,r.jsx)("span",{className:"text-sm text-gray-600",children:"Validating license..."})]}),(0,r.jsxs)("div",{className:"flex justify-center gap-2",children:[(0,r.jsx)("div",{className:"w-2 h-2 bg-teal-600 rounded-full animate-pulse"}),(0,r.jsx)("div",{className:"w-2 h-2 bg-teal-600 rounded-full animate-pulse",style:{animationDelay:"0.2s"}}),(0,r.jsx)("div",{className:"w-2 h-2 bg-teal-600 rounded-full animate-pulse",style:{animationDelay:"0.4s"}})]})]})})}var Q=a(2286);let $=Q.bL,ee=Q.l9,et=s.forwardRef((e,t)=>{let{className:a,align:s="center",sideOffset:n=4,...i}=e;return(0,r.jsx)(Q.ZL,{children:(0,r.jsx)(Q.UC,{ref:t,align:s,sideOffset:n,className:(0,o.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]",a),...i})})});et.displayName=Q.UC.displayName;var ea=a(5870),er=a(4926),es=a(21),en=a(6485),ei=a(9427),el=a(7494),eo=a(5379);function ec(){let{theme:e,setTheme:t}=(0,eo.D)(),[a,n]=s.useState(!1);return(s.useEffect(()=>{n(!0)},[]),a)?(0,r.jsxs)(d,{variant:"outline",size:"sm",onClick:()=>{t("dark"===e?"light":"dark")},className:"w-9 h-9 p-0 border-teal-200 hover:bg-teal-50 dark:border-teal-800 dark:hover:bg-teal-950 transition-all",title:"Switch to ".concat("dark"===e?"light":"dark"," mode"),children:[(0,r.jsx)(ei.A,{className:"h-[1.2rem] w-[1.2rem] rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0 text-teal-700 dark:text-teal-300"}),(0,r.jsx)(el.A,{className:"absolute h-[1.2rem] w-[1.2rem] rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100 text-teal-700 dark:text-teal-300"}),(0,r.jsx)("span",{className:"sr-only",children:"Toggle theme"})]}):(0,r.jsx)(d,{variant:"outline",size:"sm",className:"w-9 h-9 p-0",children:(0,r.jsx)("span",{className:"sr-only",children:"Toggle theme"})})}function ed(e){let{idleTimeoutMinutes:t,onIdleTimeoutChange:a,storageType:s,onStorageTypeChange:n,onRefresh:i,onLogout:l,onRestartTour:o,settingsLoading:c=!1}=e,{getLicenseInfo:u}=K(),h=u();return(0,r.jsxs)("div",{className:"flex items-center justify-between","data-tour":"header",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-teal-600 to-teal-800 rounded-lg flex items-center justify-center shadow-md",children:(0,r.jsx)(W.A,{className:"h-6 w-6 text-white"})}),(0,r.jsx)("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-amber-500 rounded-full flex items-center justify-center",children:(0,r.jsx)("div",{className:"w-1.5 h-1.5 bg-white rounded-full"})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-teal-800 dark:text-teal-400",children:"Development Time Tracking"}),(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Monitor your development productivity and project progress"})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)(ec,{}),h&&(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(H.A,{className:"w-4 h-4 text-teal-600 dark:text-teal-400"}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsx)("div",{className:"text-xs font-medium text-teal-800 dark:text-teal-300",children:h.type}),(0,r.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:h.isDemo?"Demo License":"...".concat(h.key.slice(-6))})]})]}),(0,r.jsxs)($,{children:[(0,r.jsx)(ee,{asChild:!0,children:(0,r.jsxs)(d,{variant:"outline",size:"sm",className:"border-teal-200 text-teal-700 hover:bg-teal-50 dark:border-teal-800 dark:text-teal-300 dark:hover:bg-teal-950",children:[(0,r.jsx)(ea.A,{className:"w-4 h-4 mr-2"}),"Settings"]})}),(0,r.jsx)(et,{className:"w-80 dark:bg-gray-800 dark:border-gray-700",children:(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("h4",{className:"font-medium dark:text-gray-100",children:"Dashboard Settings"}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("label",{htmlFor:"idle-timeout",className:"text-sm font-medium dark:text-gray-200",children:["Idle Timeout: ",t," minutes"]}),(0,r.jsxs)("select",{id:"idle-timeout",value:t,onChange:e=>a(Number(e.target.value)),className:"bg-white border rounded px-2 py-1 text-sm dark:bg-gray-700 dark:border-gray-600 dark:text-gray-200",disabled:c,children:[(0,r.jsx)("option",{value:5,children:"5 minutes"}),(0,r.jsx)("option",{value:10,children:"10 minutes"}),(0,r.jsx)("option",{value:15,children:"15 minutes"}),(0,r.jsx)("option",{value:20,children:"20 minutes"}),(0,r.jsx)("option",{value:30,children:"30 minutes"})]})]}),(0,r.jsxs)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Sessions within ",t," minutes of each other will be merged"]})]}),!1,h&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("hr",{className:"dark:border-gray-700"}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("h5",{className:"font-medium text-sm dark:text-gray-100",children:"License Information"}),(0,r.jsxs)("div",{className:"text-xs space-y-1",children:[(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Type:"}),(0,r.jsx)("span",{className:"dark:text-gray-200",children:h.type})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Key:"}),(0,r.jsx)("span",{className:"font-mono dark:text-gray-200",children:h.isDemo?"Demo":"...".concat(h.key.slice(-6))})]})]}),l&&(0,r.jsxs)(d,{onClick:l,variant:"outline",size:"sm",className:"w-full mt-3 text-red-600 border-red-200 hover:bg-red-50 dark:text-red-400 dark:border-red-900 dark:hover:bg-red-950",children:[(0,r.jsx)(er.A,{className:"w-4 h-4 mr-2"}),"Logout"]})]})]})]})})]}),o&&(0,r.jsxs)(d,{onClick:o,variant:"outline",size:"sm",className:"border-teal-200 text-teal-700 hover:bg-teal-50 dark:border-teal-800 dark:text-teal-300 dark:hover:bg-teal-950",title:"Restart the guided tour",children:[(0,r.jsx)(es.A,{className:"w-4 h-4 mr-2"}),"Help"]}),(0,r.jsxs)(d,{onClick:i,variant:"outline",size:"sm",className:"border-teal-200 text-teal-700 hover:bg-teal-50 dark:border-teal-800 dark:text-teal-300 dark:hover:bg-teal-950",children:[(0,r.jsx)(m.A,{className:"w-4 h-4 mr-2"}),"Refresh"]}),(0,r.jsxs)(S,{variant:"outline",className:"px-3 py-1 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-200",children:[(0,r.jsx)(en.A,{className:"w-4 h-4 mr-1"}),(null==h?void 0:h.isDemo)?"Demo Data":"Live Data"]})]})]})}function em(e){let{currentWeek:t,onNavigateWeek:a}=e,s=e=>{let t=new Date(e),a=t.getDay(),r=t.getDate()-a;return new Date(t.setDate(r))},n=()=>{let e=new Date,a=s(t),r=s(e);return a.getTime()===r.getTime()};return(0,r.jsx)(u,{"data-tour":"week-navigation",children:(0,r.jsx)(p,{className:"py-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)(d,{onClick:()=>a("prev"),variant:"outline",size:"sm",className:"border-teal-200 text-teal-700 hover:bg-teal-50 dark:border-teal-800 dark:text-teal-300 dark:hover:bg-teal-950",children:"← Previous Week"}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsxs)("div",{className:"text-lg font-semibold text-teal-800 dark:text-teal-400",children:[s(t).toLocaleDateString("en-US",{month:"short",day:"numeric"})," ","-"," ",new Date(s(t).getTime()+5184e5).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})]}),(0,r.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:n()?"Current Week":"Week of "+s(t).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})})]}),(0,r.jsx)(d,{onClick:()=>a("next"),variant:"outline",size:"sm",className:"border-teal-200 text-teal-700 hover:bg-teal-50 dark:border-teal-800 dark:text-teal-300 dark:hover:bg-teal-950",disabled:n(),children:"Next Week →"})]}),!n()&&(0,r.jsx)(d,{onClick:()=>a("current"),variant:"default",size:"sm",className:"bg-teal-600 hover:bg-teal-700 dark:bg-teal-700 dark:hover:bg-teal-800",children:"Back to Current Week"})]})})})}var eu=a(574);let eh=eu.bL,ex=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(eu.B8,{ref:t,className:(0,o.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",a),...s})});ex.displayName=eu.B8.displayName;let eg=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(eu.l9,{ref:t,className:(0,o.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",a),...s})});eg.displayName=eu.l9.displayName;let ep=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(eu.UC,{ref:t,className:(0,o.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",a),...s})});ep.displayName=eu.UC.displayName;let ef="America/New_York",ej=e=>new Date(e+"T00:00:00"),ey=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{month:"2-digit",day:"2-digit",year:"numeric"};return ej(e).toLocaleDateString("en-US",{timeZone:ef,...t})},ev=e=>ey(e,{month:"short",day:"numeric"}),eN=e=>ey(e,{month:"long",day:"numeric",year:"numeric"}),eb=e=>ey(e,{weekday:"short"}),ew=e=>e.toLocaleDateString("en-CA",{timeZone:ef}),ek=(e,t,a)=>{let r=e=>{let t=new Date(e),a=t.getDay(),r=t.getDate()-a;return new Date(t.setDate(r))},s=e=>{let t=[];for(let a=0;a<7;a++){let r=new Date(e.getTime()+24*a*36e5);t.push(ew(r))}return t},n=()=>{if(!e||0===Object.keys(e).length)return{};let a=s(r(t)),n={};return a.forEach(t=>{e[t]&&(n[t]=e[t])}),n},i=e=>{let t=ej(e).getDay();return 8*(t>=1&&t<=5)},l=e=>{let t=Math.floor(e/3600),a=Math.floor(e%3600/60);return"".concat(t,"h ").concat(a,"m")},o=e=>{if(0===e.length)return e;let t=[...e].sort((e,t)=>new Date(e.start).getTime()-new Date(t.start).getTime()),r=[],s={...t[0]};for(let e=1;e<t.length;e++){let n=t[e],i=new Date(s.end).getTime();new Date(n.start).getTime()-i<=60*a*1e3&&s.type===n.type?s.end=n.end:(r.push(s),s={...n})}return r.push(s),r},c=e=>{let t=[];return Object.values(e).forEach(e=>{t.push(...e.sessions)}),o(t)},d=e=>o(e.sessions),m=e=>e.reduce((e,t)=>e+(new Date(t.end).getTime()-new Date(t.start).getTime())/1e3,0),u=()=>{let e={},t=n();return 0===Object.keys(t).length?[]:(Object.entries(t).forEach(t=>{let[a,r]=t;Object.entries(r).forEach(t=>{let[a,r]=t,s=m(d(r));e[a]=(e[a]||0)+s})}),Object.entries(e).map(e=>{let[t,a]=e;return{name:t,duration:a,hours:a/3600}}).sort((e,t)=>t.duration-e.duration))},h=()=>{let e=s(r(t)),a=n();return e.map(e=>{let t=m(c(a[e]||{})),r=eb(e),s=i(e);return{day:r,date:e,hours:t/3600,target:s}})},x=()=>{let e=[],t=n();return 0===Object.keys(t).length?[]:(Object.entries(t).sort((e,t)=>{let[a]=e,[r]=t;return r.localeCompare(a)}).forEach(t=>{let[a,r]=t;Object.entries(r).forEach(t=>{let[r,s]=t;d(s).slice(-3).forEach((t,s)=>{let n=new Date(t.end).getTime()-new Date(t.start).getTime();e.push({id:"".concat(a,"-").concat(r,"-").concat(s),project:r,task:"".concat(t.type," session"),duration:l(n/1e3),status:"completed",date:a,type:t.type})})})}),e.slice(0,10))};return{getWeekStart:r,getWeekEnd:e=>new Date(r(e).getTime()+5184e5),getWeekDates:s,getCurrentWeekData:n,isCurrentWeek:()=>{let e=new Date,a=r(t),s=r(e);return a.getTime()===s.getTime()},formatDuration:l,formatHoursForChart:e=>{let t=Math.floor(e),a=Math.round((e-t)*60);return 0===t&&0===a?"0h":0===a?"".concat(t,"h"):"".concat(t,"h").concat(a.toString().padStart(2,"0"))},formatDateInEST:ey,formatDateShort:ev,formatDateLong:eN,getTargetHoursForDate:i,mergeSessions:o,getMergedSessionsForDay:c,getMergedSessionsForProjectDay:d,calculateMergedDuration:m,getProjectTotals:u,getWeeklyData:h,getStackedWeeklyData:()=>{let e=s(r(t)),a=n();return e.map(e=>{let t=a[e]||{},r=eb(e),s=i(e),n={};return Object.entries(t).forEach(e=>{let[t,a]=e,r=m(d(a));n[t]=r/3600}),{day:r,date:e,target:s,...n}})},getWeeklyDataForProject:e=>{let a=s(r(t)),i=n();return a.map(t=>{let a=(i[t]||{})[e],r=eb(t),s=0;return a&&(s=m(d(a))/3600),{day:r,date:t,hours:s}})},getProjectSessionDetails:e=>{let t=[];return Object.entries(n()).forEach(a=>{let[r,s]=a;if(s[e]){let a=d(s[e]);t.push(...a.map(e=>({...e,date:r})))}}),t.sort((e,t)=>new Date(t.start).getTime()-new Date(e.start).getTime())},getRecentActivities:x,getTotalHoursThisWeek:()=>h().reduce((e,t)=>e+t.hours,0),getAvgHoursPerDay:()=>{let e=h().filter(e=>e.target>0);return e.length>0?e.reduce((e,t)=>e+t.hours,0)/e.length:0},getTargetHoursThisWeek:()=>h().reduce((e,t)=>e+t.target,0),getActiveProjects:()=>u().length,getCompletedTasks:()=>x().filter(e=>"completed"===e.status).length,getProjectChartData:()=>{let e=u().slice(0,8),t=["#2D5A5A","#4A7C7C","#A67C5A","#8B4513","#D2B48C","#5F8A8B","#8FBC8F","#CD853F","#DEB887","#F4A460"];return e.map((e,a)=>({name:e.name,hours:Number(e.hours.toFixed(1)),color:t[a%t.length]}))},getMonthlyTrend:()=>{let t={};return e&&0!==Object.keys(e).length?(Object.entries(e).forEach(e=>{let[a,r]=e,s=ey(a,{month:"short"}),n=0;Object.entries(r).forEach(e=>{let[t,a]=e,r=d(a);n+=m(r)}),t[s]=(t[s]||0)+n}),Object.entries(t).map(e=>{let[t,a]=e;return{month:t,hours:Number((a/3600).toFixed(1))}})):[]},getProjectBreakdown:e=>{let t=[];return Object.entries(n()).forEach(a=>{let[r,s]=a;if(s[e]){let a=d(s[e]);t.push(...a.map(e=>({...e,date:r})))}}),t.sort((e,t)=>new Date(t.start).getTime()-new Date(e.start).getTime())},getDailyTotalsForProject:e=>{let t={};return Object.entries(n()).forEach(a=>{let[r,s]=a;if(s[e]){let a=d(s[e]),n=m(a);t[r]={duration:n,sessions:a}}}),Object.entries(t).map(e=>{let[t,a]=e;return{date:t,...a}}).sort((e,t)=>t.date.localeCompare(e.date)).slice(0,14)},getFileActivityForProject:(e,t)=>{let a=n()[t];if(!a||!a[e])return[];let r=a[e].sessions.filter(e=>"coding"===e.type&&e.file),s={};return r.forEach(e=>{if(e.file){let t=e.file.split("/").pop()||e.file;s[t]||(s[t]=[]),s[t].push(e)}}),Object.entries(s).map(e=>{let[t,a]=e,r=a.reduce((e,t)=>e+(new Date(t.end).getTime()-new Date(t.start).getTime())/1e3,0),s=Array(24).fill(0);return a.forEach(e=>{let t=new Date(e.start).getHours(),a=(new Date(e.end).getTime()-new Date(e.start).getTime())/1e3;s[t]+=a}),{filename:t,extension:t.split(".").pop()||"",totalSeconds:r,timeByHour:s,fullPath:a[0].file}}).sort((e,t)=>t.totalSeconds-e.totalSeconds)},getUrlActivityForProject:(e,t)=>{let a=n()[t];if(!a||!a[e])return[];let r=a[e].sessions.filter(e=>"browsing"===e.type&&e.url),s={};return r.forEach(e=>{e.url&&(s[e.url]||(s[e.url]=[]),s[e.url].push(e))}),Object.entries(s).map(e=>{let[t,a]=e,r=a.reduce((e,t)=>e+(new Date(t.end).getTime()-new Date(t.start).getTime())/1e3,0);return{url:t,host:a[0].host||new URL(t).hostname,totalSeconds:r,sessionCount:a.length}}).sort((e,t)=>t.totalSeconds-e.totalSeconds)},dateToESTString:ew,createESTDate:ej}};var eS=a(5880),eT=a(9602),eC=a(9715),eA=a(3924);function eD(e){let{statsData:t,currentWeek:a,idleTimeoutMinutes:n,ignoredProjects:i=[],projectCustomNames:l=[],projectClients:o=[],commits:c=[],wrikeProjectMappings:d=[]}=e,[m,f]=(0,s.useState)(null),[j,y]=(0,s.useState)(!1),{getStackedWeeklyData:v,getProjectChartData:N,formatHoursForChart:b,getMergedSessionsForProjectDay:w,calculateMergedDuration:k}=ek(t,a,n,i),T=e=>{let t=l.find(t=>t.projectName===e);return t?t.customName:e},C=v(),D=N().reduce((e,t)=>(e[t.name]=t.color,e),{}),E=Array.from(new Set(C.flatMap(e=>Object.keys(e).filter(e=>!["day","date","target"].includes(e))))).sort();E.reduce((e,t)=>(e[t]={label:t,color:D[t]||"#8884d8"},e),{}).target={label:"Target Hours",color:"#e5e7eb"};let O=C.map(e=>{let t={},a=0;return Object.entries(e).forEach(e=>{let[r,s]=e;["day","date","target"].includes(r)||(t[r]=s,a+=s)}),{day:e.day,date:e.date,totalHours:a,projectHours:t}}),L=E.reduce((e,t)=>{let a=O.reduce((e,a)=>e+(a.projectHours[t]||0),0);return e[t]=a,e},{}),U=Object.values(L).reduce((e,t)=>e+t,0);return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)(u,{children:[(0,r.jsxs)(h,{children:[(0,r.jsx)(x,{children:"Weekly Timesheet"}),(0,r.jsx)(g,{children:"Click any cell to view session details for that day and project"})]}),(0,r.jsx)(p,{children:(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full border-collapse text-sm",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"border-b-2 border-gray-300 dark:border-gray-700",children:[(0,r.jsx)("th",{className:"py-3 px-4 text-left font-semibold text-gray-700 dark:text-gray-300 bg-gray-50 dark:bg-gray-800",children:"Project"}),O.map(e=>(0,r.jsx)("th",{className:"py-3 px-4 text-right font-semibold text-gray-700 dark:text-gray-300 bg-gray-50 dark:bg-gray-800",children:e.day},e.date)),(0,r.jsx)("th",{className:"py-3 px-4 text-right font-semibold text-gray-700 dark:text-gray-300 bg-teal-50 dark:bg-teal-950",children:"Total"})]})}),(0,r.jsx)("tbody",{children:E.map(e=>{let a=d.find(t=>t.projectName===e),s=(e=>{let t=o.find(t=>t.projectName===e);return t?t.clientName:null})(e);return(0,r.jsxs)("tr",{className:"border-b dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-800",children:[(0,r.jsx)("td",{className:"py-3 px-4 font-medium text-gray-900 dark:text-gray-100",children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:D[e]}}),(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsx)("span",{children:T(e)}),s&&(0,r.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-400 font-normal",children:s})]}),a&&(0,r.jsx)("a",{href:a.wrikePermalink,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 ml-1",title:"Open ".concat(a.wrikeProjectTitle," in Wrike"),children:(0,r.jsx)(eS.A,{className:"w-3.5 h-3.5"})})]})}),O.map(a=>{let s=a.projectHours[e]||0;return(0,r.jsx)("td",{className:"py-3 px-4 text-right ".concat(s>0?"cursor-pointer hover:bg-teal-50 dark:hover:bg-teal-950 font-medium dark:text-gray-200":"text-gray-400 dark:text-gray-600"),onClick:()=>s>0&&((e,a,r,s)=>{if(0===s)return;let n=t[a];if(!n||!n[r])return;let i=w(n[r]).map(e=>{let t=new Date(e.start),a=new Date(e.end);return{start:e.start,end:e.end,duration:(a.getTime()-t.getTime())/1e3,type:e.type,file:e.file,url:e.url,host:e.host}});f({day:e,date:a,project:r,hours:s,sessions:i}),y(!0)})(a.day,a.date,e,s),children:s>0?b(s):"-"},a.date)}),(0,r.jsx)("td",{className:"py-3 px-4 text-right font-bold text-teal-800 dark:text-teal-300 bg-teal-50 dark:bg-teal-950",children:b(L[e])})]},e)})}),(0,r.jsx)("tfoot",{children:(0,r.jsxs)("tr",{className:"bg-gray-100 dark:bg-gray-800 border-t-2 border-gray-300 dark:border-gray-700",children:[(0,r.jsx)("td",{className:"py-3 px-4 font-bold text-gray-900 dark:text-gray-100",children:"Total"}),O.map(e=>(0,r.jsx)("td",{className:"py-3 px-4 text-right font-bold text-gray-900 dark:text-gray-100",children:b(e.totalHours)},e.date)),(0,r.jsx)("td",{className:"py-3 px-4 text-right font-bold text-teal-900 dark:text-teal-200 bg-teal-100 dark:bg-teal-900",children:b(U)})]})})]})})})]}),(0,r.jsx)(A,{open:j,onOpenChange:y,children:(0,r.jsxs)(P,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[(0,r.jsx)(I,{children:(0,r.jsx)(R,{children:m&&(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:D[m.project]}}),(0,r.jsxs)("span",{children:[m.day," - ",T(m.project)]}),(0,r.jsx)(S,{variant:"outline",children:b(m.hours)})]})})}),m&&(0,r.jsxs)(eh,{defaultValue:"timeline",className:"w-full",children:[(0,r.jsxs)(ex,{children:[(0,r.jsx)(eg,{value:"timeline",children:"Timeline"}),(0,r.jsx)(eg,{value:"files",children:"Files"}),(0,r.jsx)(eg,{value:"websites",children:"Websites"}),(0,r.jsx)(eg,{value:"commits",children:"Commits"})]}),(0,r.jsxs)(ep,{value:"timeline",className:"space-y-4",children:[(0,r.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[m.sessions.length," session",1!==m.sessions.length?"s":""]}),(0,r.jsxs)("div",{className:"border dark:border-gray-700 rounded-lg p-4 bg-gray-50 dark:bg-gray-800",children:[(0,r.jsx)("h4",{className:"text-sm font-semibold mb-3 dark:text-gray-200",children:"Activity Timeline"}),(0,r.jsxs)("div",{className:"relative h-12 bg-white dark:bg-gray-900 rounded border dark:border-gray-700",children:[(0,r.jsx)("div",{className:"absolute inset-0 flex",children:Array.from({length:24},(e,t)=>(0,r.jsx)("div",{className:"flex-1 border-r border-gray-200 dark:border-gray-700 text-xs text-gray-400 dark:text-gray-500 px-1",children:t.toString().padStart(2,"0")},t))}),(0,r.jsx)("div",{className:"absolute inset-0 pt-6",children:m.sessions.map((e,t)=>{let a=new Date(e.start),s=new Date(e.end),n=a.getHours()+a.getMinutes()/60,i=s.getHours()+s.getMinutes()/60;return(0,r.jsx)("div",{className:"absolute h-6 rounded",style:{left:"".concat(n/24*100,"%"),width:"".concat((i-n)/24*100,"%"),backgroundColor:"coding"===e.type?"#2D5A5A":"#F59E0B",opacity:.8},title:"".concat(a.toLocaleTimeString()," - ").concat(s.toLocaleTimeString())},t)})})]}),(0,r.jsxs)("div",{className:"flex gap-4 mt-2 text-xs dark:text-gray-300",children:[(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)("div",{className:"w-3 h-3 rounded",style:{backgroundColor:"#2D5A5A"}}),(0,r.jsx)("span",{children:"Coding"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)("div",{className:"w-3 h-3 rounded",style:{backgroundColor:"#F59E0B"}}),(0,r.jsx)("span",{children:"Browsing"})]})]})]}),(0,r.jsx)("div",{className:"space-y-2",children:m.sessions.map((e,t)=>(0,r.jsxs)("div",{className:"flex items-start gap-3 p-3 border dark:border-gray-700 rounded-lg bg-gray-50 dark:bg-gray-800",children:[(0,r.jsx)("div",{className:"flex items-center gap-2 pt-1",children:"coding"===e.type?(0,r.jsx)(eT.A,{className:"w-4 h-4 text-teal-600 dark:text-teal-400"}):(0,r.jsx)(B.A,{className:"w-4 h-4 text-amber-600 dark:text-amber-400"})}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,r.jsx)(S,{variant:"coding"===e.type?"default":"secondary",children:e.type}),(0,r.jsxs)("div",{className:"text-sm font-medium dark:text-gray-200",children:[new Date(e.start).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})," ","-"," ",new Date(e.end).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-1 text-sm font-medium text-gray-600 dark:text-gray-400",children:[(0,r.jsx)(W.A,{className:"w-3 h-3"}),b(e.duration/3600)]})]}),e.file&&(0,r.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400 truncate",title:e.file,children:[(0,r.jsx)(eC.A,{className:"w-3 h-3 inline mr-1"}),e.file]}),e.url&&(0,r.jsxs)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 flex items-center gap-1 truncate",title:e.url,children:[(0,r.jsx)(B.A,{className:"w-3 h-3"}),e.host||new URL(e.url).hostname,(0,r.jsx)(eS.A,{className:"w-3 h-3"})]})]})]},t))})]}),(0,r.jsx)(ep,{value:"files",className:"space-y-2",children:(()=>{let e=Object.values(m.sessions.filter(e=>"coding"===e.type&&e.file).reduce((e,t)=>{let a=t.file;return e[a]||(e[a]={file:a,duration:0,sessions:0}),e[a].duration+=t.duration,e[a].sessions+=1,e},{})).sort((e,t)=>t.duration-e.duration);return e.length>0?e.map((e,t)=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-3 border dark:border-gray-700 rounded-lg dark:bg-gray-800",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[(0,r.jsx)(eC.A,{className:"w-4 h-4 text-gray-600 dark:text-gray-400 flex-shrink-0"}),(0,r.jsx)("span",{className:"text-sm dark:text-gray-200 truncate",title:e.file,children:e.file})]}),(0,r.jsxs)("div",{className:"flex items-center gap-3 text-sm text-gray-600 dark:text-gray-400",children:[(0,r.jsxs)("span",{children:[e.sessions," session",1!==e.sessions?"s":""]}),(0,r.jsx)("span",{className:"font-medium",children:b(e.duration/3600)})]})]},t)):(0,r.jsx)("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:"No files recorded"})})()}),(0,r.jsx)(ep,{value:"websites",className:"space-y-2",children:(()=>{let e=Object.values(m.sessions.filter(e=>"browsing"===e.type&&e.url).reduce((e,t)=>{let a=t.url;return e[a]||(e[a]={url:a,host:t.host||new URL(a).hostname,duration:0,sessions:0}),e[a].duration+=t.duration,e[a].sessions+=1,e},{})).sort((e,t)=>t.duration-e.duration);return e.length>0?e.map((e,t)=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-3 border dark:border-gray-700 rounded-lg dark:bg-gray-800",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[(0,r.jsx)(B.A,{className:"w-4 h-4 text-amber-600 dark:text-amber-400 flex-shrink-0"}),(0,r.jsxs)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 truncate flex items-center gap-1",title:e.url,children:[e.host,(0,r.jsx)(eS.A,{className:"w-3 h-3"})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-3 text-sm text-gray-600 dark:text-gray-400",children:[(0,r.jsxs)("span",{children:[e.sessions," session",1!==e.sessions?"s":""]}),(0,r.jsx)("span",{className:"font-medium",children:b(e.duration/3600)})]})]},t)):(0,r.jsx)("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:"No websites recorded"})})()}),(0,r.jsx)(ep,{value:"commits",className:"space-y-2",children:(()=>{let e=c.filter(e=>new Date(e.commitTime).toISOString().split("T")[0]===m.date&&e.project===m.project).sort((e,t)=>new Date(t.commitTime).getTime()-new Date(e.commitTime).getTime());return e.length>0?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:[e.length," commit",1!==e.length?"s":""]}),e.map((e,t)=>(0,r.jsx)("div",{className:"p-3 border dark:border-gray-700 rounded-lg bg-gray-50 dark:bg-gray-800 space-y-2",children:(0,r.jsxs)("div",{className:"flex items-start gap-3",children:[(0,r.jsx)(eA.A,{className:"w-4 h-4 text-purple-600 dark:text-purple-400 flex-shrink-0 mt-1"}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,r.jsx)("code",{className:"text-xs font-mono bg-gray-200 dark:bg-gray-700 dark:text-gray-200 px-2 py-0.5 rounded",children:e.commitHash.substring(0,7)}),e.branch&&(0,r.jsx)(S,{variant:"outline",className:"text-xs",children:e.branch}),(0,r.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:new Date(e.commitTime).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),(0,r.jsx)("div",{className:"text-sm text-gray-900 dark:text-gray-100 mb-2",children:e.commitMessage}),(0,r.jsxs)("div",{className:"flex items-center gap-4 text-xs text-gray-600 dark:text-gray-400",children:[e.authorName&&(0,r.jsxs)("span",{children:[(0,r.jsx)("strong",{children:"Author:"})," ",e.authorName]}),e.filesChanged>0&&(0,r.jsxs)("span",{children:[(0,r.jsx)("strong",{children:"Files:"})," ",e.filesChanged]}),(e.linesAdded>0||e.linesDeleted>0)&&(0,r.jsxs)("span",{children:[(0,r.jsxs)("span",{className:"text-green-600 dark:text-green-400",children:["+",e.linesAdded]})," /"," ",(0,r.jsxs)("span",{className:"text-red-600 dark:text-red-400",children:["-",e.linesDeleted]})]})]})]})]})},t))]}):(0,r.jsx)("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:"No commits recorded for this day"})})()})]})]})})]})}var eE=a(5644),eP=a(4033),eI=a(2108),eO=a(5917);let eR=eE.bL;eE.YJ;let eL=eE.WT,eU=s.forwardRef((e,t)=>{let{className:a,children:s,...n}=e;return(0,r.jsxs)(eE.l9,{ref:t,className:(0,o.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...n,children:[s,(0,r.jsx)(eE.In,{asChild:!0,children:(0,r.jsx)(eP.A,{className:"h-4 w-4 opacity-50"})})]})});eU.displayName=eE.l9.displayName;let eF=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(eE.PP,{ref:t,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",a),...s,children:(0,r.jsx)(eI.A,{className:"h-4 w-4"})})});eF.displayName=eE.PP.displayName;let eM=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(eE.wn,{ref:t,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",a),...s,children:(0,r.jsx)(eP.A,{className:"h-4 w-4"})})});eM.displayName=eE.wn.displayName;let ez=s.forwardRef((e,t)=>{let{className:a,children:s,position:n="popper",...i}=e;return(0,r.jsx)(eE.ZL,{children:(0,r.jsxs)(eE.UC,{ref:t,className:(0,o.cn)("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:n,...i,children:[(0,r.jsx)(eF,{}),(0,r.jsx)(eE.LM,{className:(0,o.cn)("p-1","popper"===n&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),(0,r.jsx)(eM,{})]})})});ez.displayName=eE.UC.displayName,s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(eE.JU,{ref:t,className:(0,o.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",a),...s})}).displayName=eE.JU.displayName;let eW=s.forwardRef((e,t)=>{let{className:a,children:s,...n}=e;return(0,r.jsxs)(eE.q7,{ref:t,className:(0,o.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...n,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(eE.VF,{children:(0,r.jsx)(eO.A,{className:"h-4 w-4"})})}),(0,r.jsx)(eE.p4,{children:s})]})});eW.displayName=eE.q7.displayName,s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(eE.wv,{ref:t,className:(0,o.cn)("-mx-1 my-1 h-px bg-muted",a),...s})}).displayName=eE.wv.displayName;var eH=a(368),eJ=a(7937);function eV(e){let{statsData:t,currentWeek:a,idleTimeoutMinutes:n,ignoredProjects:i=[],selectedDate:l,onDateChange:o}=e,[c,m]=(0,s.useState)(()=>l||ew(new Date)),{formatDuration:f,formatHoursForChart:j,getMergedSessionsForProjectDay:y,getProjectChartData:v}=ek(t,a,n,i),N=Object.keys(t).sort().reverse(),b=t[c]||{},w=v().reduce((e,t)=>(e[t.name]=t.color,e),{}),k=Object.entries(b).flatMap(e=>{let[t,a]=e;return y(a).map(e=>{let a=new Date(e.start),r=new Date(e.end);return{project:t,color:w[t]||"#8884d8",start:e.start,end:e.end,duration:(r.getTime()-a.getTime())/1e3,type:e.type}})}).sort((e,t)=>new Date(e.start).getTime()-new Date(t.start).getTime()),T=Object.entries(b).map(e=>{let[t,a]=e,r=y(a),s=r.reduce((e,t)=>{let a=new Date(t.start);return e+(new Date(t.end).getTime()-a.getTime())/1e3},0);return{project:t,duration:s,hours:s/3600,sessions:r.length,color:w[t]||"#8884d8"}}),C=T.reduce((e,t)=>e+t.hours,0),A=e=>{let t=new Date(ej(c));t.setDate(t.getDate()+("next"===e?1:-1));let a=ew(t);m(a),o&&o(a)};return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)(u,{children:(0,r.jsx)(h,{children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(d,{variant:"outline",size:"sm",onClick:()=>A("prev"),children:(0,r.jsx)(eH.A,{className:"w-4 h-4"})}),(0,r.jsx)(d,{variant:"outline",size:"sm",onClick:()=>A("next"),children:(0,r.jsx)(eJ.A,{className:"w-4 h-4"})})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)(x,{className:"flex items-center gap-2",children:[(0,r.jsx)(en.A,{className:"w-5 h-5"}),"Daily Details"]}),(0,r.jsx)(g,{children:eN(c)})]})]}),(0,r.jsx)("div",{className:"flex items-center gap-4",children:(0,r.jsxs)(eR,{value:c,onValueChange:e=>{m(e),o&&o(e)},children:[(0,r.jsx)(eU,{className:"w-48",children:(0,r.jsx)(eL,{placeholder:"Select a date"})}),(0,r.jsx)(ez,{children:N.map(e=>(0,r.jsx)(eW,{value:e,children:ey(e,{weekday:"short",month:"short",day:"numeric"})},e))})]})})]})})}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,r.jsx)(u,{children:(0,r.jsxs)(p,{className:"p-4",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-teal-800",children:j(C)}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Total Hours"})]})}),(0,r.jsx)(u,{children:(0,r.jsxs)(p,{className:"p-4",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-teal-800",children:k.length}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Total Sessions"})]})}),(0,r.jsx)(u,{children:(0,r.jsxs)(p,{className:"p-4",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-teal-800",children:k.filter(e=>"coding"===e.type).length}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Coding Sessions"})]})}),(0,r.jsx)(u,{children:(0,r.jsxs)(p,{className:"p-4",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-teal-800",children:T.length}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Active Projects"})]})})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,r.jsxs)(u,{children:[(0,r.jsxs)(h,{children:[(0,r.jsx)(x,{children:"Project Breakdown"}),(0,r.jsx)(g,{children:"Time spent on each project today"})]}),(0,r.jsx)(p,{children:0===T.length?(0,r.jsx)("div",{className:"text-center py-8 text-gray-500",children:"No activity recorded for this day"}):(0,r.jsx)("div",{className:"space-y-3",children:T.sort((e,t)=>t.hours-e.hours).map(e=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:e.color}}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"font-medium",children:e.project}),(0,r.jsxs)("div",{className:"text-sm text-gray-600",children:[e.sessions," sessions"]})]})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsx)("div",{className:"font-medium",children:j(e.hours)}),(0,r.jsxs)("div",{className:"text-sm text-gray-600",children:[Math.round(e.hours/C*100),"%"]})]})]},e.project))})})]}),(0,r.jsxs)(u,{children:[(0,r.jsxs)(h,{children:[(0,r.jsx)(x,{children:"Session Timeline"}),(0,r.jsx)(g,{children:"Chronological view of your work sessions"})]}),(0,r.jsx)(p,{children:0===k.length?(0,r.jsx)("div",{className:"text-center py-8 text-gray-500",children:"No sessions recorded for this day"}):(0,r.jsx)("div",{className:"space-y-3 max-h-[400px] overflow-y-auto",children:k.map((e,t)=>(0,r.jsxs)("div",{className:"flex items-center gap-3 p-3 border rounded-lg",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:e.color}}),"coding"===e.type?(0,r.jsx)(eT.A,{className:"w-4 h-4 text-teal-600"}):(0,r.jsx)(B.A,{className:"w-4 h-4 text-amber-600"})]}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("div",{className:"font-medium",children:e.project}),(0,r.jsx)(S,{variant:"coding"===e.type?"default":"secondary",children:e.type})]}),(0,r.jsxs)("div",{className:"text-sm text-gray-600",children:[new Date(e.start).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})," ","-"," ",new Date(e.end).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-1 text-sm font-medium",children:[(0,r.jsx)(W.A,{className:"w-3 h-3"}),f(e.duration)]})]},t))})})]})]})]})}let e_=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{className:"relative w-full overflow-auto",children:(0,r.jsx)("table",{ref:t,className:(0,o.cn)("w-full caption-bottom text-sm",a),...s})})});e_.displayName="Table";let eB=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("thead",{ref:t,className:(0,o.cn)("[&_tr]:border-b",a),...s})});eB.displayName="TableHeader";let eq=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("tbody",{ref:t,className:(0,o.cn)("[&_tr:last-child]:border-0",a),...s})});eq.displayName="TableBody",s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("tfoot",{ref:t,className:(0,o.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",a),...s})}).displayName="TableFooter";let eY=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("tr",{ref:t,className:(0,o.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",a),...s})});eY.displayName="TableRow";let eK=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("th",{ref:t,className:(0,o.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",a),...s})});eK.displayName="TableHead";let eX=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("td",{ref:t,className:(0,o.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",a),...s})});eX.displayName="TableCell",s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("caption",{ref:t,className:(0,o.cn)("mt-4 text-sm text-muted-foreground",a),...s})}).displayName="TableCaption";var eG=a(8162);let eZ=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(eG.bL,{ref:t,className:(0,o.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",a),...s,children:(0,r.jsx)(eG.C1,{className:(0,o.cn)("flex items-center justify-center text-current"),children:(0,r.jsx)(eO.A,{className:"h-4 w-4"})})})});eZ.displayName=eG.bL.displayName;var eQ=a(8734),e$=a(532),e0=a(7726),e4=a(6651),e1=a(6046),e2=a(8514),e5=a(1360),e3=a(7828),e6=a(6191);function e8(e){let{statsData:t,ignoredProjects:a,projectCustomNames:n,projectClients:i,projectUrls:l,currentWeek:o,idleTimeoutMinutes:c,onIdleTimeoutChange:m,onAddIgnoredProject:j,onRemoveIgnoredProject:y,onSaveProjectCustomName:N,onRemoveProjectCustomName:b,onSaveProjectClient:w,onRemoveProjectClient:k,onCreateUrl:T,onUpdateUrl:D,onDeleteUrl:E}=e,[L,U]=(0,s.useState)(""),[F,M]=(0,s.useState)(!1),[z,H]=(0,s.useState)(""),[J,V]=(0,s.useState)(!1),[_,B]=(0,s.useState)(null),[q,Y]=(0,s.useState)(""),[K,X]=(0,s.useState)(null),[G,Z]=(0,s.useState)(""),[Q,$]=(0,s.useState)(!1),[ee,et]=(0,s.useState)(null),[er,es]=(0,s.useState)({project:"",url:"",description:""}),[en,ei]=(0,s.useState)(null),[el,eo]=(0,s.useState)(""),[ec,ed]=(0,s.useState)(1),[em,eu]=(0,s.useState)(10),[ef,ej]=(0,s.useState)(!0),[ey,ev]=(0,s.useState)(!1),[eN,eb]=(0,s.useState)(new Set),[ew,eS]=(0,s.useState)("comfortable"),[eT,eC]=(0,s.useState)(()=>localStorage.getItem("settings-active-tab")||"projects");s.useEffect(()=>{localStorage.setItem("settings-active-tab",eT)},[eT]);let{getProjectTotals:eA,formatDuration:eD}=ek(t,o,c),eE=e=>{let t=n.find(t=>t.projectName===e);return t?t.customName:e},eI=e=>n.find(t=>t.projectName===e),eO=e=>i.find(t=>t.projectName===e),eF=(()=>{let e=new Set;return Object.values(t).forEach(t=>{Object.keys(t).forEach(t=>{e.add(t)})}),Array.from(e).sort()})(),eM=eA();a.map(e=>e.projectName);let eH=e=>l?l.filter(t=>t.project===e):[],eV=(()=>{let e=new Map;return eM.forEach(t=>{e.set(t.name,{name:t.name,displayName:eE(t.name),duration:t.duration,isIgnored:!1,urls:eH(t.name)})}),a.forEach(t=>{let a=e.get(t.projectName);a?(a.isIgnored=!0,a.ignoredAt=t.ignoredAt):e.set(t.projectName,{name:t.projectName,displayName:eE(t.projectName),duration:0,isIgnored:!0,ignoredAt:t.ignoredAt,urls:eH(t.projectName)})}),Array.from(e.values())})(),eG=eV.filter(e=>{if(!ef&&e.isIgnored)return!1;if(L){let t=L.toLowerCase();return e.name.toLowerCase().includes(t)||e.displayName.toLowerCase().includes(t)||e.urls.some(e=>e.url.toLowerCase().includes(t))}return!0}).sort((e,t)=>e.displayName.localeCompare(t.displayName)),e8=s.useMemo(()=>{if(!ey)return[];let e=new Map;return eG.forEach(t=>{let a=eO(t.name),r=(null==a?void 0:a.clientName)||"Unassigned";e.has(r)||e.set(r,[]),e.get(r).push(t)}),Array.from(e.entries()).map(e=>{let[t,a]=e;return{clientName:t,projects:a}}).sort((e,t)=>"Unassigned"===e.clientName?1:"Unassigned"===t.clientName?-1:e.clientName.localeCompare(t.clientName))},[eG,ey,i]),e7=Math.ceil(eG.length/em),e9=(ec-1)*em,te=e9+em,tt=eG.slice(e9,te),ta=s.useRef(L),tr=s.useRef(ef);s.useEffect(()=>{(ta.current!==L||tr.current!==ef)&&(ed(1),ta.current=L,tr.current=ef)},[L,ef]);let ts=async e=>{V(!0);try{await y(e)}finally{V(!1)}},tn=async e=>{V(!0);try{await j(e)}finally{V(!1)}},ti=async e=>{if(e.isIgnored){let t=a.find(t=>t.projectName===e.name);t&&await ts(t.id)}else await tn(e.name)},tl=e=>{let t=eI(e);B(e),Y((null==t?void 0:t.customName)||"")},to=async e=>{if(q.trim()){V(!0);try{await N(e,q.trim()),B(null),Y("")}finally{V(!1)}}},tc=()=>{B(null),Y("")},td=e=>{let t=eO(e);X(e),Z((null==t?void 0:t.clientName)||"")},tm=async e=>{if(G.trim()){V(!0);try{await w(e,G.trim()),X(null),Z("")}finally{V(!1)}}},tu=()=>{X(null),Z("")},th=e=>{et(e),es({project:e.project,url:e.url,description:e.description||""}),$(!0)},tx=()=>{es({project:"",url:"",description:""})},tg=e=>{$(e),e||(et(null),tx())},tp=async e=>{e.preventDefault(),V(!0);try{ee?await D(ee.id,er):await T(er),$(!1),tx(),et(null)}finally{V(!1)}},tf=async e=>{V(!0);try{await E(e)}finally{V(!1)}},tj=async e=>{if(!el.trim()){ei(null),eo("");return}V(!0);try{await T({project:e,url:el.trim(),description:""}),ei(null),eo("")}finally{V(!1)}},ty=()=>{ei(null),eo("")};return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)(u,{children:(0,r.jsx)(h,{children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)(ea.A,{className:"w-6 h-6 text-teal-600"}),(0,r.jsxs)("div",{children:[(0,r.jsx)(x,{children:"Settings"}),(0,r.jsx)(g,{children:"Manage your time tracker preferences and projects"})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsxs)(S,{variant:"outline",className:"px-3 py-1",children:[(0,r.jsx)(eQ.A,{className:"w-4 h-4 mr-1"}),eM.length," Active"]}),(0,r.jsxs)(S,{variant:"secondary",className:"px-3 py-1",children:[(0,r.jsx)(e$.A,{className:"w-4 h-4 mr-1"}),a.length," Ignored"]}),(0,r.jsxs)(S,{variant:"outline",className:"px-3 py-1",children:[(0,r.jsx)(e0.A,{className:"w-4 h-4 mr-1"}),n.length," Custom Names"]})]})]})})}),(0,r.jsxs)(eh,{value:eT,onValueChange:eC,className:"w-full",children:[(0,r.jsxs)(ex,{children:[(0,r.jsxs)(eg,{value:"projects",children:[(0,r.jsx)(eQ.A,{className:"w-4 h-4 mr-2"}),"Projects"]}),(0,r.jsxs)(eg,{value:"general",children:[(0,r.jsx)(W.A,{className:"w-4 h-4 mr-2"}),"General"]})]}),(0,r.jsx)(ep,{value:"general",className:"space-y-6",children:(0,r.jsxs)(u,{children:[(0,r.jsxs)(h,{children:[(0,r.jsx)(x,{children:"Idle Timeout"}),(0,r.jsx)(g,{children:"Set the time after which inactivity will split sessions. This affects how sessions are grouped together."})]}),(0,r.jsx)(p,{children:(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)(v,{htmlFor:"idle-timeout",className:"text-sm font-medium",children:"Idle timeout duration:"}),(0,r.jsxs)(eR,{value:c.toString(),onValueChange:e=>m(parseInt(e)),children:[(0,r.jsx)(eU,{id:"idle-timeout",className:"w-48",children:(0,r.jsx)(eL,{})}),(0,r.jsx)(ez,{children:[5,10,15,20,30].map(e=>(0,r.jsxs)(eW,{value:e.toString(),children:[e," minutes"]},e))})]})]})})]})}),(0,r.jsxs)(ep,{value:"projects",className:"space-y-6",children:[(0,r.jsxs)(u,{children:[(0,r.jsx)(h,{children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(x,{children:"Projects"}),(0,r.jsx)(g,{children:"Manage project visibility, custom names, and URLs"})]}),(0,r.jsx)("div",{className:"flex items-center gap-2",children:(0,r.jsxs)(S,{variant:"outline",children:[eG.length," of ",eV.length," projects"]})})]})}),(0,r.jsxs)(p,{children:[(0,r.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[(0,r.jsxs)("div",{className:"flex-1 relative",children:[(0,r.jsx)(e4.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),(0,r.jsx)(f,{placeholder:"Search projects or URLs...",value:L,onChange:e=>U(e.target.value),className:"pl-10"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(eZ,{id:"show-ignored",checked:ef,onCheckedChange:e=>ej(e)}),(0,r.jsx)(v,{htmlFor:"show-ignored",className:"text-sm cursor-pointer",children:"Show ignored"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(eZ,{id:"group-by-client",checked:ey,onCheckedChange:e=>ev(e)}),(0,r.jsx)(v,{htmlFor:"group-by-client",className:"text-sm cursor-pointer",children:"Group by client"})]}),(0,r.jsxs)(eR,{value:ew,onValueChange:e=>eS(e),children:[(0,r.jsx)(eU,{className:"w-36",children:(0,r.jsx)(eL,{})}),(0,r.jsxs)(ez,{children:[(0,r.jsx)(eW,{value:"comfortable",children:"Comfortable"}),(0,r.jsx)(eW,{value:"compact",children:"Compact"})]})]}),(0,r.jsxs)(eR,{value:em.toString(),onValueChange:e=>eu(Number(e)),children:[(0,r.jsx)(eU,{className:"w-32",children:(0,r.jsx)(eL,{})}),(0,r.jsxs)(ez,{children:[(0,r.jsx)(eW,{value:"10",children:"10 / page"}),(0,r.jsx)(eW,{value:"25",children:"25 / page"}),(0,r.jsx)(eW,{value:"50",children:"50 / page"}),(0,r.jsx)(eW,{value:"100",children:"100 / page"})]})]})]}),(0,r.jsx)("div",{className:"rounded-md border",children:(0,r.jsxs)(e_,{children:[(0,r.jsx)(eB,{children:(0,r.jsxs)(eY,{className:"compact"===ew?"text-xs":"",children:[(0,r.jsx)(eK,{children:"Project Name"}),(0,r.jsx)(eK,{children:"Custom Name"}),(0,r.jsx)(eK,{children:"Client"}),(0,r.jsx)(eK,{className:"w-28",children:"Duration"}),(0,r.jsx)(eK,{children:"URLs"}),(0,r.jsx)(eK,{className:"w-32",children:"Actions"})]})}),(0,r.jsx)(eq,{children:0===tt.length?(0,r.jsx)(eY,{children:(0,r.jsx)(eX,{colSpan:6,className:"text-center text-gray-500 py-8",children:L?"No projects match your search.":"No projects found."})}):ey?e8.flatMap(e=>{let t=eN.has(e.clientName),a=e.projects.slice(e9,te);return[(0,r.jsx)(eY,{className:"bg-gray-100 hover:bg-gray-200 cursor-pointer",onClick:()=>{var t;return t=e.clientName,void eb(e=>{let a=new Set(e);return a.has(t)?a.delete(t):a.add(t),a})},children:(0,r.jsx)(eX,{colSpan:6,className:"font-semibold",children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[t?(0,r.jsx)(eJ.A,{className:"w-4 h-4"}):(0,r.jsx)(eP.A,{className:"w-4 h-4"}),(0,r.jsxs)("span",{children:[e.clientName," (",e.projects.length," project",1!==e.projects.length?"s":"",")"]})]})})},"group-".concat(e.clientName)),...t?[]:a.map(e=>{var t,a;return(0,r.jsxs)(eY,{className:"".concat(e.isIgnored?"bg-orange-50":""," ").concat("compact"===ew?"text-xs":""),children:[(0,r.jsx)(eX,{children:(0,r.jsxs)("div",{className:"flex items-center gap-2 pl-6",children:[(0,r.jsx)("div",{className:"w-2 h-2 rounded-full ".concat(e.isIgnored?"bg-orange-500":"bg-green-500")}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"font-medium",children:e.name}),e.isIgnored&&e.ignoredAt&&(0,r.jsxs)("div",{className:"text-xs text-gray-500",children:["Ignored ",new Date(e.ignoredAt).toLocaleDateString()]})]})]})}),(0,r.jsx)(eX,{children:_===e.name?(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)(f,{value:q,onChange:e=>Y(e.target.value),placeholder:"Enter custom name",className:"h-8",autoFocus:!0,onKeyDown:t=>{"Enter"===t.key?to(e.name):"Escape"===t.key&&tc()}}),(0,r.jsx)(d,{size:"sm",onClick:()=>to(e.name),disabled:!q.trim()||J,className:"h-8 px-2",children:(0,r.jsx)(e1.A,{className:"w-4 h-4"})}),(0,r.jsx)(d,{size:"sm",variant:"outline",onClick:tc,className:"h-8 px-2",children:(0,r.jsx)(C.A,{className:"w-4 h-4"})})]}):(0,r.jsx)("span",{className:"text-sm cursor-pointer hover:bg-gray-100 px-2 py-1 rounded -mx-2",onClick:()=>tl(e.name),title:"Click to edit custom name",children:eI(e.name)?null==(t=eI(e.name))?void 0:t.customName:(0,r.jsx)("span",{className:"text-gray-400 italic",children:"Not set"})})}),(0,r.jsx)(eX,{children:K===e.name?(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)(f,{value:G,onChange:e=>Z(e.target.value),placeholder:"Enter client name",className:"h-8",autoFocus:!0,onKeyDown:t=>{"Enter"===t.key?tm(e.name):"Escape"===t.key&&tu()}}),(0,r.jsx)(d,{size:"sm",onClick:()=>tm(e.name),disabled:!G.trim()||J,className:"h-8 px-2",children:(0,r.jsx)(e1.A,{className:"w-4 h-4"})}),(0,r.jsx)(d,{size:"sm",variant:"outline",onClick:tu,className:"h-8 px-2",children:(0,r.jsx)(C.A,{className:"w-4 h-4"})})]}):(0,r.jsx)("span",{className:"text-sm cursor-pointer hover:bg-gray-100 px-2 py-1 rounded -mx-2",onClick:()=>td(e.name),title:"Click to assign/edit client",children:eO(e.name)?null==(a=eO(e.name))?void 0:a.clientName:(0,r.jsx)("span",{className:"text-gray-400 italic",children:"Not set"})})}),(0,r.jsx)(eX,{children:e.duration>0?(0,r.jsxs)("div",{className:"flex items-center gap-1 text-sm",children:[(0,r.jsx)(W.A,{className:"w-3 h-3"}),eD(e.duration)]}):(0,r.jsx)("span",{className:"text-gray-400 text-sm",children:"-"})}),(0,r.jsx)(eX,{children:(0,r.jsxs)("div",{className:"space-y-1",children:[e.urls.map(e=>(0,r.jsxs)("div",{className:"flex items-center gap-1 text-xs",children:[(0,r.jsx)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"text-teal-600 hover:text-teal-800 truncate max-w-[200px] inline-block",title:e.url,children:e.url}),(0,r.jsx)(d,{variant:"ghost",size:"sm",onClick:()=>th(e),className:"h-5 w-5 p-0",children:(0,r.jsx)(e2.A,{className:"h-3 w-3"})}),(0,r.jsx)(d,{variant:"ghost",size:"sm",onClick:()=>tf(e.id),className:"h-5 w-5 p-0 text-red-500 hover:text-red-600",disabled:J,children:(0,r.jsx)(e5.A,{className:"h-3 w-3"})})]},e.id)),en===e.name?(0,r.jsxs)("div",{className:"flex items-center gap-1 mt-1",children:[(0,r.jsx)(f,{value:el,onChange:e=>eo(e.target.value),placeholder:"https://example.com",className:"h-7 text-xs",autoFocus:!0,onKeyDown:t=>{"Enter"===t.key?tj(e.name):"Escape"===t.key&&ty()}}),(0,r.jsx)(d,{size:"sm",onClick:()=>tj(e.name),disabled:!el.trim()||J,className:"h-7 px-2",children:(0,r.jsx)(e1.A,{className:"w-3 h-3"})}),(0,r.jsx)(d,{size:"sm",variant:"outline",onClick:ty,className:"h-7 px-2",children:(0,r.jsx)(C.A,{className:"w-3 h-3"})})]}):0===e.urls.length?(0,r.jsx)("span",{className:"text-xs text-gray-400",children:"No URLs"}):null]})}),(0,r.jsx)(eX,{children:(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)(d,{size:"sm",variant:"ghost",onClick:()=>ti(e),disabled:J,className:"h-7 px-2",title:e.isIgnored?"Show project":"Ignore project",children:e.isIgnored?(0,r.jsx)(e$.A,{className:"w-4 h-4 text-orange-600"}):(0,r.jsx)(e3.A,{className:"w-4 h-4 text-green-600"})}),(0,r.jsxs)(d,{size:"sm",variant:"ghost",onClick:()=>{ei(e.name),eo("")},className:"h-7 px-2 text-xs",title:"Add URL",disabled:en===e.name,children:[(0,r.jsx)(e6.A,{className:"w-3 h-3 mr-1"}),"Add URL"]})]})})]},e.name)})]}):tt.map(e=>{var t,a;return(0,r.jsxs)(eY,{className:"".concat(e.isIgnored?"bg-orange-50":""," ").concat("compact"===ew?"text-xs":""),children:[(0,r.jsx)(eX,{children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"w-2 h-2 rounded-full ".concat(e.isIgnored?"bg-orange-500":"bg-green-500")}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"font-medium",children:e.name}),e.isIgnored&&e.ignoredAt&&(0,r.jsxs)("div",{className:"text-xs text-gray-500",children:["Ignored ",new Date(e.ignoredAt).toLocaleDateString()]})]})]})}),(0,r.jsx)(eX,{children:_===e.name?(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)(f,{value:q,onChange:e=>Y(e.target.value),placeholder:"Enter custom name",className:"h-8",autoFocus:!0,onKeyDown:t=>{"Enter"===t.key?to(e.name):"Escape"===t.key&&tc()}}),(0,r.jsx)(d,{size:"sm",onClick:()=>to(e.name),disabled:!q.trim()||J,className:"h-8 px-2",children:(0,r.jsx)(e1.A,{className:"w-4 h-4"})}),(0,r.jsx)(d,{size:"sm",variant:"outline",onClick:tc,className:"h-8 px-2",children:(0,r.jsx)(C.A,{className:"w-4 h-4"})})]}):(0,r.jsx)("span",{className:"text-sm cursor-pointer hover:bg-gray-100 px-2 py-1 rounded -mx-2",onClick:()=>tl(e.name),title:"Click to edit custom name",children:eI(e.name)?null==(t=eI(e.name))?void 0:t.customName:(0,r.jsx)("span",{className:"text-gray-400 italic",children:"Not set"})})}),(0,r.jsx)(eX,{children:K===e.name?(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)(f,{value:G,onChange:e=>Z(e.target.value),placeholder:"Enter client name",className:"h-8",autoFocus:!0,onKeyDown:t=>{"Enter"===t.key?tm(e.name):"Escape"===t.key&&tu()}}),(0,r.jsx)(d,{size:"sm",onClick:()=>tm(e.name),disabled:!G.trim()||J,className:"h-8 px-2",children:(0,r.jsx)(e1.A,{className:"w-4 h-4"})}),(0,r.jsx)(d,{size:"sm",variant:"outline",onClick:tu,className:"h-8 px-2",children:(0,r.jsx)(C.A,{className:"w-4 h-4"})})]}):(0,r.jsx)("span",{className:"text-sm cursor-pointer hover:bg-gray-100 px-2 py-1 rounded -mx-2",onClick:()=>td(e.name),title:"Click to assign/edit client",children:eO(e.name)?null==(a=eO(e.name))?void 0:a.clientName:(0,r.jsx)("span",{className:"text-gray-400 italic",children:"Not set"})})}),(0,r.jsx)(eX,{children:e.duration>0?(0,r.jsxs)("div",{className:"flex items-center gap-1 text-sm",children:[(0,r.jsx)(W.A,{className:"w-3 h-3"}),eD(e.duration)]}):(0,r.jsx)("span",{className:"text-gray-400 text-sm",children:"-"})}),(0,r.jsx)(eX,{children:(0,r.jsxs)("div",{className:"space-y-1",children:[e.urls.map(e=>(0,r.jsxs)("div",{className:"flex items-center gap-1 text-xs",children:[(0,r.jsx)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"text-teal-600 hover:text-teal-800 truncate max-w-[200px] inline-block",title:e.url,children:e.url}),(0,r.jsx)(d,{variant:"ghost",size:"sm",onClick:()=>th(e),className:"h-5 w-5 p-0",children:(0,r.jsx)(e2.A,{className:"h-3 w-3"})}),(0,r.jsx)(d,{variant:"ghost",size:"sm",onClick:()=>tf(e.id),className:"h-5 w-5 p-0 text-red-500 hover:text-red-600",disabled:J,children:(0,r.jsx)(e5.A,{className:"h-3 w-3"})})]},e.id)),en===e.name?(0,r.jsxs)("div",{className:"flex items-center gap-1 mt-1",children:[(0,r.jsx)(f,{value:el,onChange:e=>eo(e.target.value),placeholder:"https://example.com",className:"h-7 text-xs",autoFocus:!0,onKeyDown:t=>{"Enter"===t.key?tj(e.name):"Escape"===t.key&&ty()}}),(0,r.jsx)(d,{size:"sm",onClick:()=>tj(e.name),disabled:!el.trim()||J,className:"h-7 px-2",children:(0,r.jsx)(e1.A,{className:"w-3 h-3"})}),(0,r.jsx)(d,{size:"sm",variant:"outline",onClick:ty,className:"h-7 px-2",children:(0,r.jsx)(C.A,{className:"w-3 h-3"})})]}):0===e.urls.length?(0,r.jsx)("span",{className:"text-xs text-gray-400",children:"No URLs"}):null]})}),(0,r.jsx)(eX,{children:(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)(d,{size:"sm",variant:"ghost",onClick:()=>ti(e),disabled:J,className:"h-7 px-2",title:e.isIgnored?"Show project":"Ignore project",children:e.isIgnored?(0,r.jsx)(e$.A,{className:"w-4 h-4 text-orange-600"}):(0,r.jsx)(e3.A,{className:"w-4 h-4 text-green-600"})}),(0,r.jsxs)(d,{size:"sm",variant:"ghost",onClick:()=>{ei(e.name),eo("")},className:"h-7 px-2 text-xs",title:"Add URL",disabled:en===e.name,children:[(0,r.jsx)(e6.A,{className:"w-3 h-3 mr-1"}),"Add URL"]})]})})]},e.name)})})]})}),e7>1&&(0,r.jsxs)("div",{className:"flex items-center justify-between mt-4",children:[(0,r.jsxs)("div",{className:"text-sm text-gray-600",children:["Showing ",e9+1,"-",Math.min(te,eG.length)," of ",eG.length," projects"]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(d,{variant:"outline",size:"sm",onClick:()=>ed(e=>Math.max(1,e-1)),disabled:1===ec,children:"Previous"}),(0,r.jsx)("div",{className:"flex items-center gap-1",children:Array.from({length:Math.min(5,e7)},(e,t)=>{let a;return a=e7<=5||ec<=3?t+1:ec>=e7-2?e7-4+t:ec-2+t,(0,r.jsx)(d,{variant:ec===a?"default":"outline",size:"sm",onClick:()=>ed(a),className:"w-8 h-8 p-0",children:a},a)})}),(0,r.jsx)(d,{variant:"outline",size:"sm",onClick:()=>ed(e=>Math.min(e7,e+1)),disabled:ec===e7,children:"Next"})]})]})]})]}),(0,r.jsx)(A,{open:Q,onOpenChange:tg,children:(0,r.jsxs)(P,{className:"sm:max-w-[500px]",children:[(0,r.jsx)(I,{children:(0,r.jsx)(R,{children:ee?"Edit Project URL":"Add Project URL"})}),(0,r.jsxs)("form",{onSubmit:tp,children:[(0,r.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,r.jsx)("label",{htmlFor:"url-project",className:"text-right font-medium",children:"Project"}),(0,r.jsx)("div",{className:"col-span-3",children:(0,r.jsxs)(eR,{value:er.project,onValueChange:e=>es({...er,project:e}),children:[(0,r.jsx)(eU,{children:(0,r.jsx)(eL,{placeholder:"Select a project"})}),(0,r.jsx)(ez,{children:eF.map(e=>(0,r.jsx)(eW,{value:e,children:eE(e)},e))})]})})]}),(0,r.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,r.jsx)("label",{htmlFor:"url-input",className:"text-right font-medium",children:"URL"}),(0,r.jsx)(f,{id:"url-input",value:er.url,onChange:e=>es({...er,url:e.target.value}),className:"col-span-3",placeholder:"https://example.com",required:!0})]})]}),(0,r.jsxs)(O,{children:[(0,r.jsx)(d,{type:"button",variant:"outline",onClick:()=>tg(!1),children:"Cancel"}),(0,r.jsx)(d,{type:"submit",disabled:J,children:ee?"Update":"Add"})]})]})]})})]})]})]})}function e7(e){let{statsData:t,ignoredProjects:a,projectCustomNames:s,projectClients:n,projectUrls:i,commits:l,wrikeProjects:o,wrikeProjectsLoading:c,wrikeProjectMappings:d,currentWeek:m,idleTimeoutMinutes:u,onIdleTimeoutChange:h,onAddIgnoredProject:x,onRemoveIgnoredProject:g,onSaveProjectCustomName:p,onRemoveProjectCustomName:f,onSaveProjectClient:j,onRemoveProjectClient:y,onCreateUrl:v,onUpdateUrl:N,onDeleteUrl:b,onFetchWrikeProjects:w,onSaveWrikeMapping:k,activeTab:S,onTabChange:T}=e;return(0,r.jsxs)(eh,{value:S,onValueChange:T,className:"space-y-4",children:[(0,r.jsxs)(ex,{children:[(0,r.jsxs)(eg,{value:"timesheet","data-tour":"timesheet-tab",children:[(0,r.jsx)(en.A,{className:"w-4 h-4 mr-2"}),"Weekly Timesheet"]}),(0,r.jsxs)(eg,{value:"daily","data-tour":"daily-details-tab",children:[(0,r.jsx)(W.A,{className:"w-4 h-4 mr-2"}),"Daily Details"]}),(0,r.jsxs)(eg,{value:"settings","data-tour":"settings-tab",children:[(0,r.jsx)(ea.A,{className:"w-4 h-4 mr-2"}),"Settings"]})]}),(0,r.jsx)(ep,{value:"timesheet",children:(0,r.jsx)(eD,{statsData:t,currentWeek:m,idleTimeoutMinutes:u,ignoredProjects:a.map(e=>e.projectName),projectCustomNames:s,projectClients:n,commits:l,wrikeProjectMappings:d})}),(0,r.jsx)(ep,{value:"daily",children:(0,r.jsx)(eV,{statsData:t,currentWeek:m,idleTimeoutMinutes:u,ignoredProjects:a.map(e=>e.projectName)})}),(0,r.jsx)(ep,{value:"settings",children:(0,r.jsx)(e8,{statsData:t,ignoredProjects:a,projectCustomNames:s,projectClients:n,projectUrls:i,currentWeek:m,idleTimeoutMinutes:u,onIdleTimeoutChange:h,onAddIgnoredProject:x,onRemoveIgnoredProject:g,onSaveProjectCustomName:p,onRemoveProjectCustomName:f,onSaveProjectClient:j,onRemoveProjectClient:y,onCreateUrl:v,onUpdateUrl:N,onDeleteUrl:b})})]})}var e9=a(4579);function te(e){let{onComplete:t,onSkip:a}=e,r=(0,s.useRef)(null);return(0,s.useEffect)(()=>{let e=[{element:"body",popover:{title:"Welcome to PhpStorm Time Tracker",description:"Let's take a quick tour to help you get started. This will only take a minute to show you the main features and views of the application.",side:"top",align:"center"}},{element:"[data-tour='header']",popover:{title:"Header Controls",description:"Access your settings, refresh data, view license information, and logout from here. You can also adjust idle timeout and storage preferences.",side:"bottom",align:"center"}},{element:"[data-tour='week-navigation']",popover:{title:"Week Navigation",description:"Navigate between different weeks to view your time tracking data. Click the arrows to move forward or backward in time.",side:"bottom",align:"center"}},{element:"[data-tour='quick-stats']",popover:{title:"Quick Stats Overview",description:"Get a quick overview of your key metrics for the selected week, including total hours, active projects, and productivity insights.",side:"bottom",align:"center"}},{element:"[data-tour='timesheet-tab']",popover:{title:"Weekly Timesheet View",description:"This is your main timesheet view showing all projects and hours for the week. Use this to track time across different projects and days.",side:"top",align:"start"}},{element:"[data-tour='daily-details-tab']",popover:{title:"Daily Details View",description:"Switch to this tab to see a detailed breakdown of your activities by day, including individual sessions, files worked on, and websites visited.",side:"top",align:"start"}},{element:"[data-tour='settings-tab']",popover:{title:"Settings & Configuration",description:"Manage your projects here: hide/show projects, set custom names, assign clients, and configure project URLs. This is where you customize your tracking experience.",side:"top",align:"start"}},{element:"body",popover:{title:"You're All Set!",description:"That's it! You now know the main features of the Time Tracker. Start tracking your time and manage your projects efficiently. You can restart this tour anytime from the help button in the header.",side:"top",align:"center"}}],s=(0,e9.B)({showProgress:!0,steps:e,onDestroyStarted:()=>{s.getActiveIndex()!==e.length-1&&s.hasNextStep()?a():t(),s.destroy()},popoverClass:"driverjs-theme",progressText:"{{current}} of {{total}}",nextBtnText:"Next",prevBtnText:"Previous",doneBtnText:"Finish"});return r.current=s,s.drive(),()=>{r.current&&r.current.destroy()}},[t,a]),null}a(2516);let tt=0,ta=new Map,tr=e=>{if(ta.has(e))return;let t=setTimeout(()=>{ta.delete(e),ti({type:"REMOVE_TOAST",toastId:e})},1e6);ta.set(e,t)},ts=[],tn={toasts:[]};function ti(e){tn=((e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:a}=t;return a?tr(a):e.toasts.forEach(e=>{tr(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===a||void 0===a?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}})(tn,e),ts.forEach(e=>{e(tn)})}function tl(e){let{...t}=e,a=(tt=(tt+1)%Number.MAX_SAFE_INTEGER).toString(),r=()=>ti({type:"DISMISS_TOAST",toastId:a});return ti({type:"ADD_TOAST",toast:{...t,id:a,open:!0,onOpenChange:e=>{e||r()}}}),{id:a,dismiss:r,update:e=>ti({type:"UPDATE_TOAST",toast:{...e,id:a}})}}class to{setBearerToken(e){this.bearerToken=e}async request(e){if(!this.bearerToken)throw Error("Wrike bearer token not configured");let t=this.useProxy?"".concat(this.baseUrl).concat(e):"https://www.wrike.com/api/v4".concat(e),a={"Content-Type":"application/json"};this.useProxy?a["X-Wrike-Token"]=this.bearerToken:a.Authorization="Bearer ".concat(this.bearerToken);let r=await fetch(t,{method:"GET",headers:a});if(!r.ok){let e="Wrike API error: ".concat(r.status," ").concat(r.statusText);try{let t=await r.text();if(t){let a=JSON.parse(t);a.errorDescription?e=a.errorDescription:a.error&&(e=a.error)}}catch(e){}throw 401===r.status?e="Invalid Wrike bearer token. Please check that your token is correct and hasn't expired.":404===r.status&&(e="Wrike API endpoint not found. The backend proxy may not be running."),Error(e)}return r.json()}async getProjects(){try{return(await this.request("/folders?project=true")).data.filter(e=>e.project).map(e=>{var t;return{id:e.id,title:e.title,permalink:e.permalink,customStatusId:null==(t=e.project)?void 0:t.customStatusId}})}catch(e){throw console.error("Failed to fetch Wrike projects:",e),e}}async getProjectById(e){try{let t=(await this.request("/folders/".concat(e))).data[0];if(!t||!t.project)return null;return{id:t.id,title:t.title,permalink:t.permalink,customStatusId:t.project.customStatusId}}catch(t){return console.error("Failed to fetch Wrike project ".concat(e,":"),t),null}}async testConnection(){try{return await this.request("/contacts?me=true"),!0}catch(e){return console.error("Wrike connection test failed:",e),!1}}constructor(e,t=!0){this.bearerToken=null,this.useProxy=t,this.baseUrl="/api/wrike",e&&(this.bearerToken=e)}}let tc=null,td=()=>{let e={},t=["Dashboard Redesign","API Integration","Mobile App","Documentation","Bug Fixes"],a=new Date,r=["src/components/dashboard.tsx","src/hooks/use-time-tracking-data.ts","src/pages/api/stats.ts","src/components/header.tsx","src/utils/date-utils.ts","src/components/project-detail-view.tsx","src/hooks/use-time-calculations.ts","package.json","README.md","src/styles/globals.css"],s=["https://github.com/company/project","https://stackoverflow.com/questions/react-hooks","https://docs.nextjs.org/api-reference","https://tailwindcss.com/docs","https://localhost:3000/dashboard"];for(let n=0;n<14;n++){let i=new Date(a);i.setDate(i.getDate()-n);let l=ew(i);e[l]={};let o=Math.floor(3*Math.random())+1;t.slice(0,o).forEach(t=>{let a=[],n=Math.floor(4*Math.random())+1;for(let e=0;e<n;e++){let e=9+Math.floor(8*Math.random()),t=Math.floor(120*Math.random())+30,n=new Date(i);n.setHours(e,Math.floor(60*Math.random()));let l=new Date(n.getTime()+6e4*t),o=Math.random()>.3?"coding":"browsing",c={start:n.toISOString(),end:l.toISOString(),type:o};if("coding"===o)c.file=r[Math.floor(Math.random()*r.length)];else{let e=s[Math.floor(Math.random()*s.length)];c.url=e,c.host=new URL(e).hostname}a.push(c)}let o=a.reduce((e,t)=>e+(new Date(t.end).getTime()-new Date(t.start).getTime())/1e3,0);e[l][t]={duration:o,sessions:a}})}return e},tm=()=>[{id:"1",project:"Dashboard Redesign",url:"https://github.com/company/dashboard-redesign",description:"Main repository for dashboard redesign project"},{id:"2",project:"Dashboard Redesign",url:"https://figma.com/dashboard-mockups",description:"Design mockups and wireframes"},{id:"3",project:"API Integration",url:"https://api-docs.company.com",description:"API documentation and endpoints"},{id:"4",project:"API Integration",url:"https://github.com/company/api-integration",description:"Integration code repository"},{id:"5",project:"Mobile App",url:"https://github.com/company/mobile-app",description:"React Native mobile application"},{id:"6",project:"Documentation",url:"https://docs.company.com",description:"Project documentation site"}],tu=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],[a,r]=(0,s.useState)({}),[n,i]=(0,s.useState)({}),[l,o]=(0,s.useState)([]),[c,d]=(0,s.useState)([]),[m,u]=(0,s.useState)([]),[h,x]=(0,s.useState)([]),[g,p]=(0,s.useState)([]),[f,j]=(0,s.useState)([]),[y,v]=(0,s.useState)([]),[N,b]=(0,s.useState)(!1),[w,k]=(0,s.useState)(!1),[S,T]=(0,s.useState)(null),[C,A]=(0,s.useState)(10),[D,E]=(0,s.useState)(!1),[P,I]=(0,s.useState)("cloud"),O=window.location.hostname.includes("v0.dev")||window.location.hostname.includes("vusercontent.net")||t;(0,s.useEffect)(()=>{i(((e,t)=>{if(0===t.length)return e;let a={};return Object.entries(e).forEach(e=>{let[r,s]=e,n={};Object.entries(s).forEach(e=>{let[a,r]=e;t.includes(a)||(n[a]=r)}),Object.keys(n).length>0&&(a[r]=n)}),a})(a,c.map(e=>e.projectName)))},[a,c]);let R=async()=>{if(!e){r({}),i({}),k(!1);return}try{if(k(!0),T(null),O)return void setTimeout(()=>{let e=td();r(e),k(!1)},1e3);let e=new AbortController,t=setTimeout(()=>e.abort(),5e3);try{let a=await fetch("".concat("","/api/stats"),{signal:e.signal});if(clearTimeout(t),!a.ok)throw Error("HTTP error! status: ".concat(a.status));let s=await a.json(),n=(e=>{let t={};return Object.entries(e).forEach(e=>{let[a,r]=e,s=a;if(a.includes("T")&&(s=a.split("T")[0]),!/^\d{4}-\d{2}-\d{2}$/.test(s))return void console.warn("Invalid date format received from API: ".concat(a));t[s]=r}),t})(s);r(n)}catch(a){clearTimeout(t),console.warn("API not available, using fake data:",a);let e=td();r(e)}}catch(e){console.warn("Error in fetchStats, using fake data:",e),r(td())}finally{k(!1)}},L=async()=>{if(!e)return void o([]);try{if(T(null),O)return void o(tm());let e=new AbortController,t=setTimeout(()=>e.abort(),5e3);try{let a=await fetch("".concat("","/api/urls"),{signal:e.signal});if(clearTimeout(t),!a.ok)throw Error("HTTP error! status: ".concat(a.status));let r=await a.json();o(r)}catch(e){clearTimeout(t),console.warn("API not available for URLs, using fake data:",e),o(tm())}}catch(e){console.warn("Error fetching project URLs, using fake data:",e),o(tm())}},U=async()=>{if(!e)return void A(10);try{if(E(!0),O){let e=localStorage.getItem("idle-timeout-minutes");e&&A(Number(e));let t=localStorage.getItem("storage-type");t&&I(t),E(!1);return}let e=new AbortController,t=setTimeout(()=>e.abort(),5e3);try{let a=await fetch("".concat("","/api/settings"),{signal:e.signal});if(clearTimeout(t),!a.ok)throw Error("HTTP error! status: ".concat(a.status));let r=await a.json();A(r.idleTimeoutMinutes||10),I(r.storageType||"cloud")}catch(a){clearTimeout(t),console.warn("Settings API not available, using localStorage:",a);let e=localStorage.getItem("idle-timeout-minutes");e&&A(Number(e))}}catch(e){console.warn("Error fetching settings, using default:",e)}finally{E(!1)}},F=async t=>{if(e)try{if(E(!0),O){localStorage.setItem("idle-timeout-minutes",t.toString()),A(t),E(!1);return}let e=new AbortController,a=setTimeout(()=>e.abort(),5e3);try{let r=await fetch("".concat("","/api/settings"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({idleTimeoutMinutes:t}),signal:e.signal});if(clearTimeout(a),!r.ok)throw Error("HTTP error! status: ".concat(r.status));A(t),tl({title:"Settings Saved",description:"Idle timeout updated to ".concat(t," minutes")})}catch(e){clearTimeout(a),console.warn("Settings API not available, saving to localStorage:",e),localStorage.setItem("idle-timeout-minutes",t.toString()),A(t),tl({title:"Settings Saved Locally",description:"Idle timeout updated to ".concat(t," minutes (saved locally)")})}}catch(e){console.error("Error saving settings:",e),tl({title:"Error",description:"Failed to save idle timeout setting",variant:"destructive"})}finally{E(!1)}},M=async t=>{if(e)try{if(E(!0),O){localStorage.setItem("storage-type",t),I(t),E(!1);return}let e=new AbortController,a=setTimeout(()=>e.abort(),5e3);try{let r=await fetch("".concat("","/api/settings"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({idleTimeoutMinutes:C,storageType:t}),signal:e.signal});if(clearTimeout(a),!r.ok)throw Error("HTTP error! status: ".concat(r.status));I(t),tl({title:"Settings Saved",description:"Storage preference updated to ".concat(t)})}catch(e){clearTimeout(a),localStorage.setItem("storage-type",t),I(t),tl({title:"Settings Saved Locally",description:"Storage preference updated to ".concat(t," (saved locally)")})}}catch(e){console.error("Error saving storage type:",e),tl({title:"Error",description:"Failed to save storage preference",variant:"destructive"})}finally{E(!1)}},z=async t=>{if(e)try{if(O){let e={id:Date.now().toString(),project:t.project,url:t.url,description:t.description};o(t=>[...t,e]),tl({title:"Success",description:"Project URL has been created (preview mode)"});return}let e=await fetch("".concat("","/api/urls"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!e.ok)throw Error("HTTP error! status: ".concat(e.status));await L(),tl({title:"Success",description:"Project URL has been created"})}catch(e){tl({title:"Error",description:e instanceof Error?e.message:"Failed to create project URL",variant:"destructive"})}},W=async(t,a)=>{if(e)try{if(O){o(e=>e.map(e=>e.id===t?{...e,project:a.project,url:a.url,description:a.description}:e)),tl({title:"Success",description:"Project URL has been updated (preview mode)"});return}let e=await fetch("".concat("","/api/urls/").concat(t),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!e.ok)throw Error("HTTP error! status: ".concat(e.status));await L(),tl({title:"Success",description:"Project URL has been updated"})}catch(e){tl({title:"Error",description:e instanceof Error?e.message:"Failed to update project URL",variant:"destructive"})}},H=async t=>{if(e)try{if(O){o(e=>e.filter(e=>e.id!==t)),tl({title:"Success",description:"Project URL has been deleted (preview mode)"});return}let e=await fetch("".concat("","/api/urls/").concat(t),{method:"DELETE"});if(!e.ok)throw Error("HTTP error! status: ".concat(e.status));await L(),tl({title:"Success",description:"Project URL has been deleted"})}catch(e){tl({title:"Error",description:e instanceof Error?e.message:"Failed to delete project URL",variant:"destructive"})}},J=async()=>{if(!e)return void d([]);try{if(O){let e=localStorage.getItem("ignored-projects");e&&d(JSON.parse(e));return}let e=new AbortController,t=setTimeout(()=>e.abort(),5e3);try{let a=await fetch("".concat("","/api/ignored-projects"),{signal:e.signal});if(clearTimeout(t),!a.ok)throw Error("HTTP error! status: ".concat(a.status));let r=await a.json();d(r)}catch(a){clearTimeout(t),console.warn("Ignored projects API not available, using localStorage:",a);let e=localStorage.getItem("ignored-projects");e&&d(JSON.parse(e))}}catch(e){console.warn("Error fetching ignored projects:",e)}},V=async()=>{if(!e)return void u([]);try{if(O){let e=localStorage.getItem("project-custom-names");e&&u(JSON.parse(e));return}let e=new AbortController,t=setTimeout(()=>e.abort(),5e3);try{let a=await fetch("".concat("","/api/project-names"),{signal:e.signal});if(clearTimeout(t),!a.ok)throw Error("HTTP error! status: ".concat(a.status));let r=await a.json();u(r)}catch(a){clearTimeout(t),console.warn("Project custom names API not available, using localStorage:",a);let e=localStorage.getItem("project-custom-names");e&&u(JSON.parse(e))}}catch(e){console.warn("Error fetching project custom names:",e)}},_=async t=>{if(e)try{let e={id:Date.now().toString(),projectName:t,ignoredAt:new Date().toISOString()};if(O){let a=[...c,e];d(a),localStorage.setItem("ignored-projects",JSON.stringify(a)),tl({title:"Success",description:'"'.concat(t,'" has been ignored and will be excluded from all calculations')});return}let a=await fetch("".concat("","/api/ignored-projects"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({projectName:t})});if(!a.ok)throw Error("HTTP error! status: ".concat(a.status));await J(),tl({title:"Success",description:'"'.concat(t,'" has been ignored and will be excluded from all calculations')})}catch(e){tl({title:"Error",description:e instanceof Error?e.message:"Failed to ignore project",variant:"destructive"})}},B=async t=>{if(e)try{let e=c.find(e=>e.id===t),a=(null==e?void 0:e.projectName)||"Project";if(O){let e=c.filter(e=>e.id!==t);d(e),localStorage.setItem("ignored-projects",JSON.stringify(e)),tl({title:"Success",description:'"'.concat(a,'" has been unignored and will be included in calculations')});return}let r=await fetch("".concat("","/api/ignored-projects/").concat(t),{method:"DELETE"});if(!r.ok)throw Error("HTTP error! status: ".concat(r.status));await J(),tl({title:"Success",description:'"'.concat(a,'" has been unignored and will be included in calculations')})}catch(e){tl({title:"Error",description:e instanceof Error?e.message:"Failed to unignore project",variant:"destructive"})}},q=async(t,a)=>{if(e)try{let e=m.find(e=>e.projectName===t);if(O){let r;if(e)r=m.map(e=>e.projectName===t?{...e,customName:a,updatedAt:new Date().toISOString()}:e);else{let e={id:Date.now().toString(),projectName:t,customName:a,updatedAt:new Date().toISOString()};r=[...m,e]}u(r),localStorage.setItem("project-names",JSON.stringify(r)),tl({title:"Success",description:'Custom name for "'.concat(t,'" has been saved')});return}let r=e?"PUT":"POST",s=e?"".concat("","/api/project-names/").concat(e.id):"".concat("","/api/project-names"),n=await fetch(s,{method:r,headers:{"Content-Type":"application/json"},body:JSON.stringify({projectName:t,customName:a})});if(!n.ok)throw Error("HTTP error! status: ".concat(n.status));await V(),tl({title:"Success",description:'Custom name for "'.concat(t,'" has been saved')})}catch(e){tl({title:"Error",description:e instanceof Error?e.message:"Failed to save custom name",variant:"destructive"})}},Y=async t=>{if(e)try{let e=m.find(e=>e.id===t),a=(null==e?void 0:e.projectName)||"Project";if(O){let e=m.filter(e=>e.id!==t);u(e),localStorage.setItem("project-custom-names",JSON.stringify(e)),tl({title:"Success",description:'Custom name for "'.concat(a,'" has been removed')});return}let r=await fetch("".concat("","/api/project-names/").concat(t),{method:"DELETE"});if(!r.ok)throw Error("HTTP error! status: ".concat(r.status));await V(),tl({title:"Success",description:'Custom name for "'.concat(a,'" has been removed')})}catch(e){tl({title:"Error",description:e instanceof Error?e.message:"Failed to remove custom name",variant:"destructive"})}},K=async()=>{if(!e)return void x([]);try{if(O){let e=localStorage.getItem("project-clients");e&&x(JSON.parse(e));return}let e=new AbortController,t=setTimeout(()=>e.abort(),5e3);try{let a=await fetch("".concat("","/api/project-clients"),{signal:e.signal});if(clearTimeout(t),!a.ok)throw Error("HTTP error! status: ".concat(a.status));let r=await a.json();x(r)}catch(a){clearTimeout(t),console.warn("Project clients API not available, using localStorage:",a);let e=localStorage.getItem("project-clients");e&&x(JSON.parse(e))}}catch(e){console.warn("Error fetching project clients:",e)}},X=async(t,a)=>{if(e)try{let e=h.find(e=>e.projectName===t);if(O){let r;if(e)r=h.map(e=>e.projectName===t?{...e,clientName:a,updatedAt:new Date().toISOString()}:e);else{let e={id:Date.now().toString(),projectName:t,clientName:a,updatedAt:new Date().toISOString()};r=[...h,e]}x(r),localStorage.setItem("project-clients",JSON.stringify(r)),tl({title:"Success",description:'Client for "'.concat(t,'" has been saved')});return}let r=e?"PUT":"POST",s=e?"".concat("","/api/project-clients/").concat(e.id):"".concat("","/api/project-clients"),n=await fetch(s,{method:r,headers:{"Content-Type":"application/json"},body:JSON.stringify({projectName:t,clientName:a})});if(!n.ok)throw Error("HTTP error! status: ".concat(n.status));await K(),tl({title:"Success",description:'Client for "'.concat(t,'" has been saved')})}catch(e){tl({title:"Error",description:e instanceof Error?e.message:"Failed to save client",variant:"destructive"})}},G=async t=>{if(e)try{let e=h.find(e=>e.id===t),a=(null==e?void 0:e.projectName)||"Project";if(O){let e=h.filter(e=>e.id!==t);x(e),localStorage.setItem("project-clients",JSON.stringify(e)),tl({title:"Success",description:'Client for "'.concat(a,'" has been removed')});return}let r=await fetch("".concat("","/api/project-clients/").concat(t),{method:"DELETE"});if(!r.ok)throw Error("HTTP error! status: ".concat(r.status));await K(),tl({title:"Success",description:'Client for "'.concat(a,'" has been removed')})}catch(e){tl({title:"Error",description:e instanceof Error?e.message:"Failed to remove client",variant:"destructive"})}},Z=async()=>{if(!e)return void p([]);try{if(O){let e=localStorage.getItem("commits");e&&p(JSON.parse(e));return}let e=new AbortController,t=setTimeout(()=>e.abort(),5e3);try{let a=await fetch("".concat("","/api/commits"),{signal:e.signal});if(clearTimeout(t),!a.ok)throw Error("HTTP error! status: ".concat(a.status));let r=await a.json();p(r)}catch(a){clearTimeout(t),console.warn("Commits API not available, using localStorage:",a);let e=localStorage.getItem("commits");e&&p(JSON.parse(e))}}catch(e){console.warn("Error fetching commits:",e)}},Q=async t=>{if(!e||!t)return void j([]);try{b(!0),T(null);let e=(tc?t&&tc.setBearerToken(t):tc=new to(t),tc),a=await e.getProjects();j(a)}catch(e){console.error("Error fetching Wrike projects:",e),j([]),tl({title:"Error",description:e instanceof Error?e.message:"Failed to fetch Wrike projects",variant:"destructive"})}finally{b(!1)}},$=async()=>{if(!e)return void v([]);try{if(O){let e=localStorage.getItem("wrike-project-mappings");e&&v(JSON.parse(e));return}let e=new AbortController,t=setTimeout(()=>e.abort(),5e3);try{let a=await fetch("".concat("","/api/wrike-mappings"),{signal:e.signal});if(clearTimeout(t),!a.ok)throw Error("HTTP error! status: ".concat(a.status));let r=await a.json();v(r)}catch(a){clearTimeout(t),console.warn("Wrike mappings API not available, using localStorage:",a);let e=localStorage.getItem("wrike-project-mappings");e&&v(JSON.parse(e))}}catch(e){console.warn("Error fetching Wrike project mappings:",e)}},ee=async(t,a)=>{if(e)try{let e=y.find(e=>e.projectName===t),r={id:(null==e?void 0:e.id)||Date.now().toString(),projectName:t,wrikeProjectId:a.id,wrikeProjectTitle:a.title,wrikePermalink:a.permalink,createdAt:(null==e?void 0:e.createdAt)||new Date().toISOString()};if(O){let s;s=e?y.map(e=>e.projectName===t?r:e):[...y,r],v(s),localStorage.setItem("wrike-project-mappings",JSON.stringify(s)),tl({title:"Success",description:'"'.concat(t,'" has been linked to Wrike project "').concat(a.title,'"')});return}let s=e?"PUT":"POST",n=e?"".concat("","/api/wrike-mappings/").concat(e.id):"".concat("","/api/wrike-mappings"),i=await fetch(n,{method:s,headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!i.ok)throw Error("HTTP error! status: ".concat(i.status));await $(),tl({title:"Success",description:'"'.concat(t,'" has been linked to Wrike project "').concat(a.title,'"')})}catch(e){tl({title:"Error",description:e instanceof Error?e.message:"Failed to save Wrike project mapping",variant:"destructive"})}},et=async t=>{if(e)try{let e=y.find(e=>e.projectName===t);if(!e)return;if(O){let e=y.filter(e=>e.projectName!==t);v(e),localStorage.setItem("wrike-project-mappings",JSON.stringify(e)),tl({title:"Success",description:'Wrike link for "'.concat(t,'" has been removed')});return}let a=await fetch("".concat("","/api/wrike-mappings/").concat(e.id),{method:"DELETE"});if(!a.ok)throw Error("HTTP error! status: ".concat(a.status));await $(),tl({title:"Success",description:'Wrike link for "'.concat(t,'" has been removed')})}catch(e){tl({title:"Error",description:e instanceof Error?e.message:"Failed to remove Wrike project mapping",variant:"destructive"})}};return(0,s.useEffect)(()=>{e&&(R(),L(),U(),J(),V(),K(),Z(),$())},[e]),{statsData:n,projectUrls:l,ignoredProjects:c,projectCustomNames:m,projectClients:h,commits:g,wrikeProjects:f,wrikeProjectMappings:y,wrikeProjectsLoading:N,loading:w,error:S,idleTimeoutMinutes:C,setIdleTimeoutMinutes:F,settingsLoading:D,fetchStats:R,fetchProjectUrls:L,fetchSettings:U,fetchIgnoredProjects:J,fetchProjectCustomNames:V,fetchProjectClients:K,fetchCommits:Z,fetchWrikeProjects:Q,fetchWrikeProjectMappings:$,saveWrikeProjectMapping:ee,removeWrikeProjectMapping:et,createProjectUrl:z,updateProjectUrl:W,deleteProjectUrl:H,addIgnoredProject:_,removeIgnoredProject:B,storageType:P,setStorageType:M,saveProjectCustomName:q,removeProjectCustomName:Y,saveProjectClient:X,removeProjectClient:G}},th="mxo-time-tracker-onboarding-completed",tx=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],[t,a]=(0,s.useState)(!0),[r,n]=(0,s.useState)(!0);return(0,s.useEffect)(()=>{(()=>{if(!e){a(!0),n(!1);return}try{n(!0);let e=localStorage.getItem(th);a("true"===e)}catch(e){console.warn("Error fetching onboarding status:",e),a(!1)}finally{n(!1)}})()},[e]),{hasCompletedOnboarding:t,isLoading:r,markOnboardingComplete:()=>{if(e)try{localStorage.setItem(th,"true"),a(!0)}catch(e){console.error("Error marking onboarding complete:",e)}},resetOnboarding:()=>{if(e)try{localStorage.setItem(th,"false"),a(!1)}catch(e){console.error("Error resetting onboarding:",e)}}}};function tg(){let e=(0,n.useRouter)(),t=(0,n.useSearchParams)(),{isLicenseValid:a,isInitializing:i,validateLicense:l,logout:o,getLicenseInfo:c}=K(),u=c(),{hasCompletedOnboarding:h,isLoading:x,markOnboardingComplete:g,resetOnboarding:p}=tx(a),[f,j]=(0,s.useState)(!1),y=t.get("tab")||"timesheet",v=t.get("week"),[N,b]=(0,s.useState)(()=>{if(v){let e=new Date(v);if(!isNaN(e.getTime()))return e}return new Date}),w=(0,s.useRef)(!1),{statsData:k,projectUrls:S,ignoredProjects:T,projectCustomNames:C,projectClients:A,commits:D,wrikeProjects:E,wrikeProjectsLoading:P,loading:I,error:O,idleTimeoutMinutes:R,setIdleTimeoutMinutes:L,storageType:U,setStorageType:F,settingsLoading:M,fetchStats:z,fetchProjectUrls:W,fetchWrikeProjects:H,createProjectUrl:J,updateProjectUrl:V,deleteProjectUrl:_,addIgnoredProject:B,removeIgnoredProject:q,saveProjectCustomName:Y,removeProjectCustomName:X,saveProjectClient:Q,removeProjectClient:$}=tu(a,(null==u?void 0:u.isDemo)||!1);(0,s.useEffect)(()=>{if(v&&!w.current){let e=new Date(v);isNaN(e.getTime())||v!==N.toISOString().split("T")[0]&&b(e)}},[v,N]);let ee=a=>{w.current=!0;let r=new URLSearchParams(t.toString());a.tab&&r.set("tab",a.tab),a.week&&r.set("week",a.week);let s="".concat(window.location.pathname,"?").concat(r.toString());e.push(s,{scroll:!1}),setTimeout(()=>{w.current=!1},100)};return((0,s.useEffect)(()=>{x||h||I||!a||j(!0)},[x,h,I,a]),i)?(0,r.jsx)(Z,{}):a?I?(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 p-6 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)(m.A,{className:"w-8 h-8 animate-spin mx-auto mb-4 text-teal-600 dark:text-teal-400"}),(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading time tracking data..."})]})}):O?(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 p-6 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsxs)("p",{className:"text-red-600 dark:text-red-400 mb-4",children:["Error: ",O]}),(0,r.jsxs)(d,{onClick:z,children:[(0,r.jsx)(m.A,{className:"w-4 h-4 mr-2"}),"Retry"]})]})}):(0,r.jsx)("div",{className:"min-h-screen bg-stone-50 dark:bg-gray-900 p-6",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto space-y-6",children:[(0,r.jsx)(ed,{idleTimeoutMinutes:R,onIdleTimeoutChange:L,storageType:U,onStorageTypeChange:F,onRefresh:z,onLogout:o,onRestartTour:()=>{p(),j(!0)},settingsLoading:M}),(0,r.jsx)(em,{currentWeek:N,onNavigateWeek:e=>{let t;"current"===e?t=new Date:(t=new Date(N)).setDate(t.getDate()+("next"===e?7:-7)),b(t),ee({week:t.toISOString().split("T")[0]})}}),(0,r.jsx)(e7,{statsData:k,ignoredProjects:T,projectCustomNames:C,projectClients:A,projectUrls:S,commits:D,wrikeProjects:E,wrikeProjectsLoading:P,wrikeProjectMappings:[],currentWeek:N,idleTimeoutMinutes:R,onIdleTimeoutChange:L,onAddIgnoredProject:B,onRemoveIgnoredProject:q,onSaveProjectCustomName:Y,onRemoveProjectCustomName:X,onSaveProjectClient:Q,onRemoveProjectClient:$,onCreateUrl:J,onUpdateUrl:V,onDeleteUrl:_,onFetchWrikeProjects:H,onSaveWrikeMapping:()=>Promise.resolve(),activeTab:y,onTabChange:e=>{ee({tab:e})}}),f&&(0,r.jsx)(te,{onComplete:()=>{g(),j(!1)},onSkip:()=>{g(),j(!1)}})]})}):(0,r.jsx)(G,{onValidate:l})}a(7645)}},e=>{e.O(0,[852,817,450,441,255,358],()=>e(e.s=8871)),_N_E=e.O()}]);