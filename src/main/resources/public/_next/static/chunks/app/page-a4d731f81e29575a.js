(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{762:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>tm});var a=s(5155),r=s(2115),n=s(63),i=s(2467),l=s(3101),o=s(5016);let c=(0,l.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=r.forwardRef((e,t)=>{let{className:s,variant:r,size:n,asChild:l=!1,...d}=e,m=l?i.DX:"button";return(0,a.jsx)(m,{className:(0,o.cn)(c({variant:r,size:n,className:s})),ref:t,...d})});d.displayName="Button";var m=s(9559);let u=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,o.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...r})});u.displayName="Card";let h=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,o.cn)("flex flex-col space-y-1.5 p-6",s),...r})});h.displayName="CardHeader";let x=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,o.cn)("text-2xl font-semibold leading-none tracking-tight",s),...r})});x.displayName="CardTitle";let p=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,o.cn)("text-sm text-muted-foreground",s),...r})});p.displayName="CardDescription";let g=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,o.cn)("p-6 pt-0",s),...r})});g.displayName="CardContent",r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,o.cn)("flex items-center p-6 pt-0",s),...r})}).displayName="CardFooter";let f=r.forwardRef((e,t)=>{let{className:s,type:r,...n}=e;return(0,a.jsx)("input",{type:r,className:(0,o.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:t,...n})});f.displayName="Input";var j=s(489);let y=(0,l.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),v=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(j.b,{ref:t,className:(0,o.cn)(y(),s),...r})});v.displayName=j.b.displayName;let N=(0,l.F)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),w=r.forwardRef((e,t)=>{let{className:s,variant:r,...n}=e;return(0,a.jsx)("div",{ref:t,role:"alert",className:(0,o.cn)(N({variant:r}),s),...n})});w.displayName="Alert",r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("h5",{ref:t,className:(0,o.cn)("mb-1 font-medium leading-none tracking-tight",s),...r})}).displayName="AlertTitle";let b=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,o.cn)("text-sm [&_p]:leading-relaxed",s),...r})});b.displayName="AlertDescription";let k=(0,l.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function S(e){let{className:t,variant:s,...r}=e;return(0,a.jsx)("div",{className:(0,o.cn)(k({variant:s}),t),...r})}var T=s(9511),C=s(5229);let A=T.bL;T.l9;let D=T.ZL;T.bm;let E=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(T.hJ,{ref:t,className:(0,o.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...r})});E.displayName=T.hJ.displayName;let P=r.forwardRef((e,t)=>{let{className:s,children:r,...n}=e;return(0,a.jsxs)(D,{children:[(0,a.jsx)(E,{}),(0,a.jsxs)(T.UC,{ref:t,className:(0,o.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...n,children:[r,(0,a.jsxs)(T.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,a.jsx)(C.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});P.displayName=T.UC.displayName;let I=e=>{let{className:t,...s}=e;return(0,a.jsx)("div",{className:(0,o.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...s})};I.displayName="DialogHeader";let O=e=>{let{className:t,...s}=e;return(0,a.jsx)("div",{className:(0,o.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...s})};O.displayName="DialogFooter";let R=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(T.hE,{ref:t,className:(0,o.cn)("text-lg font-semibold leading-none tracking-tight",s),...r})});R.displayName=T.hE.displayName;let L=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(T.VY,{ref:t,className:(0,o.cn)("text-sm text-muted-foreground",s),...r})});L.displayName=T.VY.displayName;var U=s(9708),F=s(523),M=s(2529),z=s(3327),W=s(6983),H=s(7910),J=s(5370),V=s(6132),_=s(5299),B=s(9068),q=s(5426);let Y="mxo-time-tracker-license",K=()=>{let[e,t]=(0,r.useState)(!1),[s,a]=(0,r.useState)(null),[n,i]=(0,r.useState)(!0);(0,r.useEffect)(()=>{(async()=>{let e=localStorage.getItem(Y);if(e){let s=localStorage.getItem("".concat(Y,"-last-checked")),r=new Date().getTime();if(s&&r-Number.parseInt(s)<864e5){t(!0),a(e),i(!1);return}await l(e)?(t(!0),a(e),localStorage.setItem("".concat(Y,"-last-checked"),r.toString())):(localStorage.removeItem(Y),localStorage.removeItem("".concat(Y,"-last-checked")))}i(!1)})()},[]);let l=async e=>{try{let t=await fetch("".concat("","/api/license"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({license_key:e.trim()})});if(!t.ok)return console.error("License validation API error:",t.status,t.statusText),!1;let s=await t.json();return!0===s.valid||"valid"===s.status}catch(t){return console.error("License validation error:",t),["MXO-DEV-2025"].includes(e.trim().toUpperCase())}},o=async()=>{try{if(s){let e=await fetch("".concat("","/api/license/logout"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({license_key:s.trim()})});e.ok||console.warn("Logout API error:",e.status,e.statusText)}}catch(e){console.error("Logout API error:",e)}finally{localStorage.removeItem(Y),localStorage.removeItem("".concat(Y,"-last-checked")),t(!1),a(null)}};return{isLicenseValid:e,validatedLicense:s,isInitializing:n,validateLicense:async e=>{let s=await l(e);if(!s)return console.warn("Invalid license key:",e),!1;if(s){let s=e.trim();return localStorage.setItem(Y,s),t(!0),a(s),!0}return!1},logout:o,getLicenseInfo:()=>{if(!s)return null;let e=["MXO-DEV-2025","@38R8UyyB8F6VR7","MXO"].map(e=>e.toUpperCase()).includes(s.toUpperCase());return{key:s,type:e?"Demo":"Licensed",isDemo:e}},checkBackendAvailability:async()=>{try{return(await fetch("".concat("","/api/stats"),{method:"GET",signal:AbortSignal.timeout(3e3)})).ok}catch(e){return console.error("Backend health check failed:",e),!1}}}},X=["MXO-DEV-2025"];function G(e){let{onValidate:t}=e,{checkBackendAvailability:s}=K(),[n,i]=(0,r.useState)(""),[l,o]=(0,r.useState)(""),[c,m]=(0,r.useState)(!1),[j,y]=(0,r.useState)(!1),[N,k]=(0,r.useState)(!1);(0,r.useEffect)(()=>{{let e=localStorage.getItem("privacy-acknowledged");k("true"===e),"true"!==e&&y(!0)}},[]),(0,r.useEffect)(()=>{{let e=new URLSearchParams(window.location.search),t=e.get("license")||e.get("licensekey");if(t){i(t),o("");let e=window.location.pathname;window.history.replaceState({},document.title,e),T(t)}}},[]);let T=async e=>{m(!0);try{await t(e.trim())||(await s()?o("The license key from login portal is invalid. Please try again."):o("Please open a PhpStorm project with the Time Tracker plugin to access the dashboard."))}catch(e){o("Failed to validate license from login portal. Please check your connection.")}finally{m(!1)}},C=window.location.hostname.includes("v0.dev")||window.location.hostname.includes("vusercontent.net")||!1;console.log(window.location);let D=async e=>{e.preventDefault(),o(""),m(!0);try{await t(n.trim())||(await s()?o("Invalid license key. Please check your key and try again."):o("Please open a PhpStorm project with the Time Tracker plugin to access the dashboard."))}catch(e){o("Failed to validate license. Please check your connection and try again.")}finally{m(!1)}};return(0,a.jsxs)("div",{className:"min-h-screen bg-stone-50 flex items-center justify-center p-6",children:[(0,a.jsx)(A,{open:j,onOpenChange:y,children:(0,a.jsxs)(P,{className:"max-w-2xl",children:[(0,a.jsxs)(I,{children:[(0,a.jsxs)(R,{className:"flex items-center gap-2 text-xl",children:[(0,a.jsx)(U.A,{className:"h-6 w-6 text-teal-600"}),"Privacy & Data Storage"]}),(0,a.jsx)(L,{children:"Understanding how your data is stored and protected"})]}),(0,a.jsxs)("div",{className:"space-y-4 py-4",children:[(0,a.jsxs)(w,{className:"border-teal-200 bg-teal-50",children:[(0,a.jsx)(F.A,{className:"h-4 w-4 text-teal-600"}),(0,a.jsxs)(b,{className:"text-teal-800",children:[(0,a.jsx)("strong",{children:"All data stays on your computer."})," Your time tracking data is stored locally and never uploaded to any server."]})]}),(0,a.jsxs)("div",{className:"space-y-3 text-sm",children:[(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)(M.A,{className:"h-5 w-5 text-green-600 shrink-0 mt-0.5"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:"Local Storage Only"}),(0,a.jsx)("p",{className:"text-gray-600",children:"All time tracking data is stored in your browser's local storage on your computer. No data is sent to external servers."})]})]}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)(M.A,{className:"h-5 w-5 text-green-600 shrink-0 mt-0.5"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:"No Cloud Synchronization"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Your data remains private and is not synchronized or backed up to any cloud service."})]})]}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)(M.A,{className:"h-5 w-5 text-green-600 shrink-0 mt-0.5"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:"License Validation Only"}),(0,a.jsx)("p",{className:"text-gray-600",children:"The only external connection is for license validation. Your usage data and project information are never shared."})]})]}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)(z.A,{className:"h-5 w-5 text-blue-600 shrink-0 mt-0.5"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:"Your Responsibility"}),(0,a.jsx)("p",{className:"text-gray-600 mb-2",children:"Since data is stored locally, you are responsible for backing up your data if needed."}),(0,a.jsxs)("p",{className:"text-gray-600 text-xs font-mono bg-gray-100 p-2 rounded border break-all",children:["Database location: ",(()=>{let e=window.navigator.userAgent.toLowerCase(),t=e.includes("win"),s=e.includes("mac");return t?"%USERPROFILE%\\.cache\\phpstorm-time-tracker\\data.db":"~/.cache/phpstorm-time-tracker/data.db"})()]})]})]})]})]}),(0,a.jsx)(O,{children:(0,a.jsxs)(d,{onClick:()=>{localStorage.setItem("privacy-acknowledged","true"),k(!0),y(!1)},className:"w-full bg-teal-600 hover:bg-teal-700",children:[(0,a.jsx)(M.A,{className:"w-4 h-4 mr-2"}),"I Understand - Continue"]})})]})}),(0,a.jsxs)("div",{className:"w-full max-w-md space-y-6",children:[(0,a.jsxs)("div",{className:"text-center space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-center gap-3",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-teal-600 to-teal-800 rounded-xl flex items-center justify-center shadow-lg",children:(0,a.jsx)(W.A,{className:"h-7 w-7 text-white"})}),(0,a.jsx)("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-amber-500 rounded-full flex items-center justify-center",children:(0,a.jsx)("div",{className:"w-2 h-2 bg-white rounded-full"})})]}),(0,a.jsx)(H.A,{className:"h-8 w-8 text-teal-600"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-teal-800",children:"Development Time Tracker"}),(0,a.jsx)("p",{className:"text-gray-600",children:"License validation required"})]})]}),(0,a.jsxs)(u,{children:[(0,a.jsxs)(h,{children:[(0,a.jsxs)(x,{className:"flex items-center gap-2",children:[(0,a.jsx)(J.A,{className:"h-5 w-5"}),"Enter License Key"]}),(0,a.jsx)(p,{children:"Please enter your valid license key to access the time tracking dashboard."})]}),(0,a.jsx)(g,{children:(0,a.jsxs)("form",{onSubmit:D,className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(v,{htmlFor:"license-key",children:"License Key"}),(0,a.jsx)(f,{id:"license-key",type:"text",placeholder:"Enter your license key",value:n,onChange:e=>i(e.target.value),required:!0,className:"font-mono",disabled:c})]}),l&&(0,a.jsxs)(w,{variant:"destructive",children:[(0,a.jsx)(V.A,{className:"h-4 w-4"}),(0,a.jsx)(b,{children:l})]}),n&&!l&&(0,a.jsxs)(w,{className:"border-green-200 bg-green-50",children:[(0,a.jsx)(M.A,{className:"h-4 w-4 text-green-600"}),(0,a.jsx)(b,{className:"text-green-800",children:'License key loaded successfully. Click "Validate License" to continue.'})]}),(0,a.jsx)(d,{type:"submit",className:"w-full bg-teal-600 hover:bg-teal-700",disabled:c||!n.trim(),children:c?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(_.A,{className:"w-4 h-4 animate-spin mr-2"}),"Validating with API..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(M.A,{className:"w-4 h-4 mr-2"}),"Validate License"]})}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,a.jsx)("span",{className:"w-full border-t"})}),(0,a.jsx)("div",{className:"relative flex justify-center text-xs uppercase",children:(0,a.jsx)("span",{className:"bg-background px-2 text-muted-foreground",children:"Or"})})]}),(0,a.jsxs)(d,{type:"button",variant:"outline",className:"w-full",onClick:()=>{let e=window.location.origin+window.location.pathname,t="https://addons.francislabonte.com/licenses/getkey/codepulse?return=".concat(encodeURIComponent(e));window.location.href=t},disabled:c,children:[(0,a.jsx)(B.A,{className:"w-4 h-4 mr-2"}),"Validate by Login"]})]})})]}),(0,a.jsx)(u,{className:"border-blue-200",children:(0,a.jsxs)(h,{children:[(0,a.jsxs)(x,{className:"text-sm text-blue-800 flex items-center gap-2",children:[(0,a.jsx)(B.A,{className:"h-4 w-4"}),"License Validation"]}),(0,a.jsx)(p,{className:"text-xs",children:C?"Running in preview mode - demo keys available below":"Licenses are validated through addons.francislabonte.com API"})]})}),C&&(0,a.jsxs)(u,{className:"border-teal-200",children:[(0,a.jsxs)(h,{children:[(0,a.jsx)(x,{className:"text-sm text-teal-800",children:"Demo License Key"}),(0,a.jsx)(p,{className:"text-xs",children:"For testing purposes, you can use this demo key:"})]}),(0,a.jsx)(g,{className:"space-y-3",children:X.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-2 bg-teal-50 rounded border",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(S,{variant:"outline",className:"text-xs",children:e.includes("DEV")?"DEV":e.includes("PRO")?"PRO":"DEMO"}),(0,a.jsx)("code",{className:"text-xs font-mono text-teal-700",children:e})]}),(0,a.jsxs)("div",{className:"flex gap-1",children:[(0,a.jsx)(d,{variant:"ghost",size:"sm",onClick:()=>{navigator.clipboard.writeText(e)},className:"h-6 w-6 p-0 hover:bg-teal-100",title:"Copy to clipboard",disabled:c,children:(0,a.jsx)(q.A,{className:"h-3 w-3"})}),(0,a.jsx)(d,{variant:"ghost",size:"sm",onClick:()=>{i(e),o("")},className:"h-6 px-2 text-xs hover:bg-teal-100",disabled:c,children:"Use"})]})]},e))})]}),(0,a.jsxs)("div",{className:"text-center space-y-2",children:[(0,a.jsx)("p",{className:"text-xs text-gray-500",children:C?"Preview mode: Demo keys work offline for testing.":"License validation requires an internet connection."}),(0,a.jsx)("button",{onClick:()=>y(!0),className:"text-xs text-teal-600 hover:text-teal-700 underline",children:"View Privacy & Data Storage Information"})]})]})]})}function Z(){return(0,a.jsx)("div",{className:"min-h-screen bg-stone-50 flex items-center justify-center p-6",children:(0,a.jsxs)("div",{className:"text-center space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-center gap-3",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-teal-600 to-teal-800 rounded-xl flex items-center justify-center shadow-lg",children:(0,a.jsx)(W.A,{className:"h-7 w-7 text-white"})}),(0,a.jsx)("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-amber-500 rounded-full flex items-center justify-center",children:(0,a.jsx)("div",{className:"w-2 h-2 bg-white rounded-full"})})]}),(0,a.jsx)(H.A,{className:"h-8 w-8 text-teal-600"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-teal-800",children:"Development Time Tracker"}),(0,a.jsx)("p",{className:"text-gray-600 mt-2",children:"Initializing application..."})]}),(0,a.jsxs)("div",{className:"flex items-center justify-center gap-3",children:[(0,a.jsx)(_.A,{className:"h-6 w-6 animate-spin text-teal-600"}),(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Validating license..."})]}),(0,a.jsxs)("div",{className:"flex justify-center gap-2",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-teal-600 rounded-full animate-pulse"}),(0,a.jsx)("div",{className:"w-2 h-2 bg-teal-600 rounded-full animate-pulse",style:{animationDelay:"0.2s"}}),(0,a.jsx)("div",{className:"w-2 h-2 bg-teal-600 rounded-full animate-pulse",style:{animationDelay:"0.4s"}})]})]})})}var Q=s(2286);let $=Q.bL,ee=Q.l9,et=r.forwardRef((e,t)=>{let{className:s,align:r="center",sideOffset:n=4,...i}=e;return(0,a.jsx)(Q.ZL,{children:(0,a.jsx)(Q.UC,{ref:t,align:r,sideOffset:n,className:(0,o.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]",s),...i})})});et.displayName=Q.UC.displayName;var es=s(5870),ea=s(4926),er=s(21),en=s(6485);function ei(e){let{idleTimeoutMinutes:t,onIdleTimeoutChange:s,storageType:r,onStorageTypeChange:n,onRefresh:i,onLogout:l,onRestartTour:o,settingsLoading:c=!1}=e,{getLicenseInfo:u}=K(),h=u();return(0,a.jsxs)("div",{className:"flex items-center justify-between","data-tour":"header",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-teal-600 to-teal-800 rounded-lg flex items-center justify-center shadow-md",children:(0,a.jsx)(W.A,{className:"h-6 w-6 text-white"})}),(0,a.jsx)("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-amber-500 rounded-full flex items-center justify-center",children:(0,a.jsx)("div",{className:"w-1.5 h-1.5 bg-white rounded-full"})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-teal-800",children:"Development Time Tracking"}),(0,a.jsx)("p",{className:"text-gray-600 mt-1",children:"Monitor your development productivity and project progress"})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[h&&(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(H.A,{className:"w-4 h-4 text-teal-600"}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("div",{className:"text-xs font-medium text-teal-800",children:h.type}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:h.isDemo?"Demo License":"...".concat(h.key.slice(-6))})]})]}),(0,a.jsxs)($,{children:[(0,a.jsx)(ee,{asChild:!0,children:(0,a.jsxs)(d,{variant:"outline",size:"sm",className:"border-teal-200 text-teal-700 hover:bg-teal-50",children:[(0,a.jsx)(es.A,{className:"w-4 h-4 mr-2"}),"Settings"]})}),(0,a.jsx)(et,{className:"w-80",children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h4",{className:"font-medium",children:"Dashboard Settings"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("label",{htmlFor:"idle-timeout",className:"text-sm font-medium",children:["Idle Timeout: ",t," minutes"]}),(0,a.jsxs)("select",{id:"idle-timeout",value:t,onChange:e=>s(Number(e.target.value)),className:"bg-white border rounded px-2 py-1 text-sm",disabled:c,children:[(0,a.jsx)("option",{value:5,children:"5 minutes"}),(0,a.jsx)("option",{value:10,children:"10 minutes"}),(0,a.jsx)("option",{value:15,children:"15 minutes"}),(0,a.jsx)("option",{value:20,children:"20 minutes"}),(0,a.jsx)("option",{value:30,children:"30 minutes"})]})]}),(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:["Sessions within ",t," minutes of each other will be merged"]})]}),!1,h&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("hr",{}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h5",{className:"font-medium text-sm",children:"License Information"}),(0,a.jsxs)("div",{className:"text-xs space-y-1",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Type:"}),(0,a.jsx)("span",{children:h.type})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Key:"}),(0,a.jsx)("span",{className:"font-mono",children:h.isDemo?"Demo":"...".concat(h.key.slice(-6))})]})]}),l&&(0,a.jsxs)(d,{onClick:l,variant:"outline",size:"sm",className:"w-full mt-3 text-red-600 border-red-200 hover:bg-red-50",children:[(0,a.jsx)(ea.A,{className:"w-4 h-4 mr-2"}),"Logout"]})]})]})]})})]}),o&&(0,a.jsxs)(d,{onClick:o,variant:"outline",size:"sm",className:"border-teal-200 text-teal-700 hover:bg-teal-50",title:"Restart the guided tour",children:[(0,a.jsx)(er.A,{className:"w-4 h-4 mr-2"}),"Help"]}),(0,a.jsxs)(d,{onClick:i,variant:"outline",size:"sm",className:"border-teal-200 text-teal-700 hover:bg-teal-50",children:[(0,a.jsx)(m.A,{className:"w-4 h-4 mr-2"}),"Refresh"]}),(0,a.jsxs)(S,{variant:"outline",className:"px-3 py-1",children:[(0,a.jsx)(en.A,{className:"w-4 h-4 mr-1"}),(null==h?void 0:h.isDemo)?"Demo Data":"Live Data"]})]})]})}function el(e){let{currentWeek:t,onNavigateWeek:s}=e,r=e=>{let t=new Date(e),s=t.getDay(),a=t.getDate()-s;return new Date(t.setDate(a))},n=()=>{let e=new Date,s=r(t),a=r(e);return s.getTime()===a.getTime()};return(0,a.jsx)(u,{"data-tour":"week-navigation",children:(0,a.jsx)(g,{className:"py-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)(d,{onClick:()=>s("prev"),variant:"outline",size:"sm",className:"border-teal-200 text-teal-700 hover:bg-teal-50",children:"← Previous Week"}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("div",{className:"text-lg font-semibold text-teal-800",children:[r(t).toLocaleDateString("en-US",{month:"short",day:"numeric"})," ","-"," ",new Date(r(t).getTime()+5184e5).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})]}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:n()?"Current Week":"Week of "+r(t).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})})]}),(0,a.jsx)(d,{onClick:()=>s("next"),variant:"outline",size:"sm",className:"border-teal-200 text-teal-700 hover:bg-teal-50",disabled:n(),children:"Next Week →"})]}),!n()&&(0,a.jsx)(d,{onClick:()=>s("current"),variant:"default",size:"sm",className:"bg-teal-600 hover:bg-teal-700",children:"Back to Current Week"})]})})})}var eo=s(574);let ec=eo.bL,ed=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(eo.B8,{ref:t,className:(0,o.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",s),...r})});ed.displayName=eo.B8.displayName;let em=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(eo.l9,{ref:t,className:(0,o.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",s),...r})});em.displayName=eo.l9.displayName;let eu=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(eo.UC,{ref:t,className:(0,o.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s),...r})});eu.displayName=eo.UC.displayName;let eh="America/New_York",ex=e=>new Date(e+"T00:00:00"),ep=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{month:"2-digit",day:"2-digit",year:"numeric"};return ex(e).toLocaleDateString("en-US",{timeZone:eh,...t})},eg=e=>ep(e,{month:"short",day:"numeric"}),ef=e=>ep(e,{month:"long",day:"numeric",year:"numeric"}),ej=e=>ep(e,{weekday:"short"}),ey=e=>e.toLocaleDateString("en-CA",{timeZone:eh}),ev=(e,t,s)=>{let a=e=>{let t=new Date(e),s=t.getDay(),a=t.getDate()-s;return new Date(t.setDate(a))},r=e=>{let t=[];for(let s=0;s<7;s++){let a=new Date(e.getTime()+24*s*36e5);t.push(ey(a))}return t},n=()=>{if(!e||0===Object.keys(e).length)return{};let s=r(a(t)),n={};return s.forEach(t=>{e[t]&&(n[t]=e[t])}),n},i=e=>{let t=ex(e).getDay();return 8*(t>=1&&t<=5)},l=e=>{let t=Math.floor(e/3600),s=Math.floor(e%3600/60);return"".concat(t,"h ").concat(s,"m")},o=e=>{if(0===e.length)return e;let t=[...e].sort((e,t)=>new Date(e.start).getTime()-new Date(t.start).getTime()),a=[],r={...t[0]};for(let e=1;e<t.length;e++){let n=t[e],i=new Date(r.end).getTime();new Date(n.start).getTime()-i<=60*s*1e3&&r.type===n.type?r.end=n.end:(a.push(r),r={...n})}return a.push(r),a},c=e=>{let t=[];return Object.values(e).forEach(e=>{t.push(...e.sessions)}),o(t)},d=e=>o(e.sessions),m=e=>e.reduce((e,t)=>e+(new Date(t.end).getTime()-new Date(t.start).getTime())/1e3,0),u=()=>{let e={},t=n();return 0===Object.keys(t).length?[]:(Object.entries(t).forEach(t=>{let[s,a]=t;Object.entries(a).forEach(t=>{let[s,a]=t,r=m(d(a));e[s]=(e[s]||0)+r})}),Object.entries(e).map(e=>{let[t,s]=e;return{name:t,duration:s,hours:s/3600}}).sort((e,t)=>t.duration-e.duration))},h=()=>{let e=r(a(t)),s=n();return e.map(e=>{let t=m(c(s[e]||{})),a=ej(e),r=i(e);return{day:a,date:e,hours:t/3600,target:r}})},x=()=>{let e=[],t=n();return 0===Object.keys(t).length?[]:(Object.entries(t).sort((e,t)=>{let[s]=e,[a]=t;return a.localeCompare(s)}).forEach(t=>{let[s,a]=t;Object.entries(a).forEach(t=>{let[a,r]=t;d(r).slice(-3).forEach((t,r)=>{let n=new Date(t.end).getTime()-new Date(t.start).getTime();e.push({id:"".concat(s,"-").concat(a,"-").concat(r),project:a,task:"".concat(t.type," session"),duration:l(n/1e3),status:"completed",date:s,type:t.type})})})}),e.slice(0,10))};return{getWeekStart:a,getWeekEnd:e=>new Date(a(e).getTime()+5184e5),getWeekDates:r,getCurrentWeekData:n,isCurrentWeek:()=>{let e=new Date,s=a(t),r=a(e);return s.getTime()===r.getTime()},formatDuration:l,formatHoursForChart:e=>{let t=Math.floor(e),s=Math.round((e-t)*60);return 0===t&&0===s?"0h":0===s?"".concat(t,"h"):"".concat(t,"h").concat(s.toString().padStart(2,"0"))},formatDateInEST:ep,formatDateShort:eg,formatDateLong:ef,getTargetHoursForDate:i,mergeSessions:o,getMergedSessionsForDay:c,getMergedSessionsForProjectDay:d,calculateMergedDuration:m,getProjectTotals:u,getWeeklyData:h,getStackedWeeklyData:()=>{let e=r(a(t)),s=n();return e.map(e=>{let t=s[e]||{},a=ej(e),r=i(e),n={};return Object.entries(t).forEach(e=>{let[t,s]=e,a=m(d(s));n[t]=a/3600}),{day:a,date:e,target:r,...n}})},getWeeklyDataForProject:e=>{let s=r(a(t)),i=n();return s.map(t=>{let s=(i[t]||{})[e],a=ej(t),r=0;return s&&(r=m(d(s))/3600),{day:a,date:t,hours:r}})},getProjectSessionDetails:e=>{let t=[];return Object.entries(n()).forEach(s=>{let[a,r]=s;if(r[e]){let s=d(r[e]);t.push(...s.map(e=>({...e,date:a})))}}),t.sort((e,t)=>new Date(t.start).getTime()-new Date(e.start).getTime())},getRecentActivities:x,getTotalHoursThisWeek:()=>h().reduce((e,t)=>e+t.hours,0),getAvgHoursPerDay:()=>{let e=h().filter(e=>e.target>0);return e.length>0?e.reduce((e,t)=>e+t.hours,0)/e.length:0},getTargetHoursThisWeek:()=>h().reduce((e,t)=>e+t.target,0),getActiveProjects:()=>u().length,getCompletedTasks:()=>x().filter(e=>"completed"===e.status).length,getProjectChartData:()=>{let e=u().slice(0,8),t=["#2D5A5A","#4A7C7C","#A67C5A","#8B4513","#D2B48C","#5F8A8B","#8FBC8F","#CD853F","#DEB887","#F4A460"];return e.map((e,s)=>({name:e.name,hours:Number(e.hours.toFixed(1)),color:t[s%t.length]}))},getMonthlyTrend:()=>{let t={};return e&&0!==Object.keys(e).length?(Object.entries(e).forEach(e=>{let[s,a]=e,r=ep(s,{month:"short"}),n=0;Object.entries(a).forEach(e=>{let[t,s]=e,a=d(s);n+=m(a)}),t[r]=(t[r]||0)+n}),Object.entries(t).map(e=>{let[t,s]=e;return{month:t,hours:Number((s/3600).toFixed(1))}})):[]},getProjectBreakdown:e=>{let t=[];return Object.entries(n()).forEach(s=>{let[a,r]=s;if(r[e]){let s=d(r[e]);t.push(...s.map(e=>({...e,date:a})))}}),t.sort((e,t)=>new Date(t.start).getTime()-new Date(e.start).getTime())},getDailyTotalsForProject:e=>{let t={};return Object.entries(n()).forEach(s=>{let[a,r]=s;if(r[e]){let s=d(r[e]),n=m(s);t[a]={duration:n,sessions:s}}}),Object.entries(t).map(e=>{let[t,s]=e;return{date:t,...s}}).sort((e,t)=>t.date.localeCompare(e.date)).slice(0,14)},getFileActivityForProject:(e,t)=>{let s=n()[t];if(!s||!s[e])return[];let a=s[e].sessions.filter(e=>"coding"===e.type&&e.file),r={};return a.forEach(e=>{if(e.file){let t=e.file.split("/").pop()||e.file;r[t]||(r[t]=[]),r[t].push(e)}}),Object.entries(r).map(e=>{let[t,s]=e,a=s.reduce((e,t)=>e+(new Date(t.end).getTime()-new Date(t.start).getTime())/1e3,0),r=Array(24).fill(0);return s.forEach(e=>{let t=new Date(e.start).getHours(),s=(new Date(e.end).getTime()-new Date(e.start).getTime())/1e3;r[t]+=s}),{filename:t,extension:t.split(".").pop()||"",totalSeconds:a,timeByHour:r,fullPath:s[0].file}}).sort((e,t)=>t.totalSeconds-e.totalSeconds)},getUrlActivityForProject:(e,t)=>{let s=n()[t];if(!s||!s[e])return[];let a=s[e].sessions.filter(e=>"browsing"===e.type&&e.url),r={};return a.forEach(e=>{e.url&&(r[e.url]||(r[e.url]=[]),r[e.url].push(e))}),Object.entries(r).map(e=>{let[t,s]=e,a=s.reduce((e,t)=>e+(new Date(t.end).getTime()-new Date(t.start).getTime())/1e3,0);return{url:t,host:s[0].host||new URL(t).hostname,totalSeconds:a,sessionCount:s.length}}).sort((e,t)=>t.totalSeconds-e.totalSeconds)},dateToESTString:ey,createESTDate:ex}};var eN=s(5880),ew=s(9602),eb=s(9715),ek=s(3924);function eS(e){let{statsData:t,currentWeek:s,idleTimeoutMinutes:n,ignoredProjects:i=[],projectCustomNames:l=[],projectClients:o=[],commits:c=[],wrikeProjectMappings:d=[]}=e,[m,f]=(0,r.useState)(null),[j,y]=(0,r.useState)(!1),{getStackedWeeklyData:v,getProjectChartData:N,formatHoursForChart:w,getMergedSessionsForProjectDay:b,calculateMergedDuration:k}=ev(t,s,n,i),T=e=>{let t=l.find(t=>t.projectName===e);return t?t.customName:e},C=v(),D=N().reduce((e,t)=>(e[t.name]=t.color,e),{}),E=Array.from(new Set(C.flatMap(e=>Object.keys(e).filter(e=>!["day","date","target"].includes(e))))).sort();E.reduce((e,t)=>(e[t]={label:t,color:D[t]||"#8884d8"},e),{}).target={label:"Target Hours",color:"#e5e7eb"};let O=C.map(e=>{let t={},s=0;return Object.entries(e).forEach(e=>{let[a,r]=e;["day","date","target"].includes(a)||(t[a]=r,s+=r)}),{day:e.day,date:e.date,totalHours:s,projectHours:t}}),L=E.reduce((e,t)=>{let s=O.reduce((e,s)=>e+(s.projectHours[t]||0),0);return e[t]=s,e},{}),U=Object.values(L).reduce((e,t)=>e+t,0);return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)(u,{children:[(0,a.jsxs)(h,{children:[(0,a.jsx)(x,{children:"Weekly Timesheet"}),(0,a.jsx)(p,{children:"Click any cell to view session details for that day and project"})]}),(0,a.jsx)(g,{children:(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full border-collapse text-sm",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"border-b-2 border-gray-300",children:[(0,a.jsx)("th",{className:"py-3 px-4 text-left font-semibold text-gray-700 bg-gray-50",children:"Project"}),O.map(e=>(0,a.jsx)("th",{className:"py-3 px-4 text-right font-semibold text-gray-700 bg-gray-50",children:e.day},e.date)),(0,a.jsx)("th",{className:"py-3 px-4 text-right font-semibold text-gray-700 bg-teal-50",children:"Total"})]})}),(0,a.jsx)("tbody",{children:E.map(e=>{let s=d.find(t=>t.projectName===e),r=(e=>{let t=o.find(t=>t.projectName===e);return t?t.clientName:null})(e);return(0,a.jsxs)("tr",{className:"border-b hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"py-3 px-4 font-medium text-gray-900",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:D[e]}}),(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("span",{children:T(e)}),r&&(0,a.jsx)("span",{className:"text-xs text-gray-500 font-normal",children:r})]}),s&&(0,a.jsx)("a",{href:s.wrikePermalink,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 ml-1",title:"Open ".concat(s.wrikeProjectTitle," in Wrike"),children:(0,a.jsx)(eN.A,{className:"w-3.5 h-3.5"})})]})}),O.map(s=>{let r=s.projectHours[e]||0;return(0,a.jsx)("td",{className:"py-3 px-4 text-right ".concat(r>0?"cursor-pointer hover:bg-teal-50 font-medium":"text-gray-400"),onClick:()=>r>0&&((e,s,a,r)=>{if(0===r)return;let n=t[s];if(!n||!n[a])return;let i=b(n[a]).map(e=>{let t=new Date(e.start),s=new Date(e.end);return{start:e.start,end:e.end,duration:(s.getTime()-t.getTime())/1e3,type:e.type,file:e.file,url:e.url,host:e.host}});f({day:e,date:s,project:a,hours:r,sessions:i}),y(!0)})(s.day,s.date,e,r),children:r>0?w(r):"-"},s.date)}),(0,a.jsx)("td",{className:"py-3 px-4 text-right font-bold text-teal-800 bg-teal-50",children:w(L[e])})]},e)})}),(0,a.jsx)("tfoot",{children:(0,a.jsxs)("tr",{className:"bg-gray-100 border-t-2 border-gray-300",children:[(0,a.jsx)("td",{className:"py-3 px-4 font-bold text-gray-900",children:"Total"}),O.map(e=>(0,a.jsx)("td",{className:"py-3 px-4 text-right font-bold text-gray-900",children:w(e.totalHours)},e.date)),(0,a.jsx)("td",{className:"py-3 px-4 text-right font-bold text-teal-900 bg-teal-100",children:w(U)})]})})]})})})]}),(0,a.jsx)(A,{open:j,onOpenChange:y,children:(0,a.jsxs)(P,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[(0,a.jsx)(I,{children:(0,a.jsx)(R,{children:m&&(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:D[m.project]}}),(0,a.jsxs)("span",{children:[m.day," - ",T(m.project)]}),(0,a.jsx)(S,{variant:"outline",children:w(m.hours)})]})})}),m&&(0,a.jsxs)(ec,{defaultValue:"timeline",className:"w-full",children:[(0,a.jsxs)(ed,{children:[(0,a.jsx)(em,{value:"timeline",children:"Timeline"}),(0,a.jsx)(em,{value:"files",children:"Files"}),(0,a.jsx)(em,{value:"websites",children:"Websites"}),(0,a.jsx)(em,{value:"commits",children:"Commits"})]}),(0,a.jsxs)(eu,{value:"timeline",className:"space-y-4",children:[(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:[m.sessions.length," session",1!==m.sessions.length?"s":""]}),(0,a.jsxs)("div",{className:"border rounded-lg p-4 bg-gray-50",children:[(0,a.jsx)("h4",{className:"text-sm font-semibold mb-3",children:"Activity Timeline"}),(0,a.jsxs)("div",{className:"relative h-12 bg-white rounded border",children:[(0,a.jsx)("div",{className:"absolute inset-0 flex",children:Array.from({length:24},(e,t)=>(0,a.jsx)("div",{className:"flex-1 border-r border-gray-200 text-xs text-gray-400 px-1",children:t.toString().padStart(2,"0")},t))}),(0,a.jsx)("div",{className:"absolute inset-0 pt-6",children:m.sessions.map((e,t)=>{let s=new Date(e.start),r=new Date(e.end),n=s.getHours()+s.getMinutes()/60,i=r.getHours()+r.getMinutes()/60;return(0,a.jsx)("div",{className:"absolute h-6 rounded",style:{left:"".concat(n/24*100,"%"),width:"".concat((i-n)/24*100,"%"),backgroundColor:"coding"===e.type?"#2D5A5A":"#F59E0B",opacity:.8},title:"".concat(s.toLocaleTimeString()," - ").concat(r.toLocaleTimeString())},t)})})]}),(0,a.jsxs)("div",{className:"flex gap-4 mt-2 text-xs",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)("div",{className:"w-3 h-3 rounded",style:{backgroundColor:"#2D5A5A"}}),(0,a.jsx)("span",{children:"Coding"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)("div",{className:"w-3 h-3 rounded",style:{backgroundColor:"#F59E0B"}}),(0,a.jsx)("span",{children:"Browsing"})]})]})]}),(0,a.jsx)("div",{className:"space-y-2",children:m.sessions.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-start gap-3 p-3 border rounded-lg bg-gray-50",children:[(0,a.jsx)("div",{className:"flex items-center gap-2 pt-1",children:"coding"===e.type?(0,a.jsx)(ew.A,{className:"w-4 h-4 text-teal-600"}):(0,a.jsx)(B.A,{className:"w-4 h-4 text-amber-600"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,a.jsx)(S,{variant:"coding"===e.type?"default":"secondary",children:e.type}),(0,a.jsxs)("div",{className:"text-sm font-medium",children:[new Date(e.start).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})," ","-"," ",new Date(e.end).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1 text-sm font-medium text-gray-600",children:[(0,a.jsx)(W.A,{className:"w-3 h-3"}),w(e.duration/3600)]})]}),e.file&&(0,a.jsxs)("div",{className:"text-sm text-gray-600 truncate",title:e.file,children:[(0,a.jsx)(eb.A,{className:"w-3 h-3 inline mr-1"}),e.file]}),e.url&&(0,a.jsxs)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-600 hover:text-blue-800 flex items-center gap-1 truncate",title:e.url,children:[(0,a.jsx)(B.A,{className:"w-3 h-3"}),e.host||new URL(e.url).hostname,(0,a.jsx)(eN.A,{className:"w-3 h-3"})]})]})]},t))})]}),(0,a.jsx)(eu,{value:"files",className:"space-y-2",children:(()=>{let e=Object.values(m.sessions.filter(e=>"coding"===e.type&&e.file).reduce((e,t)=>{let s=t.file;return e[s]||(e[s]={file:s,duration:0,sessions:0}),e[s].duration+=t.duration,e[s].sessions+=1,e},{})).sort((e,t)=>t.duration-e.duration);return e.length>0?e.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[(0,a.jsx)(eb.A,{className:"w-4 h-4 text-gray-600 flex-shrink-0"}),(0,a.jsx)("span",{className:"text-sm truncate",title:e.file,children:e.file})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3 text-sm text-gray-600",children:[(0,a.jsxs)("span",{children:[e.sessions," session",1!==e.sessions?"s":""]}),(0,a.jsx)("span",{className:"font-medium",children:w(e.duration/3600)})]})]},t)):(0,a.jsx)("div",{className:"text-center py-8 text-gray-500",children:"No files recorded"})})()}),(0,a.jsx)(eu,{value:"websites",className:"space-y-2",children:(()=>{let e=Object.values(m.sessions.filter(e=>"browsing"===e.type&&e.url).reduce((e,t)=>{let s=t.url;return e[s]||(e[s]={url:s,host:t.host||new URL(s).hostname,duration:0,sessions:0}),e[s].duration+=t.duration,e[s].sessions+=1,e},{})).sort((e,t)=>t.duration-e.duration);return e.length>0?e.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[(0,a.jsx)(B.A,{className:"w-4 h-4 text-amber-600 flex-shrink-0"}),(0,a.jsxs)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-600 hover:text-blue-800 truncate flex items-center gap-1",title:e.url,children:[e.host,(0,a.jsx)(eN.A,{className:"w-3 h-3"})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3 text-sm text-gray-600",children:[(0,a.jsxs)("span",{children:[e.sessions," session",1!==e.sessions?"s":""]}),(0,a.jsx)("span",{className:"font-medium",children:w(e.duration/3600)})]})]},t)):(0,a.jsx)("div",{className:"text-center py-8 text-gray-500",children:"No websites recorded"})})()}),(0,a.jsx)(eu,{value:"commits",className:"space-y-2",children:(()=>{let e=c.filter(e=>new Date(e.commitTime).toISOString().split("T")[0]===m.date&&e.project===m.project).sort((e,t)=>new Date(t.commitTime).getTime()-new Date(e.commitTime).getTime());return e.length>0?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"text-sm text-gray-600 mb-2",children:[e.length," commit",1!==e.length?"s":""]}),e.map((e,t)=>(0,a.jsx)("div",{className:"p-3 border rounded-lg bg-gray-50 space-y-2",children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)(ek.A,{className:"w-4 h-4 text-purple-600 flex-shrink-0 mt-1"}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,a.jsx)("code",{className:"text-xs font-mono bg-gray-200 px-2 py-0.5 rounded",children:e.commitHash.substring(0,7)}),e.branch&&(0,a.jsx)(S,{variant:"outline",className:"text-xs",children:e.branch}),(0,a.jsx)("span",{className:"text-xs text-gray-500",children:new Date(e.commitTime).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),(0,a.jsx)("div",{className:"text-sm text-gray-900 mb-2",children:e.commitMessage}),(0,a.jsxs)("div",{className:"flex items-center gap-4 text-xs text-gray-600",children:[e.authorName&&(0,a.jsxs)("span",{children:[(0,a.jsx)("strong",{children:"Author:"})," ",e.authorName]}),e.filesChanged>0&&(0,a.jsxs)("span",{children:[(0,a.jsx)("strong",{children:"Files:"})," ",e.filesChanged]}),(e.linesAdded>0||e.linesDeleted>0)&&(0,a.jsxs)("span",{children:[(0,a.jsxs)("span",{className:"text-green-600",children:["+",e.linesAdded]})," /"," ",(0,a.jsxs)("span",{className:"text-red-600",children:["-",e.linesDeleted]})]})]})]})]})},t))]}):(0,a.jsx)("div",{className:"text-center py-8 text-gray-500",children:"No commits recorded for this day"})})()})]})]})})]})}var eT=s(5644),eC=s(4033),eA=s(2108),eD=s(5917);let eE=eT.bL;eT.YJ;let eP=eT.WT,eI=r.forwardRef((e,t)=>{let{className:s,children:r,...n}=e;return(0,a.jsxs)(eT.l9,{ref:t,className:(0,o.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",s),...n,children:[r,(0,a.jsx)(eT.In,{asChild:!0,children:(0,a.jsx)(eC.A,{className:"h-4 w-4 opacity-50"})})]})});eI.displayName=eT.l9.displayName;let eO=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(eT.PP,{ref:t,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",s),...r,children:(0,a.jsx)(eA.A,{className:"h-4 w-4"})})});eO.displayName=eT.PP.displayName;let eR=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(eT.wn,{ref:t,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",s),...r,children:(0,a.jsx)(eC.A,{className:"h-4 w-4"})})});eR.displayName=eT.wn.displayName;let eL=r.forwardRef((e,t)=>{let{className:s,children:r,position:n="popper",...i}=e;return(0,a.jsx)(eT.ZL,{children:(0,a.jsxs)(eT.UC,{ref:t,className:(0,o.cn)("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:n,...i,children:[(0,a.jsx)(eO,{}),(0,a.jsx)(eT.LM,{className:(0,o.cn)("p-1","popper"===n&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),(0,a.jsx)(eR,{})]})})});eL.displayName=eT.UC.displayName,r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(eT.JU,{ref:t,className:(0,o.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",s),...r})}).displayName=eT.JU.displayName;let eU=r.forwardRef((e,t)=>{let{className:s,children:r,...n}=e;return(0,a.jsxs)(eT.q7,{ref:t,className:(0,o.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...n,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(eT.VF,{children:(0,a.jsx)(eD.A,{className:"h-4 w-4"})})}),(0,a.jsx)(eT.p4,{children:r})]})});eU.displayName=eT.q7.displayName,r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(eT.wv,{ref:t,className:(0,o.cn)("-mx-1 my-1 h-px bg-muted",s),...r})}).displayName=eT.wv.displayName;var eF=s(368),eM=s(7937);function ez(e){let{statsData:t,currentWeek:s,idleTimeoutMinutes:n,ignoredProjects:i=[],selectedDate:l,onDateChange:o}=e,[c,m]=(0,r.useState)(()=>l||ey(new Date)),{formatDuration:f,formatHoursForChart:j,getMergedSessionsForProjectDay:y,getProjectChartData:v}=ev(t,s,n,i),N=Object.keys(t).sort().reverse(),w=t[c]||{},b=v().reduce((e,t)=>(e[t.name]=t.color,e),{}),k=Object.entries(w).flatMap(e=>{let[t,s]=e;return y(s).map(e=>{let s=new Date(e.start),a=new Date(e.end);return{project:t,color:b[t]||"#8884d8",start:e.start,end:e.end,duration:(a.getTime()-s.getTime())/1e3,type:e.type}})}).sort((e,t)=>new Date(e.start).getTime()-new Date(t.start).getTime()),T=Object.entries(w).map(e=>{let[t,s]=e,a=y(s),r=a.reduce((e,t)=>{let s=new Date(t.start);return e+(new Date(t.end).getTime()-s.getTime())/1e3},0);return{project:t,duration:r,hours:r/3600,sessions:a.length,color:b[t]||"#8884d8"}}),C=T.reduce((e,t)=>e+t.hours,0),A=e=>{let t=new Date(ex(c));t.setDate(t.getDate()+("next"===e?1:-1));let s=ey(t);m(s),o&&o(s)};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)(u,{children:(0,a.jsx)(h,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(d,{variant:"outline",size:"sm",onClick:()=>A("prev"),children:(0,a.jsx)(eF.A,{className:"w-4 h-4"})}),(0,a.jsx)(d,{variant:"outline",size:"sm",onClick:()=>A("next"),children:(0,a.jsx)(eM.A,{className:"w-4 h-4"})})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)(x,{className:"flex items-center gap-2",children:[(0,a.jsx)(en.A,{className:"w-5 h-5"}),"Daily Details"]}),(0,a.jsx)(p,{children:ef(c)})]})]}),(0,a.jsx)("div",{className:"flex items-center gap-4",children:(0,a.jsxs)(eE,{value:c,onValueChange:e=>{m(e),o&&o(e)},children:[(0,a.jsx)(eI,{className:"w-48",children:(0,a.jsx)(eP,{placeholder:"Select a date"})}),(0,a.jsx)(eL,{children:N.map(e=>(0,a.jsx)(eU,{value:e,children:ep(e,{weekday:"short",month:"short",day:"numeric"})},e))})]})})]})})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,a.jsx)(u,{children:(0,a.jsxs)(g,{className:"p-4",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-teal-800",children:j(C)}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Total Hours"})]})}),(0,a.jsx)(u,{children:(0,a.jsxs)(g,{className:"p-4",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-teal-800",children:k.length}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Total Sessions"})]})}),(0,a.jsx)(u,{children:(0,a.jsxs)(g,{className:"p-4",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-teal-800",children:k.filter(e=>"coding"===e.type).length}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Coding Sessions"})]})}),(0,a.jsx)(u,{children:(0,a.jsxs)(g,{className:"p-4",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-teal-800",children:T.length}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Active Projects"})]})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)(u,{children:[(0,a.jsxs)(h,{children:[(0,a.jsx)(x,{children:"Project Breakdown"}),(0,a.jsx)(p,{children:"Time spent on each project today"})]}),(0,a.jsx)(g,{children:0===T.length?(0,a.jsx)("div",{className:"text-center py-8 text-gray-500",children:"No activity recorded for this day"}):(0,a.jsx)("div",{className:"space-y-3",children:T.sort((e,t)=>t.hours-e.hours).map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:e.color}}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium",children:e.project}),(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:[e.sessions," sessions"]})]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("div",{className:"font-medium",children:j(e.hours)}),(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:[Math.round(e.hours/C*100),"%"]})]})]},e.project))})})]}),(0,a.jsxs)(u,{children:[(0,a.jsxs)(h,{children:[(0,a.jsx)(x,{children:"Session Timeline"}),(0,a.jsx)(p,{children:"Chronological view of your work sessions"})]}),(0,a.jsx)(g,{children:0===k.length?(0,a.jsx)("div",{className:"text-center py-8 text-gray-500",children:"No sessions recorded for this day"}):(0,a.jsx)("div",{className:"space-y-3 max-h-[400px] overflow-y-auto",children:k.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center gap-3 p-3 border rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:e.color}}),"coding"===e.type?(0,a.jsx)(ew.A,{className:"w-4 h-4 text-teal-600"}):(0,a.jsx)(B.A,{className:"w-4 h-4 text-amber-600"})]}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("div",{className:"font-medium",children:e.project}),(0,a.jsx)(S,{variant:"coding"===e.type?"default":"secondary",children:e.type})]}),(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:[new Date(e.start).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})," ","-"," ",new Date(e.end).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1 text-sm font-medium",children:[(0,a.jsx)(W.A,{className:"w-3 h-3"}),f(e.duration)]})]},t))})})]})]})]})}let eW=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{className:"relative w-full overflow-auto",children:(0,a.jsx)("table",{ref:t,className:(0,o.cn)("w-full caption-bottom text-sm",s),...r})})});eW.displayName="Table";let eH=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("thead",{ref:t,className:(0,o.cn)("[&_tr]:border-b",s),...r})});eH.displayName="TableHeader";let eJ=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("tbody",{ref:t,className:(0,o.cn)("[&_tr:last-child]:border-0",s),...r})});eJ.displayName="TableBody",r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("tfoot",{ref:t,className:(0,o.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",s),...r})}).displayName="TableFooter";let eV=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("tr",{ref:t,className:(0,o.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",s),...r})});eV.displayName="TableRow";let e_=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("th",{ref:t,className:(0,o.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",s),...r})});e_.displayName="TableHead";let eB=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("td",{ref:t,className:(0,o.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",s),...r})});eB.displayName="TableCell",r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("caption",{ref:t,className:(0,o.cn)("mt-4 text-sm text-muted-foreground",s),...r})}).displayName="TableCaption";var eq=s(8162);let eY=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(eq.bL,{ref:t,className:(0,o.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",s),...r,children:(0,a.jsx)(eq.C1,{className:(0,o.cn)("flex items-center justify-center text-current"),children:(0,a.jsx)(eD.A,{className:"h-4 w-4"})})})});eY.displayName=eq.bL.displayName;var eK=s(8734),eX=s(532),eG=s(7726),eZ=s(6651),eQ=s(6046),e$=s(8514),e0=s(1360),e1=s(7828),e4=s(6191);function e2(e){let{statsData:t,ignoredProjects:s,projectCustomNames:n,projectClients:i,projectUrls:l,currentWeek:o,idleTimeoutMinutes:c,onIdleTimeoutChange:m,onAddIgnoredProject:j,onRemoveIgnoredProject:y,onSaveProjectCustomName:N,onRemoveProjectCustomName:w,onSaveProjectClient:b,onRemoveProjectClient:k,onCreateUrl:T,onUpdateUrl:D,onDeleteUrl:E}=e,[L,U]=(0,r.useState)(""),[F,M]=(0,r.useState)(!1),[z,H]=(0,r.useState)(""),[J,V]=(0,r.useState)(!1),[_,B]=(0,r.useState)(null),[q,Y]=(0,r.useState)(""),[K,X]=(0,r.useState)(null),[G,Z]=(0,r.useState)(""),[Q,$]=(0,r.useState)(!1),[ee,et]=(0,r.useState)(null),[ea,er]=(0,r.useState)({project:"",url:"",description:""}),[en,ei]=(0,r.useState)(null),[el,eo]=(0,r.useState)(""),[eh,ex]=(0,r.useState)(1),[ep,eg]=(0,r.useState)(10),[ef,ej]=(0,r.useState)(!0),[ey,eN]=(0,r.useState)(!1),[ew,eb]=(0,r.useState)(new Set),[ek,eS]=(0,r.useState)("comfortable"),[eT,eA]=(0,r.useState)(()=>localStorage.getItem("settings-active-tab")||"projects");r.useEffect(()=>{localStorage.setItem("settings-active-tab",eT)},[eT]);let{getProjectTotals:eD,formatDuration:eO}=ev(t,o,c),eR=e=>{let t=n.find(t=>t.projectName===e);return t?t.customName:e},eF=e=>n.find(t=>t.projectName===e),ez=e=>i.find(t=>t.projectName===e),eq=(()=>{let e=new Set;return Object.values(t).forEach(t=>{Object.keys(t).forEach(t=>{e.add(t)})}),Array.from(e).sort()})(),e2=eD();s.map(e=>e.projectName);let e5=e=>l?l.filter(t=>t.project===e):[],e3=(()=>{let e=new Map;return e2.forEach(t=>{e.set(t.name,{name:t.name,displayName:eR(t.name),duration:t.duration,isIgnored:!1,urls:e5(t.name)})}),s.forEach(t=>{let s=e.get(t.projectName);s?(s.isIgnored=!0,s.ignoredAt=t.ignoredAt):e.set(t.projectName,{name:t.projectName,displayName:eR(t.projectName),duration:0,isIgnored:!0,ignoredAt:t.ignoredAt,urls:e5(t.projectName)})}),Array.from(e.values())})(),e6=e3.filter(e=>{if(!ef&&e.isIgnored)return!1;if(L){let t=L.toLowerCase();return e.name.toLowerCase().includes(t)||e.displayName.toLowerCase().includes(t)||e.urls.some(e=>e.url.toLowerCase().includes(t))}return!0}).sort((e,t)=>e.displayName.localeCompare(t.displayName)),e8=r.useMemo(()=>{if(!ey)return[];let e=new Map;return e6.forEach(t=>{let s=ez(t.name),a=(null==s?void 0:s.clientName)||"Unassigned";e.has(a)||e.set(a,[]),e.get(a).push(t)}),Array.from(e.entries()).map(e=>{let[t,s]=e;return{clientName:t,projects:s}}).sort((e,t)=>"Unassigned"===e.clientName?1:"Unassigned"===t.clientName?-1:e.clientName.localeCompare(t.clientName))},[e6,ey,i]),e7=Math.ceil(e6.length/ep),e9=(eh-1)*ep,te=e9+ep,tt=e6.slice(e9,te),ts=r.useRef(L),ta=r.useRef(ef);r.useEffect(()=>{(ts.current!==L||ta.current!==ef)&&(ex(1),ts.current=L,ta.current=ef)},[L,ef]);let tr=async e=>{V(!0);try{await y(e)}finally{V(!1)}},tn=async e=>{V(!0);try{await j(e)}finally{V(!1)}},ti=async e=>{if(e.isIgnored){let t=s.find(t=>t.projectName===e.name);t&&await tr(t.id)}else await tn(e.name)},tl=e=>{let t=eF(e);B(e),Y((null==t?void 0:t.customName)||"")},to=async e=>{if(q.trim()){V(!0);try{await N(e,q.trim()),B(null),Y("")}finally{V(!1)}}},tc=()=>{B(null),Y("")},td=e=>{let t=ez(e);X(e),Z((null==t?void 0:t.clientName)||"")},tm=async e=>{if(G.trim()){V(!0);try{await b(e,G.trim()),X(null),Z("")}finally{V(!1)}}},tu=()=>{X(null),Z("")},th=e=>{et(e),er({project:e.project,url:e.url,description:e.description||""}),$(!0)},tx=()=>{er({project:"",url:"",description:""})},tp=e=>{$(e),e||(et(null),tx())},tg=async e=>{e.preventDefault(),V(!0);try{ee?await D(ee.id,ea):await T(ea),$(!1),tx(),et(null)}finally{V(!1)}},tf=async e=>{V(!0);try{await E(e)}finally{V(!1)}},tj=async e=>{if(!el.trim()){ei(null),eo("");return}V(!0);try{await T({project:e,url:el.trim(),description:""}),ei(null),eo("")}finally{V(!1)}},ty=()=>{ei(null),eo("")};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)(u,{children:(0,a.jsx)(h,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(es.A,{className:"w-6 h-6 text-teal-600"}),(0,a.jsxs)("div",{children:[(0,a.jsx)(x,{children:"Settings"}),(0,a.jsx)(p,{children:"Manage your time tracker preferences and projects"})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)(S,{variant:"outline",className:"px-3 py-1",children:[(0,a.jsx)(eK.A,{className:"w-4 h-4 mr-1"}),e2.length," Active"]}),(0,a.jsxs)(S,{variant:"secondary",className:"px-3 py-1",children:[(0,a.jsx)(eX.A,{className:"w-4 h-4 mr-1"}),s.length," Ignored"]}),(0,a.jsxs)(S,{variant:"outline",className:"px-3 py-1",children:[(0,a.jsx)(eG.A,{className:"w-4 h-4 mr-1"}),n.length," Custom Names"]})]})]})})}),(0,a.jsxs)(ec,{value:eT,onValueChange:eA,className:"w-full",children:[(0,a.jsxs)(ed,{children:[(0,a.jsxs)(em,{value:"projects",children:[(0,a.jsx)(eK.A,{className:"w-4 h-4 mr-2"}),"Projects"]}),(0,a.jsxs)(em,{value:"general",children:[(0,a.jsx)(W.A,{className:"w-4 h-4 mr-2"}),"General"]})]}),(0,a.jsx)(eu,{value:"general",className:"space-y-6",children:(0,a.jsxs)(u,{children:[(0,a.jsxs)(h,{children:[(0,a.jsx)(x,{children:"Idle Timeout"}),(0,a.jsx)(p,{children:"Set the time after which inactivity will split sessions. This affects how sessions are grouped together."})]}),(0,a.jsx)(g,{children:(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)(v,{htmlFor:"idle-timeout",className:"text-sm font-medium",children:"Idle timeout duration:"}),(0,a.jsxs)(eE,{value:c.toString(),onValueChange:e=>m(parseInt(e)),children:[(0,a.jsx)(eI,{id:"idle-timeout",className:"w-48",children:(0,a.jsx)(eP,{})}),(0,a.jsx)(eL,{children:[5,10,15,20,30].map(e=>(0,a.jsxs)(eU,{value:e.toString(),children:[e," minutes"]},e))})]})]})})]})}),(0,a.jsxs)(eu,{value:"projects",className:"space-y-6",children:[(0,a.jsxs)(u,{children:[(0,a.jsx)(h,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(x,{children:"Projects"}),(0,a.jsx)(p,{children:"Manage project visibility, custom names, and URLs"})]}),(0,a.jsx)("div",{className:"flex items-center gap-2",children:(0,a.jsxs)(S,{variant:"outline",children:[e6.length," of ",e3.length," projects"]})})]})}),(0,a.jsxs)(g,{children:[(0,a.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[(0,a.jsxs)("div",{className:"flex-1 relative",children:[(0,a.jsx)(eZ.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),(0,a.jsx)(f,{placeholder:"Search projects or URLs...",value:L,onChange:e=>U(e.target.value),className:"pl-10"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(eY,{id:"show-ignored",checked:ef,onCheckedChange:e=>ej(e)}),(0,a.jsx)(v,{htmlFor:"show-ignored",className:"text-sm cursor-pointer",children:"Show ignored"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(eY,{id:"group-by-client",checked:ey,onCheckedChange:e=>eN(e)}),(0,a.jsx)(v,{htmlFor:"group-by-client",className:"text-sm cursor-pointer",children:"Group by client"})]}),(0,a.jsxs)(eE,{value:ek,onValueChange:e=>eS(e),children:[(0,a.jsx)(eI,{className:"w-36",children:(0,a.jsx)(eP,{})}),(0,a.jsxs)(eL,{children:[(0,a.jsx)(eU,{value:"comfortable",children:"Comfortable"}),(0,a.jsx)(eU,{value:"compact",children:"Compact"})]})]}),(0,a.jsxs)(eE,{value:ep.toString(),onValueChange:e=>eg(Number(e)),children:[(0,a.jsx)(eI,{className:"w-32",children:(0,a.jsx)(eP,{})}),(0,a.jsxs)(eL,{children:[(0,a.jsx)(eU,{value:"10",children:"10 / page"}),(0,a.jsx)(eU,{value:"25",children:"25 / page"}),(0,a.jsx)(eU,{value:"50",children:"50 / page"}),(0,a.jsx)(eU,{value:"100",children:"100 / page"})]})]})]}),(0,a.jsx)("div",{className:"rounded-md border",children:(0,a.jsxs)(eW,{children:[(0,a.jsx)(eH,{children:(0,a.jsxs)(eV,{className:"compact"===ek?"text-xs":"",children:[(0,a.jsx)(e_,{children:"Project Name"}),(0,a.jsx)(e_,{children:"Custom Name"}),(0,a.jsx)(e_,{children:"Client"}),(0,a.jsx)(e_,{className:"w-28",children:"Duration"}),(0,a.jsx)(e_,{children:"URLs"}),(0,a.jsx)(e_,{className:"w-32",children:"Actions"})]})}),(0,a.jsx)(eJ,{children:0===tt.length?(0,a.jsx)(eV,{children:(0,a.jsx)(eB,{colSpan:6,className:"text-center text-gray-500 py-8",children:L?"No projects match your search.":"No projects found."})}):ey?e8.flatMap(e=>{let t=ew.has(e.clientName),s=e.projects.slice(e9,te);return[(0,a.jsx)(eV,{className:"bg-gray-100 hover:bg-gray-200 cursor-pointer",onClick:()=>{var t;return t=e.clientName,void eb(e=>{let s=new Set(e);return s.has(t)?s.delete(t):s.add(t),s})},children:(0,a.jsx)(eB,{colSpan:6,className:"font-semibold",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[t?(0,a.jsx)(eM.A,{className:"w-4 h-4"}):(0,a.jsx)(eC.A,{className:"w-4 h-4"}),(0,a.jsxs)("span",{children:[e.clientName," (",e.projects.length," project",1!==e.projects.length?"s":"",")"]})]})})},"group-".concat(e.clientName)),...t?[]:s.map(e=>{var t,s;return(0,a.jsxs)(eV,{className:"".concat(e.isIgnored?"bg-orange-50":""," ").concat("compact"===ek?"text-xs":""),children:[(0,a.jsx)(eB,{children:(0,a.jsxs)("div",{className:"flex items-center gap-2 pl-6",children:[(0,a.jsx)("div",{className:"w-2 h-2 rounded-full ".concat(e.isIgnored?"bg-orange-500":"bg-green-500")}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium",children:e.name}),e.isIgnored&&e.ignoredAt&&(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:["Ignored ",new Date(e.ignoredAt).toLocaleDateString()]})]})]})}),(0,a.jsx)(eB,{children:_===e.name?(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(f,{value:q,onChange:e=>Y(e.target.value),placeholder:"Enter custom name",className:"h-8",autoFocus:!0,onKeyDown:t=>{"Enter"===t.key?to(e.name):"Escape"===t.key&&tc()}}),(0,a.jsx)(d,{size:"sm",onClick:()=>to(e.name),disabled:!q.trim()||J,className:"h-8 px-2",children:(0,a.jsx)(eQ.A,{className:"w-4 h-4"})}),(0,a.jsx)(d,{size:"sm",variant:"outline",onClick:tc,className:"h-8 px-2",children:(0,a.jsx)(C.A,{className:"w-4 h-4"})})]}):(0,a.jsx)("span",{className:"text-sm cursor-pointer hover:bg-gray-100 px-2 py-1 rounded -mx-2",onClick:()=>tl(e.name),title:"Click to edit custom name",children:eF(e.name)?null==(t=eF(e.name))?void 0:t.customName:(0,a.jsx)("span",{className:"text-gray-400 italic",children:"Not set"})})}),(0,a.jsx)(eB,{children:K===e.name?(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(f,{value:G,onChange:e=>Z(e.target.value),placeholder:"Enter client name",className:"h-8",autoFocus:!0,onKeyDown:t=>{"Enter"===t.key?tm(e.name):"Escape"===t.key&&tu()}}),(0,a.jsx)(d,{size:"sm",onClick:()=>tm(e.name),disabled:!G.trim()||J,className:"h-8 px-2",children:(0,a.jsx)(eQ.A,{className:"w-4 h-4"})}),(0,a.jsx)(d,{size:"sm",variant:"outline",onClick:tu,className:"h-8 px-2",children:(0,a.jsx)(C.A,{className:"w-4 h-4"})})]}):(0,a.jsx)("span",{className:"text-sm cursor-pointer hover:bg-gray-100 px-2 py-1 rounded -mx-2",onClick:()=>td(e.name),title:"Click to assign/edit client",children:ez(e.name)?null==(s=ez(e.name))?void 0:s.clientName:(0,a.jsx)("span",{className:"text-gray-400 italic",children:"Not set"})})}),(0,a.jsx)(eB,{children:e.duration>0?(0,a.jsxs)("div",{className:"flex items-center gap-1 text-sm",children:[(0,a.jsx)(W.A,{className:"w-3 h-3"}),eO(e.duration)]}):(0,a.jsx)("span",{className:"text-gray-400 text-sm",children:"-"})}),(0,a.jsx)(eB,{children:(0,a.jsxs)("div",{className:"space-y-1",children:[e.urls.map(e=>(0,a.jsxs)("div",{className:"flex items-center gap-1 text-xs",children:[(0,a.jsx)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"text-teal-600 hover:text-teal-800 truncate max-w-[200px] inline-block",title:e.url,children:e.url}),(0,a.jsx)(d,{variant:"ghost",size:"sm",onClick:()=>th(e),className:"h-5 w-5 p-0",children:(0,a.jsx)(e$.A,{className:"h-3 w-3"})}),(0,a.jsx)(d,{variant:"ghost",size:"sm",onClick:()=>tf(e.id),className:"h-5 w-5 p-0 text-red-500 hover:text-red-600",disabled:J,children:(0,a.jsx)(e0.A,{className:"h-3 w-3"})})]},e.id)),en===e.name?(0,a.jsxs)("div",{className:"flex items-center gap-1 mt-1",children:[(0,a.jsx)(f,{value:el,onChange:e=>eo(e.target.value),placeholder:"https://example.com",className:"h-7 text-xs",autoFocus:!0,onKeyDown:t=>{"Enter"===t.key?tj(e.name):"Escape"===t.key&&ty()}}),(0,a.jsx)(d,{size:"sm",onClick:()=>tj(e.name),disabled:!el.trim()||J,className:"h-7 px-2",children:(0,a.jsx)(eQ.A,{className:"w-3 h-3"})}),(0,a.jsx)(d,{size:"sm",variant:"outline",onClick:ty,className:"h-7 px-2",children:(0,a.jsx)(C.A,{className:"w-3 h-3"})})]}):0===e.urls.length?(0,a.jsx)("span",{className:"text-xs text-gray-400",children:"No URLs"}):null]})}),(0,a.jsx)(eB,{children:(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(d,{size:"sm",variant:"ghost",onClick:()=>ti(e),disabled:J,className:"h-7 px-2",title:e.isIgnored?"Show project":"Ignore project",children:e.isIgnored?(0,a.jsx)(eX.A,{className:"w-4 h-4 text-orange-600"}):(0,a.jsx)(e1.A,{className:"w-4 h-4 text-green-600"})}),(0,a.jsxs)(d,{size:"sm",variant:"ghost",onClick:()=>{ei(e.name),eo("")},className:"h-7 px-2 text-xs",title:"Add URL",disabled:en===e.name,children:[(0,a.jsx)(e4.A,{className:"w-3 h-3 mr-1"}),"Add URL"]})]})})]},e.name)})]}):tt.map(e=>{var t,s;return(0,a.jsxs)(eV,{className:"".concat(e.isIgnored?"bg-orange-50":""," ").concat("compact"===ek?"text-xs":""),children:[(0,a.jsx)(eB,{children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-2 h-2 rounded-full ".concat(e.isIgnored?"bg-orange-500":"bg-green-500")}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium",children:e.name}),e.isIgnored&&e.ignoredAt&&(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:["Ignored ",new Date(e.ignoredAt).toLocaleDateString()]})]})]})}),(0,a.jsx)(eB,{children:_===e.name?(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(f,{value:q,onChange:e=>Y(e.target.value),placeholder:"Enter custom name",className:"h-8",autoFocus:!0,onKeyDown:t=>{"Enter"===t.key?to(e.name):"Escape"===t.key&&tc()}}),(0,a.jsx)(d,{size:"sm",onClick:()=>to(e.name),disabled:!q.trim()||J,className:"h-8 px-2",children:(0,a.jsx)(eQ.A,{className:"w-4 h-4"})}),(0,a.jsx)(d,{size:"sm",variant:"outline",onClick:tc,className:"h-8 px-2",children:(0,a.jsx)(C.A,{className:"w-4 h-4"})})]}):(0,a.jsx)("span",{className:"text-sm cursor-pointer hover:bg-gray-100 px-2 py-1 rounded -mx-2",onClick:()=>tl(e.name),title:"Click to edit custom name",children:eF(e.name)?null==(t=eF(e.name))?void 0:t.customName:(0,a.jsx)("span",{className:"text-gray-400 italic",children:"Not set"})})}),(0,a.jsx)(eB,{children:K===e.name?(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(f,{value:G,onChange:e=>Z(e.target.value),placeholder:"Enter client name",className:"h-8",autoFocus:!0,onKeyDown:t=>{"Enter"===t.key?tm(e.name):"Escape"===t.key&&tu()}}),(0,a.jsx)(d,{size:"sm",onClick:()=>tm(e.name),disabled:!G.trim()||J,className:"h-8 px-2",children:(0,a.jsx)(eQ.A,{className:"w-4 h-4"})}),(0,a.jsx)(d,{size:"sm",variant:"outline",onClick:tu,className:"h-8 px-2",children:(0,a.jsx)(C.A,{className:"w-4 h-4"})})]}):(0,a.jsx)("span",{className:"text-sm cursor-pointer hover:bg-gray-100 px-2 py-1 rounded -mx-2",onClick:()=>td(e.name),title:"Click to assign/edit client",children:ez(e.name)?null==(s=ez(e.name))?void 0:s.clientName:(0,a.jsx)("span",{className:"text-gray-400 italic",children:"Not set"})})}),(0,a.jsx)(eB,{children:e.duration>0?(0,a.jsxs)("div",{className:"flex items-center gap-1 text-sm",children:[(0,a.jsx)(W.A,{className:"w-3 h-3"}),eO(e.duration)]}):(0,a.jsx)("span",{className:"text-gray-400 text-sm",children:"-"})}),(0,a.jsx)(eB,{children:(0,a.jsxs)("div",{className:"space-y-1",children:[e.urls.map(e=>(0,a.jsxs)("div",{className:"flex items-center gap-1 text-xs",children:[(0,a.jsx)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"text-teal-600 hover:text-teal-800 truncate max-w-[200px] inline-block",title:e.url,children:e.url}),(0,a.jsx)(d,{variant:"ghost",size:"sm",onClick:()=>th(e),className:"h-5 w-5 p-0",children:(0,a.jsx)(e$.A,{className:"h-3 w-3"})}),(0,a.jsx)(d,{variant:"ghost",size:"sm",onClick:()=>tf(e.id),className:"h-5 w-5 p-0 text-red-500 hover:text-red-600",disabled:J,children:(0,a.jsx)(e0.A,{className:"h-3 w-3"})})]},e.id)),en===e.name?(0,a.jsxs)("div",{className:"flex items-center gap-1 mt-1",children:[(0,a.jsx)(f,{value:el,onChange:e=>eo(e.target.value),placeholder:"https://example.com",className:"h-7 text-xs",autoFocus:!0,onKeyDown:t=>{"Enter"===t.key?tj(e.name):"Escape"===t.key&&ty()}}),(0,a.jsx)(d,{size:"sm",onClick:()=>tj(e.name),disabled:!el.trim()||J,className:"h-7 px-2",children:(0,a.jsx)(eQ.A,{className:"w-3 h-3"})}),(0,a.jsx)(d,{size:"sm",variant:"outline",onClick:ty,className:"h-7 px-2",children:(0,a.jsx)(C.A,{className:"w-3 h-3"})})]}):0===e.urls.length?(0,a.jsx)("span",{className:"text-xs text-gray-400",children:"No URLs"}):null]})}),(0,a.jsx)(eB,{children:(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(d,{size:"sm",variant:"ghost",onClick:()=>ti(e),disabled:J,className:"h-7 px-2",title:e.isIgnored?"Show project":"Ignore project",children:e.isIgnored?(0,a.jsx)(eX.A,{className:"w-4 h-4 text-orange-600"}):(0,a.jsx)(e1.A,{className:"w-4 h-4 text-green-600"})}),(0,a.jsxs)(d,{size:"sm",variant:"ghost",onClick:()=>{ei(e.name),eo("")},className:"h-7 px-2 text-xs",title:"Add URL",disabled:en===e.name,children:[(0,a.jsx)(e4.A,{className:"w-3 h-3 mr-1"}),"Add URL"]})]})})]},e.name)})})]})}),e7>1&&(0,a.jsxs)("div",{className:"flex items-center justify-between mt-4",children:[(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:["Showing ",e9+1,"-",Math.min(te,e6.length)," of ",e6.length," projects"]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(d,{variant:"outline",size:"sm",onClick:()=>ex(e=>Math.max(1,e-1)),disabled:1===eh,children:"Previous"}),(0,a.jsx)("div",{className:"flex items-center gap-1",children:Array.from({length:Math.min(5,e7)},(e,t)=>{let s;return s=e7<=5||eh<=3?t+1:eh>=e7-2?e7-4+t:eh-2+t,(0,a.jsx)(d,{variant:eh===s?"default":"outline",size:"sm",onClick:()=>ex(s),className:"w-8 h-8 p-0",children:s},s)})}),(0,a.jsx)(d,{variant:"outline",size:"sm",onClick:()=>ex(e=>Math.min(e7,e+1)),disabled:eh===e7,children:"Next"})]})]})]})]}),(0,a.jsx)(A,{open:Q,onOpenChange:tp,children:(0,a.jsxs)(P,{className:"sm:max-w-[500px]",children:[(0,a.jsx)(I,{children:(0,a.jsx)(R,{children:ee?"Edit Project URL":"Add Project URL"})}),(0,a.jsxs)("form",{onSubmit:tg,children:[(0,a.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,a.jsx)("label",{htmlFor:"url-project",className:"text-right font-medium",children:"Project"}),(0,a.jsx)("div",{className:"col-span-3",children:(0,a.jsxs)(eE,{value:ea.project,onValueChange:e=>er({...ea,project:e}),children:[(0,a.jsx)(eI,{children:(0,a.jsx)(eP,{placeholder:"Select a project"})}),(0,a.jsx)(eL,{children:eq.map(e=>(0,a.jsx)(eU,{value:e,children:eR(e)},e))})]})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,a.jsx)("label",{htmlFor:"url-input",className:"text-right font-medium",children:"URL"}),(0,a.jsx)(f,{id:"url-input",value:ea.url,onChange:e=>er({...ea,url:e.target.value}),className:"col-span-3",placeholder:"https://example.com",required:!0})]})]}),(0,a.jsxs)(O,{children:[(0,a.jsx)(d,{type:"button",variant:"outline",onClick:()=>tp(!1),children:"Cancel"}),(0,a.jsx)(d,{type:"submit",disabled:J,children:ee?"Update":"Add"})]})]})]})})]})]})]})}function e5(e){let{statsData:t,ignoredProjects:s,projectCustomNames:r,projectClients:n,projectUrls:i,commits:l,wrikeProjects:o,wrikeProjectsLoading:c,wrikeProjectMappings:d,currentWeek:m,idleTimeoutMinutes:u,onIdleTimeoutChange:h,onAddIgnoredProject:x,onRemoveIgnoredProject:p,onSaveProjectCustomName:g,onRemoveProjectCustomName:f,onSaveProjectClient:j,onRemoveProjectClient:y,onCreateUrl:v,onUpdateUrl:N,onDeleteUrl:w,onFetchWrikeProjects:b,onSaveWrikeMapping:k,activeTab:S,onTabChange:T}=e;return(0,a.jsxs)(ec,{value:S,onValueChange:T,className:"space-y-4",children:[(0,a.jsxs)(ed,{children:[(0,a.jsxs)(em,{value:"timesheet","data-tour":"timesheet-tab",children:[(0,a.jsx)(en.A,{className:"w-4 h-4 mr-2"}),"Weekly Timesheet"]}),(0,a.jsxs)(em,{value:"daily","data-tour":"daily-details-tab",children:[(0,a.jsx)(W.A,{className:"w-4 h-4 mr-2"}),"Daily Details"]}),(0,a.jsxs)(em,{value:"settings","data-tour":"settings-tab",children:[(0,a.jsx)(es.A,{className:"w-4 h-4 mr-2"}),"Settings"]})]}),(0,a.jsx)(eu,{value:"timesheet",children:(0,a.jsx)(eS,{statsData:t,currentWeek:m,idleTimeoutMinutes:u,ignoredProjects:s.map(e=>e.projectName),projectCustomNames:r,projectClients:n,commits:l,wrikeProjectMappings:d})}),(0,a.jsx)(eu,{value:"daily",children:(0,a.jsx)(ez,{statsData:t,currentWeek:m,idleTimeoutMinutes:u,ignoredProjects:s.map(e=>e.projectName)})}),(0,a.jsx)(eu,{value:"settings",children:(0,a.jsx)(e2,{statsData:t,ignoredProjects:s,projectCustomNames:r,projectClients:n,projectUrls:i,currentWeek:m,idleTimeoutMinutes:u,onIdleTimeoutChange:h,onAddIgnoredProject:x,onRemoveIgnoredProject:p,onSaveProjectCustomName:g,onRemoveProjectCustomName:f,onSaveProjectClient:j,onRemoveProjectClient:y,onCreateUrl:v,onUpdateUrl:N,onDeleteUrl:w})})]})}var e3=s(4579);function e6(e){let{onComplete:t,onSkip:s}=e,a=(0,r.useRef)(null);return(0,r.useEffect)(()=>{let e=[{element:"body",popover:{title:"Welcome to PhpStorm Time Tracker",description:"Let's take a quick tour to help you get started. This will only take a minute to show you the main features and views of the application.",side:"top",align:"center"}},{element:"[data-tour='header']",popover:{title:"Header Controls",description:"Access your settings, refresh data, view license information, and logout from here. You can also adjust idle timeout and storage preferences.",side:"bottom",align:"center"}},{element:"[data-tour='week-navigation']",popover:{title:"Week Navigation",description:"Navigate between different weeks to view your time tracking data. Click the arrows to move forward or backward in time.",side:"bottom",align:"center"}},{element:"[data-tour='quick-stats']",popover:{title:"Quick Stats Overview",description:"Get a quick overview of your key metrics for the selected week, including total hours, active projects, and productivity insights.",side:"bottom",align:"center"}},{element:"[data-tour='timesheet-tab']",popover:{title:"Weekly Timesheet View",description:"This is your main timesheet view showing all projects and hours for the week. Use this to track time across different projects and days.",side:"top",align:"start"}},{element:"[data-tour='daily-details-tab']",popover:{title:"Daily Details View",description:"Switch to this tab to see a detailed breakdown of your activities by day, including individual sessions, files worked on, and websites visited.",side:"top",align:"start"}},{element:"[data-tour='settings-tab']",popover:{title:"Settings & Configuration",description:"Manage your projects here: hide/show projects, set custom names, assign clients, and configure project URLs. This is where you customize your tracking experience.",side:"top",align:"start"}},{element:"body",popover:{title:"You're All Set!",description:"That's it! You now know the main features of the Time Tracker. Start tracking your time and manage your projects efficiently. You can restart this tour anytime from the help button in the header.",side:"top",align:"center"}}],r=(0,e3.B)({showProgress:!0,steps:e,onDestroyStarted:()=>{r.getActiveIndex()!==e.length-1&&r.hasNextStep()?s():t(),r.destroy()},popoverClass:"driverjs-theme",progressText:"{{current}} of {{total}}",nextBtnText:"Next",prevBtnText:"Previous",doneBtnText:"Finish"});return a.current=r,r.drive(),()=>{a.current&&a.current.destroy()}},[t,s]),null}s(2516);let e8=0,e7=new Map,e9=e=>{if(e7.has(e))return;let t=setTimeout(()=>{e7.delete(e),ts({type:"REMOVE_TOAST",toastId:e})},1e6);e7.set(e,t)},te=[],tt={toasts:[]};function ts(e){tt=((e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?e9(s):e.toasts.forEach(e=>{e9(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}})(tt,e),te.forEach(e=>{e(tt)})}function ta(e){let{...t}=e,s=(e8=(e8+1)%Number.MAX_SAFE_INTEGER).toString(),a=()=>ts({type:"DISMISS_TOAST",toastId:s});return ts({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:e=>{e||a()}}}),{id:s,dismiss:a,update:e=>ts({type:"UPDATE_TOAST",toast:{...e,id:s}})}}class tr{setBearerToken(e){this.bearerToken=e}async request(e){if(!this.bearerToken)throw Error("Wrike bearer token not configured");let t=this.useProxy?"".concat(this.baseUrl).concat(e):"https://www.wrike.com/api/v4".concat(e),s={"Content-Type":"application/json"};this.useProxy?s["X-Wrike-Token"]=this.bearerToken:s.Authorization="Bearer ".concat(this.bearerToken);let a=await fetch(t,{method:"GET",headers:s});if(!a.ok){let e="Wrike API error: ".concat(a.status," ").concat(a.statusText);try{let t=await a.text();if(t){let s=JSON.parse(t);s.errorDescription?e=s.errorDescription:s.error&&(e=s.error)}}catch(e){}throw 401===a.status?e="Invalid Wrike bearer token. Please check that your token is correct and hasn't expired.":404===a.status&&(e="Wrike API endpoint not found. The backend proxy may not be running."),Error(e)}return a.json()}async getProjects(){try{return(await this.request("/folders?project=true")).data.filter(e=>e.project).map(e=>{var t;return{id:e.id,title:e.title,permalink:e.permalink,customStatusId:null==(t=e.project)?void 0:t.customStatusId}})}catch(e){throw console.error("Failed to fetch Wrike projects:",e),e}}async getProjectById(e){try{let t=(await this.request("/folders/".concat(e))).data[0];if(!t||!t.project)return null;return{id:t.id,title:t.title,permalink:t.permalink,customStatusId:t.project.customStatusId}}catch(t){return console.error("Failed to fetch Wrike project ".concat(e,":"),t),null}}async testConnection(){try{return await this.request("/contacts?me=true"),!0}catch(e){return console.error("Wrike connection test failed:",e),!1}}constructor(e,t=!0){this.bearerToken=null,this.useProxy=t,this.baseUrl="/api/wrike",e&&(this.bearerToken=e)}}let tn=null,ti=()=>{let e={},t=["Dashboard Redesign","API Integration","Mobile App","Documentation","Bug Fixes"],s=new Date,a=["src/components/dashboard.tsx","src/hooks/use-time-tracking-data.ts","src/pages/api/stats.ts","src/components/header.tsx","src/utils/date-utils.ts","src/components/project-detail-view.tsx","src/hooks/use-time-calculations.ts","package.json","README.md","src/styles/globals.css"],r=["https://github.com/company/project","https://stackoverflow.com/questions/react-hooks","https://docs.nextjs.org/api-reference","https://tailwindcss.com/docs","https://localhost:3000/dashboard"];for(let n=0;n<14;n++){let i=new Date(s);i.setDate(i.getDate()-n);let l=ey(i);e[l]={};let o=Math.floor(3*Math.random())+1;t.slice(0,o).forEach(t=>{let s=[],n=Math.floor(4*Math.random())+1;for(let e=0;e<n;e++){let e=9+Math.floor(8*Math.random()),t=Math.floor(120*Math.random())+30,n=new Date(i);n.setHours(e,Math.floor(60*Math.random()));let l=new Date(n.getTime()+6e4*t),o=Math.random()>.3?"coding":"browsing",c={start:n.toISOString(),end:l.toISOString(),type:o};if("coding"===o)c.file=a[Math.floor(Math.random()*a.length)];else{let e=r[Math.floor(Math.random()*r.length)];c.url=e,c.host=new URL(e).hostname}s.push(c)}let o=s.reduce((e,t)=>e+(new Date(t.end).getTime()-new Date(t.start).getTime())/1e3,0);e[l][t]={duration:o,sessions:s}})}return e},tl=()=>[{id:"1",project:"Dashboard Redesign",url:"https://github.com/company/dashboard-redesign",description:"Main repository for dashboard redesign project"},{id:"2",project:"Dashboard Redesign",url:"https://figma.com/dashboard-mockups",description:"Design mockups and wireframes"},{id:"3",project:"API Integration",url:"https://api-docs.company.com",description:"API documentation and endpoints"},{id:"4",project:"API Integration",url:"https://github.com/company/api-integration",description:"Integration code repository"},{id:"5",project:"Mobile App",url:"https://github.com/company/mobile-app",description:"React Native mobile application"},{id:"6",project:"Documentation",url:"https://docs.company.com",description:"Project documentation site"}],to=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],[s,a]=(0,r.useState)({}),[n,i]=(0,r.useState)({}),[l,o]=(0,r.useState)([]),[c,d]=(0,r.useState)([]),[m,u]=(0,r.useState)([]),[h,x]=(0,r.useState)([]),[p,g]=(0,r.useState)([]),[f,j]=(0,r.useState)([]),[y,v]=(0,r.useState)([]),[N,w]=(0,r.useState)(!1),[b,k]=(0,r.useState)(!1),[S,T]=(0,r.useState)(null),[C,A]=(0,r.useState)(10),[D,E]=(0,r.useState)(!1),[P,I]=(0,r.useState)("cloud"),O=window.location.hostname.includes("v0.dev")||window.location.hostname.includes("vusercontent.net")||t;(0,r.useEffect)(()=>{i(((e,t)=>{if(0===t.length)return e;let s={};return Object.entries(e).forEach(e=>{let[a,r]=e,n={};Object.entries(r).forEach(e=>{let[s,a]=e;t.includes(s)||(n[s]=a)}),Object.keys(n).length>0&&(s[a]=n)}),s})(s,c.map(e=>e.projectName)))},[s,c]);let R=async()=>{if(!e){a({}),i({}),k(!1);return}try{if(k(!0),T(null),O)return void setTimeout(()=>{let e=ti();a(e),k(!1)},1e3);let e=new AbortController,t=setTimeout(()=>e.abort(),5e3);try{let s=await fetch("".concat("","/api/stats"),{signal:e.signal});if(clearTimeout(t),!s.ok)throw Error("HTTP error! status: ".concat(s.status));let r=await s.json(),n=(e=>{let t={};return Object.entries(e).forEach(e=>{let[s,a]=e,r=s;if(s.includes("T")&&(r=s.split("T")[0]),!/^\d{4}-\d{2}-\d{2}$/.test(r))return void console.warn("Invalid date format received from API: ".concat(s));t[r]=a}),t})(r);a(n)}catch(s){clearTimeout(t),console.warn("API not available, using fake data:",s);let e=ti();a(e)}}catch(e){console.warn("Error in fetchStats, using fake data:",e),a(ti())}finally{k(!1)}},L=async()=>{if(!e)return void o([]);try{if(T(null),O)return void o(tl());let e=new AbortController,t=setTimeout(()=>e.abort(),5e3);try{let s=await fetch("".concat("","/api/urls"),{signal:e.signal});if(clearTimeout(t),!s.ok)throw Error("HTTP error! status: ".concat(s.status));let a=await s.json();o(a)}catch(e){clearTimeout(t),console.warn("API not available for URLs, using fake data:",e),o(tl())}}catch(e){console.warn("Error fetching project URLs, using fake data:",e),o(tl())}},U=async()=>{if(!e)return void A(10);try{if(E(!0),O){let e=localStorage.getItem("idle-timeout-minutes");e&&A(Number(e));let t=localStorage.getItem("storage-type");t&&I(t),E(!1);return}let e=new AbortController,t=setTimeout(()=>e.abort(),5e3);try{let s=await fetch("".concat("","/api/settings"),{signal:e.signal});if(clearTimeout(t),!s.ok)throw Error("HTTP error! status: ".concat(s.status));let a=await s.json();A(a.idleTimeoutMinutes||10),I(a.storageType||"cloud")}catch(s){clearTimeout(t),console.warn("Settings API not available, using localStorage:",s);let e=localStorage.getItem("idle-timeout-minutes");e&&A(Number(e))}}catch(e){console.warn("Error fetching settings, using default:",e)}finally{E(!1)}},F=async t=>{if(e)try{if(E(!0),O){localStorage.setItem("idle-timeout-minutes",t.toString()),A(t),E(!1);return}let e=new AbortController,s=setTimeout(()=>e.abort(),5e3);try{let a=await fetch("".concat("","/api/settings"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({idleTimeoutMinutes:t}),signal:e.signal});if(clearTimeout(s),!a.ok)throw Error("HTTP error! status: ".concat(a.status));A(t),ta({title:"Settings Saved",description:"Idle timeout updated to ".concat(t," minutes")})}catch(e){clearTimeout(s),console.warn("Settings API not available, saving to localStorage:",e),localStorage.setItem("idle-timeout-minutes",t.toString()),A(t),ta({title:"Settings Saved Locally",description:"Idle timeout updated to ".concat(t," minutes (saved locally)")})}}catch(e){console.error("Error saving settings:",e),ta({title:"Error",description:"Failed to save idle timeout setting",variant:"destructive"})}finally{E(!1)}},M=async t=>{if(e)try{if(E(!0),O){localStorage.setItem("storage-type",t),I(t),E(!1);return}let e=new AbortController,s=setTimeout(()=>e.abort(),5e3);try{let a=await fetch("".concat("","/api/settings"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({idleTimeoutMinutes:C,storageType:t}),signal:e.signal});if(clearTimeout(s),!a.ok)throw Error("HTTP error! status: ".concat(a.status));I(t),ta({title:"Settings Saved",description:"Storage preference updated to ".concat(t)})}catch(e){clearTimeout(s),localStorage.setItem("storage-type",t),I(t),ta({title:"Settings Saved Locally",description:"Storage preference updated to ".concat(t," (saved locally)")})}}catch(e){console.error("Error saving storage type:",e),ta({title:"Error",description:"Failed to save storage preference",variant:"destructive"})}finally{E(!1)}},z=async t=>{if(e)try{if(O){let e={id:Date.now().toString(),project:t.project,url:t.url,description:t.description};o(t=>[...t,e]),ta({title:"Success",description:"Project URL has been created (preview mode)"});return}let e=await fetch("".concat("","/api/urls"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!e.ok)throw Error("HTTP error! status: ".concat(e.status));await L(),ta({title:"Success",description:"Project URL has been created"})}catch(e){ta({title:"Error",description:e instanceof Error?e.message:"Failed to create project URL",variant:"destructive"})}},W=async(t,s)=>{if(e)try{if(O){o(e=>e.map(e=>e.id===t?{...e,project:s.project,url:s.url,description:s.description}:e)),ta({title:"Success",description:"Project URL has been updated (preview mode)"});return}let e=await fetch("".concat("","/api/urls/").concat(t),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!e.ok)throw Error("HTTP error! status: ".concat(e.status));await L(),ta({title:"Success",description:"Project URL has been updated"})}catch(e){ta({title:"Error",description:e instanceof Error?e.message:"Failed to update project URL",variant:"destructive"})}},H=async t=>{if(e)try{if(O){o(e=>e.filter(e=>e.id!==t)),ta({title:"Success",description:"Project URL has been deleted (preview mode)"});return}let e=await fetch("".concat("","/api/urls/").concat(t),{method:"DELETE"});if(!e.ok)throw Error("HTTP error! status: ".concat(e.status));await L(),ta({title:"Success",description:"Project URL has been deleted"})}catch(e){ta({title:"Error",description:e instanceof Error?e.message:"Failed to delete project URL",variant:"destructive"})}},J=async()=>{if(!e)return void d([]);try{if(O){let e=localStorage.getItem("ignored-projects");e&&d(JSON.parse(e));return}let e=new AbortController,t=setTimeout(()=>e.abort(),5e3);try{let s=await fetch("".concat("","/api/ignored-projects"),{signal:e.signal});if(clearTimeout(t),!s.ok)throw Error("HTTP error! status: ".concat(s.status));let a=await s.json();d(a)}catch(s){clearTimeout(t),console.warn("Ignored projects API not available, using localStorage:",s);let e=localStorage.getItem("ignored-projects");e&&d(JSON.parse(e))}}catch(e){console.warn("Error fetching ignored projects:",e)}},V=async()=>{if(!e)return void u([]);try{if(O){let e=localStorage.getItem("project-custom-names");e&&u(JSON.parse(e));return}let e=new AbortController,t=setTimeout(()=>e.abort(),5e3);try{let s=await fetch("".concat("","/api/project-names"),{signal:e.signal});if(clearTimeout(t),!s.ok)throw Error("HTTP error! status: ".concat(s.status));let a=await s.json();u(a)}catch(s){clearTimeout(t),console.warn("Project custom names API not available, using localStorage:",s);let e=localStorage.getItem("project-custom-names");e&&u(JSON.parse(e))}}catch(e){console.warn("Error fetching project custom names:",e)}},_=async t=>{if(e)try{let e={id:Date.now().toString(),projectName:t,ignoredAt:new Date().toISOString()};if(O){let s=[...c,e];d(s),localStorage.setItem("ignored-projects",JSON.stringify(s)),ta({title:"Success",description:'"'.concat(t,'" has been ignored and will be excluded from all calculations')});return}let s=await fetch("".concat("","/api/ignored-projects"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({projectName:t})});if(!s.ok)throw Error("HTTP error! status: ".concat(s.status));await J(),ta({title:"Success",description:'"'.concat(t,'" has been ignored and will be excluded from all calculations')})}catch(e){ta({title:"Error",description:e instanceof Error?e.message:"Failed to ignore project",variant:"destructive"})}},B=async t=>{if(e)try{let e=c.find(e=>e.id===t),s=(null==e?void 0:e.projectName)||"Project";if(O){let e=c.filter(e=>e.id!==t);d(e),localStorage.setItem("ignored-projects",JSON.stringify(e)),ta({title:"Success",description:'"'.concat(s,'" has been unignored and will be included in calculations')});return}let a=await fetch("".concat("","/api/ignored-projects/").concat(t),{method:"DELETE"});if(!a.ok)throw Error("HTTP error! status: ".concat(a.status));await J(),ta({title:"Success",description:'"'.concat(s,'" has been unignored and will be included in calculations')})}catch(e){ta({title:"Error",description:e instanceof Error?e.message:"Failed to unignore project",variant:"destructive"})}},q=async(t,s)=>{if(e)try{let e=m.find(e=>e.projectName===t);if(O){let a;if(e)a=m.map(e=>e.projectName===t?{...e,customName:s,updatedAt:new Date().toISOString()}:e);else{let e={id:Date.now().toString(),projectName:t,customName:s,updatedAt:new Date().toISOString()};a=[...m,e]}u(a),localStorage.setItem("project-names",JSON.stringify(a)),ta({title:"Success",description:'Custom name for "'.concat(t,'" has been saved')});return}let a=e?"PUT":"POST",r=e?"".concat("","/api/project-names/").concat(e.id):"".concat("","/api/project-names"),n=await fetch(r,{method:a,headers:{"Content-Type":"application/json"},body:JSON.stringify({projectName:t,customName:s})});if(!n.ok)throw Error("HTTP error! status: ".concat(n.status));await V(),ta({title:"Success",description:'Custom name for "'.concat(t,'" has been saved')})}catch(e){ta({title:"Error",description:e instanceof Error?e.message:"Failed to save custom name",variant:"destructive"})}},Y=async t=>{if(e)try{let e=m.find(e=>e.id===t),s=(null==e?void 0:e.projectName)||"Project";if(O){let e=m.filter(e=>e.id!==t);u(e),localStorage.setItem("project-custom-names",JSON.stringify(e)),ta({title:"Success",description:'Custom name for "'.concat(s,'" has been removed')});return}let a=await fetch("".concat("","/api/project-names/").concat(t),{method:"DELETE"});if(!a.ok)throw Error("HTTP error! status: ".concat(a.status));await V(),ta({title:"Success",description:'Custom name for "'.concat(s,'" has been removed')})}catch(e){ta({title:"Error",description:e instanceof Error?e.message:"Failed to remove custom name",variant:"destructive"})}},K=async()=>{if(!e)return void x([]);try{if(O){let e=localStorage.getItem("project-clients");e&&x(JSON.parse(e));return}let e=new AbortController,t=setTimeout(()=>e.abort(),5e3);try{let s=await fetch("".concat("","/api/project-clients"),{signal:e.signal});if(clearTimeout(t),!s.ok)throw Error("HTTP error! status: ".concat(s.status));let a=await s.json();x(a)}catch(s){clearTimeout(t),console.warn("Project clients API not available, using localStorage:",s);let e=localStorage.getItem("project-clients");e&&x(JSON.parse(e))}}catch(e){console.warn("Error fetching project clients:",e)}},X=async(t,s)=>{if(e)try{let e=h.find(e=>e.projectName===t);if(O){let a;if(e)a=h.map(e=>e.projectName===t?{...e,clientName:s,updatedAt:new Date().toISOString()}:e);else{let e={id:Date.now().toString(),projectName:t,clientName:s,updatedAt:new Date().toISOString()};a=[...h,e]}x(a),localStorage.setItem("project-clients",JSON.stringify(a)),ta({title:"Success",description:'Client for "'.concat(t,'" has been saved')});return}let a=e?"PUT":"POST",r=e?"".concat("","/api/project-clients/").concat(e.id):"".concat("","/api/project-clients"),n=await fetch(r,{method:a,headers:{"Content-Type":"application/json"},body:JSON.stringify({projectName:t,clientName:s})});if(!n.ok)throw Error("HTTP error! status: ".concat(n.status));await K(),ta({title:"Success",description:'Client for "'.concat(t,'" has been saved')})}catch(e){ta({title:"Error",description:e instanceof Error?e.message:"Failed to save client",variant:"destructive"})}},G=async t=>{if(e)try{let e=h.find(e=>e.id===t),s=(null==e?void 0:e.projectName)||"Project";if(O){let e=h.filter(e=>e.id!==t);x(e),localStorage.setItem("project-clients",JSON.stringify(e)),ta({title:"Success",description:'Client for "'.concat(s,'" has been removed')});return}let a=await fetch("".concat("","/api/project-clients/").concat(t),{method:"DELETE"});if(!a.ok)throw Error("HTTP error! status: ".concat(a.status));await K(),ta({title:"Success",description:'Client for "'.concat(s,'" has been removed')})}catch(e){ta({title:"Error",description:e instanceof Error?e.message:"Failed to remove client",variant:"destructive"})}},Z=async()=>{if(!e)return void g([]);try{if(O){let e=localStorage.getItem("commits");e&&g(JSON.parse(e));return}let e=new AbortController,t=setTimeout(()=>e.abort(),5e3);try{let s=await fetch("".concat("","/api/commits"),{signal:e.signal});if(clearTimeout(t),!s.ok)throw Error("HTTP error! status: ".concat(s.status));let a=await s.json();g(a)}catch(s){clearTimeout(t),console.warn("Commits API not available, using localStorage:",s);let e=localStorage.getItem("commits");e&&g(JSON.parse(e))}}catch(e){console.warn("Error fetching commits:",e)}},Q=async t=>{if(!e||!t)return void j([]);try{w(!0),T(null);let e=(tn?t&&tn.setBearerToken(t):tn=new tr(t),tn),s=await e.getProjects();j(s)}catch(e){console.error("Error fetching Wrike projects:",e),j([]),ta({title:"Error",description:e instanceof Error?e.message:"Failed to fetch Wrike projects",variant:"destructive"})}finally{w(!1)}},$=async()=>{if(!e)return void v([]);try{if(O){let e=localStorage.getItem("wrike-project-mappings");e&&v(JSON.parse(e));return}let e=new AbortController,t=setTimeout(()=>e.abort(),5e3);try{let s=await fetch("".concat("","/api/wrike-mappings"),{signal:e.signal});if(clearTimeout(t),!s.ok)throw Error("HTTP error! status: ".concat(s.status));let a=await s.json();v(a)}catch(s){clearTimeout(t),console.warn("Wrike mappings API not available, using localStorage:",s);let e=localStorage.getItem("wrike-project-mappings");e&&v(JSON.parse(e))}}catch(e){console.warn("Error fetching Wrike project mappings:",e)}},ee=async(t,s)=>{if(e)try{let e=y.find(e=>e.projectName===t),a={id:(null==e?void 0:e.id)||Date.now().toString(),projectName:t,wrikeProjectId:s.id,wrikeProjectTitle:s.title,wrikePermalink:s.permalink,createdAt:(null==e?void 0:e.createdAt)||new Date().toISOString()};if(O){let r;r=e?y.map(e=>e.projectName===t?a:e):[...y,a],v(r),localStorage.setItem("wrike-project-mappings",JSON.stringify(r)),ta({title:"Success",description:'"'.concat(t,'" has been linked to Wrike project "').concat(s.title,'"')});return}let r=e?"PUT":"POST",n=e?"".concat("","/api/wrike-mappings/").concat(e.id):"".concat("","/api/wrike-mappings"),i=await fetch(n,{method:r,headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!i.ok)throw Error("HTTP error! status: ".concat(i.status));await $(),ta({title:"Success",description:'"'.concat(t,'" has been linked to Wrike project "').concat(s.title,'"')})}catch(e){ta({title:"Error",description:e instanceof Error?e.message:"Failed to save Wrike project mapping",variant:"destructive"})}},et=async t=>{if(e)try{let e=y.find(e=>e.projectName===t);if(!e)return;if(O){let e=y.filter(e=>e.projectName!==t);v(e),localStorage.setItem("wrike-project-mappings",JSON.stringify(e)),ta({title:"Success",description:'Wrike link for "'.concat(t,'" has been removed')});return}let s=await fetch("".concat("","/api/wrike-mappings/").concat(e.id),{method:"DELETE"});if(!s.ok)throw Error("HTTP error! status: ".concat(s.status));await $(),ta({title:"Success",description:'Wrike link for "'.concat(t,'" has been removed')})}catch(e){ta({title:"Error",description:e instanceof Error?e.message:"Failed to remove Wrike project mapping",variant:"destructive"})}};return(0,r.useEffect)(()=>{e&&(R(),L(),U(),J(),V(),K(),Z(),$())},[e]),{statsData:n,projectUrls:l,ignoredProjects:c,projectCustomNames:m,projectClients:h,commits:p,wrikeProjects:f,wrikeProjectMappings:y,wrikeProjectsLoading:N,loading:b,error:S,idleTimeoutMinutes:C,setIdleTimeoutMinutes:F,settingsLoading:D,fetchStats:R,fetchProjectUrls:L,fetchSettings:U,fetchIgnoredProjects:J,fetchProjectCustomNames:V,fetchProjectClients:K,fetchCommits:Z,fetchWrikeProjects:Q,fetchWrikeProjectMappings:$,saveWrikeProjectMapping:ee,removeWrikeProjectMapping:et,createProjectUrl:z,updateProjectUrl:W,deleteProjectUrl:H,addIgnoredProject:_,removeIgnoredProject:B,storageType:P,setStorageType:M,saveProjectCustomName:q,removeProjectCustomName:Y,saveProjectClient:X,removeProjectClient:G}},tc="mxo-time-tracker-onboarding-completed",td=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],[t,s]=(0,r.useState)(!0),[a,n]=(0,r.useState)(!0);return(0,r.useEffect)(()=>{(()=>{if(!e){s(!0),n(!1);return}try{n(!0);let e=localStorage.getItem(tc);s("true"===e)}catch(e){console.warn("Error fetching onboarding status:",e),s(!1)}finally{n(!1)}})()},[e]),{hasCompletedOnboarding:t,isLoading:a,markOnboardingComplete:()=>{if(e)try{localStorage.setItem(tc,"true"),s(!0)}catch(e){console.error("Error marking onboarding complete:",e)}},resetOnboarding:()=>{if(e)try{localStorage.setItem(tc,"false"),s(!1)}catch(e){console.error("Error resetting onboarding:",e)}}}};function tm(){let e=(0,n.useRouter)(),t=(0,n.useSearchParams)(),{isLicenseValid:s,isInitializing:i,validateLicense:l,logout:o,getLicenseInfo:c}=K(),u=c(),{hasCompletedOnboarding:h,isLoading:x,markOnboardingComplete:p,resetOnboarding:g}=td(s),[f,j]=(0,r.useState)(!1),y=t.get("tab")||"timesheet",v=t.get("week"),[N,w]=(0,r.useState)(()=>{if(v){let e=new Date(v);if(!isNaN(e.getTime()))return e}return new Date}),b=(0,r.useRef)(!1),{statsData:k,projectUrls:S,ignoredProjects:T,projectCustomNames:C,projectClients:A,commits:D,wrikeProjects:E,wrikeProjectsLoading:P,loading:I,error:O,idleTimeoutMinutes:R,setIdleTimeoutMinutes:L,storageType:U,setStorageType:F,settingsLoading:M,fetchStats:z,fetchProjectUrls:W,fetchWrikeProjects:H,createProjectUrl:J,updateProjectUrl:V,deleteProjectUrl:_,addIgnoredProject:B,removeIgnoredProject:q,saveProjectCustomName:Y,removeProjectCustomName:X,saveProjectClient:Q,removeProjectClient:$}=to(s,(null==u?void 0:u.isDemo)||!1);(0,r.useEffect)(()=>{if(v&&!b.current){let e=new Date(v);isNaN(e.getTime())||v!==N.toISOString().split("T")[0]&&w(e)}},[v,N]);let ee=s=>{b.current=!0;let a=new URLSearchParams(t.toString());s.tab&&a.set("tab",s.tab),s.week&&a.set("week",s.week);let r="".concat(window.location.pathname,"?").concat(a.toString());e.push(r,{scroll:!1}),setTimeout(()=>{b.current=!1},100)};return((0,r.useEffect)(()=>{x||h||I||!s||j(!0)},[x,h,I,s]),i)?(0,a.jsx)(Z,{}):s?I?(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 p-6 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(m.A,{className:"w-8 h-8 animate-spin mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Loading time tracking data..."})]})}):O?(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 p-6 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("p",{className:"text-red-600 mb-4",children:["Error: ",O]}),(0,a.jsxs)(d,{onClick:z,children:[(0,a.jsx)(m.A,{className:"w-4 h-4 mr-2"}),"Retry"]})]})}):(0,a.jsx)("div",{className:"min-h-screen bg-stone-50 p-6",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto space-y-6",children:[(0,a.jsx)(ei,{idleTimeoutMinutes:R,onIdleTimeoutChange:L,storageType:U,onStorageTypeChange:F,onRefresh:z,onLogout:o,onRestartTour:()=>{g(),j(!0)},settingsLoading:M}),(0,a.jsx)(el,{currentWeek:N,onNavigateWeek:e=>{let t;"current"===e?t=new Date:(t=new Date(N)).setDate(t.getDate()+("next"===e?7:-7)),w(t),ee({week:t.toISOString().split("T")[0]})}}),(0,a.jsx)(e5,{statsData:k,ignoredProjects:T,projectCustomNames:C,projectClients:A,projectUrls:S,commits:D,wrikeProjects:E,wrikeProjectsLoading:P,wrikeProjectMappings:[],currentWeek:N,idleTimeoutMinutes:R,onIdleTimeoutChange:L,onAddIgnoredProject:B,onRemoveIgnoredProject:q,onSaveProjectCustomName:Y,onRemoveProjectCustomName:X,onSaveProjectClient:Q,onRemoveProjectClient:$,onCreateUrl:J,onUpdateUrl:V,onDeleteUrl:_,onFetchWrikeProjects:H,onSaveWrikeMapping:()=>Promise.resolve(),activeTab:y,onTabChange:e=>{ee({tab:e})}}),f&&(0,a.jsx)(e6,{onComplete:()=>{p(),j(!1)},onSkip:()=>{p(),j(!1)}})]})}):(0,a.jsx)(G,{onValidate:l})}s(7645)},5016:(e,t,s)=>{"use strict";s.d(t,{cn:()=>n});var a=s(2821),r=s(5889);function n(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,r.QP)((0,a.$)(t))}},7645:()=>{},8871:(e,t,s)=>{Promise.resolve().then(s.bind(s,762))}},e=>{e.O(0,[852,643,851,441,255,358],()=>e(e.s=8871)),_N_E=e.O()}]);