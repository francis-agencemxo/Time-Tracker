(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{4921:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>j});var a=s(8081),n=s(2149),r=s(9651),i=s(5160),c=s(2486),o=s(3140),l=s(5064),m=s(8194),u=s(1567),d=s(2432),g=s(7086),h=s(7552);function j(){let e=(0,r.useRouter)(),t=(0,r.useSearchParams)(),{isLicenseValid:s,isInitializing:j,validateLicense:x,logout:N}=(0,h.Y)(),w=t.get("tab")||"timesheet",p=t.get("week"),[k,b]=(0,n.useState)(()=>{if(p){let e=new Date(p);if(!isNaN(e.getTime()))return e}return new Date}),f=(0,n.useRef)(!1),{statsData:v,projectUrls:T,ignoredProjects:P,projectCustomNames:S,wrikeProjects:C,wrikeProjectsLoading:y,loading:D,error:R,idleTimeoutMinutes:I,setIdleTimeoutMinutes:_,storageType:E,setStorageType:L,settingsLoading:O,fetchStats:W,fetchProjectUrls:A,fetchWrikeProjects:M,createProjectUrl:U,updateProjectUrl:Y,deleteProjectUrl:F,addIgnoredProject:V,removeIgnoredProject:Z,saveProjectCustomName:$,removeProjectCustomName:q}=(0,g.u)(s);(0,n.useEffect)(()=>{if(p&&!f.current){let e=new Date(p);isNaN(e.getTime())||p===k.toISOString().split("T")[0]||b(e)}},[p,k]);let z=s=>{f.current=!0;let a=new URLSearchParams(t.toString());s.tab&&a.set("tab",s.tab),s.week&&a.set("week",s.week);let n="".concat(window.location.pathname,"?").concat(a.toString());e.push(n,{scroll:!1}),setTimeout(()=>{f.current=!1},100)};return j?(0,a.jsx)(l.U,{}):s?D?(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 p-6 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(c.A,{className:"w-8 h-8 animate-spin mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Loading time tracking data..."})]})}):R?(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 p-6 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("p",{className:"text-red-600 mb-4",children:["Error: ",R]}),(0,a.jsxs)(i.$,{onClick:W,children:[(0,a.jsx)(c.A,{className:"w-4 h-4 mr-2"}),"Retry"]})]})}):(0,a.jsx)("div",{className:"min-h-screen bg-stone-50 p-6",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto space-y-6",children:[(0,a.jsx)(m.Y,{idleTimeoutMinutes:I,onIdleTimeoutChange:_,storageType:E,onStorageTypeChange:L,onRefresh:W,onLogout:N,settingsLoading:O}),(0,a.jsx)(u.p,{currentWeek:k,onNavigateWeek:e=>{let t;"current"===e?t=new Date:(t=new Date(k)).setDate(t.getDate()+("next"===e?7:-7)),b(t),z({week:t.toISOString().split("T")[0]})}}),(0,a.jsx)(d.Z,{statsData:v,ignoredProjects:P,projectCustomNames:S,wrikeProjects:C,wrikeProjectsLoading:y,currentWeek:k,idleTimeoutMinutes:I,onIdleTimeoutChange:_,onAddIgnoredProject:V,onRemoveIgnoredProject:Z,onSaveProjectCustomName:$,onRemoveProjectCustomName:q,onFetchWrikeProjects:M,activeTab:w,onTabChange:e=>{z({tab:e})}})]})}):(0,a.jsx)(o.N,{onValidate:x})}},9153:(e,t,s)=>{Promise.resolve().then(s.bind(s,4921))}},e=>{var t=t=>e(e.s=t);e.O(0,[882,190,506,497,954,358],()=>t(9153)),_N_E=e.O()}]);