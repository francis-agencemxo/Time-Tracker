(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{1057:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>p});var n=s(5155),r=s(2115),a=s(5695),o=s(7168),i=s(3904),c=s(3927),l=s(8768),m=s(1692),u=s(4135),d=s(3366),g=s(3811),j=s(3600),h=s(7416),x=s(836);function p(){let e=(0,a.useRouter)(),t=(0,a.useSearchParams)(),{isLicenseValid:s,isInitializing:p,validateLicense:N,logout:w}=(0,h.Y)(),{hasCompletedOnboarding:k,isLoading:v,markOnboardingComplete:f,resetOnboarding:b}=(0,x.z)(s),[C,P]=(0,r.useState)(!1),S=t.get("tab")||"timesheet",T=t.get("week"),[y,D]=(0,r.useState)(()=>{if(T){let e=new Date(T);if(!isNaN(e.getTime()))return e}return new Date}),R=(0,r.useRef)(!1),{statsData:I,projectUrls:U,ignoredProjects:E,projectCustomNames:L,projectClients:_,commits:W,wrikeProjects:M,wrikeProjectsLoading:O,loading:A,error:Y,idleTimeoutMinutes:z,setIdleTimeoutMinutes:F,storageType:V,setStorageType:Z,settingsLoading:$,fetchStats:q,fetchProjectUrls:B,fetchWrikeProjects:G,createProjectUrl:H,updateProjectUrl:J,deleteProjectUrl:K,addIgnoredProject:Q,removeIgnoredProject:X,saveProjectCustomName:ee,removeProjectCustomName:et,saveProjectClient:es,removeProjectClient:en}=(0,j.u)(s);(0,r.useEffect)(()=>{if(T&&!R.current){let e=new Date(T);isNaN(e.getTime())||T===y.toISOString().split("T")[0]||D(e)}},[T,y]);let er=s=>{R.current=!0;let n=new URLSearchParams(t.toString());s.tab&&n.set("tab",s.tab),s.week&&n.set("week",s.week);let r="".concat(window.location.pathname,"?").concat(n.toString());e.push(r,{scroll:!1}),setTimeout(()=>{R.current=!1},100)};return((0,r.useEffect)(()=>{v||k||A||!s||P(!0)},[v,k,A,s]),p)?(0,n.jsx)(l.U,{}):s?A?(0,n.jsx)("div",{className:"min-h-screen bg-gray-50 p-6 flex items-center justify-center",children:(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)(i.A,{className:"w-8 h-8 animate-spin mx-auto mb-4"}),(0,n.jsx)("p",{className:"text-gray-600",children:"Loading time tracking data..."})]})}):Y?(0,n.jsx)("div",{className:"min-h-screen bg-gray-50 p-6 flex items-center justify-center",children:(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsxs)("p",{className:"text-red-600 mb-4",children:["Error: ",Y]}),(0,n.jsxs)(o.$,{onClick:q,children:[(0,n.jsx)(i.A,{className:"w-4 h-4 mr-2"}),"Retry"]})]})}):(0,n.jsx)("div",{className:"min-h-screen bg-stone-50 p-6",children:(0,n.jsxs)("div",{className:"max-w-7xl mx-auto space-y-6",children:[(0,n.jsx)(m.Y,{idleTimeoutMinutes:z,onIdleTimeoutChange:F,storageType:V,onStorageTypeChange:Z,onRefresh:q,onLogout:w,onRestartTour:()=>{b(),P(!0)},settingsLoading:$}),(0,n.jsx)(u.p,{currentWeek:y,onNavigateWeek:e=>{let t;"current"===e?t=new Date:(t=new Date(y)).setDate(t.getDate()+("next"===e?7:-7)),D(t),er({week:t.toISOString().split("T")[0]})}}),(0,n.jsx)(d.Z,{statsData:I,ignoredProjects:E,projectCustomNames:L,projectClients:_,projectUrls:U,commits:W,wrikeProjects:M,wrikeProjectsLoading:O,wrikeProjectMappings:[],currentWeek:y,idleTimeoutMinutes:z,onIdleTimeoutChange:F,onAddIgnoredProject:Q,onRemoveIgnoredProject:X,onSaveProjectCustomName:ee,onRemoveProjectCustomName:et,onSaveProjectClient:es,onRemoveProjectClient:en,onCreateUrl:H,onUpdateUrl:J,onDeleteUrl:K,onFetchWrikeProjects:G,onSaveWrikeMapping:()=>Promise.resolve(),activeTab:S,onTabChange:e=>{er({tab:e})}}),C&&(0,n.jsx)(g.I,{onComplete:()=>{f(),P(!1)},onSkip:()=>{f(),P(!1)}})]})}):(0,n.jsx)(c.N,{onValidate:N})}s(1987)},8871:(e,t,s)=>{Promise.resolve().then(s.bind(s,1057))}},e=>{var t=t=>e(e.s=t);e.O(0,[111,776,149,812,441,684,358],()=>t(8871)),_N_E=e.O()}]);