(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{5016:(e,t,a)=>{"use strict";a.d(t,{cn:()=>n});var s=a(2821),r=a(5889);function n(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,r.QP)((0,s.$)(t))}},7645:()=>{},7990:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>tW});var s=a(5155),r=a(2115),n=a(63),i=a(2467),l=a(3101),o=a(5016);let c=(0,l.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",xs:"h-6 rounded-md px-1",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=r.forwardRef((e,t)=>{let{className:a,variant:r,size:n,asChild:l=!1,...d}=e,m=l?i.DX:"button";return(0,s.jsx)(m,{className:(0,o.cn)(c({variant:r,size:n,className:a})),ref:t,...d})});d.displayName="Button";var m=a(9559);let u=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,o.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...r})});u.displayName="Card";let h=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,o.cn)("flex flex-col space-y-1.5 p-6",a),...r})});h.displayName="CardHeader";let x=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,o.cn)("text-2xl font-semibold leading-none tracking-tight",a),...r})});x.displayName="CardTitle";let g=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,o.cn)("text-sm text-muted-foreground",a),...r})});g.displayName="CardDescription";let p=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,o.cn)("p-6 pt-0",a),...r})});p.displayName="CardContent",r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,o.cn)("flex items-center p-6 pt-0",a),...r})}).displayName="CardFooter";let f=r.forwardRef((e,t)=>{let{className:a,type:r,...n}=e;return(0,s.jsx)("input",{type:r,className:(0,o.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:t,...n})});f.displayName="Input";var j=a(489);let y=(0,l.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),v=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(j.b,{ref:t,className:(0,o.cn)(y(),a),...r})});v.displayName=j.b.displayName;let N=(0,l.F)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),b=r.forwardRef((e,t)=>{let{className:a,variant:r,...n}=e;return(0,s.jsx)("div",{ref:t,role:"alert",className:(0,o.cn)(N({variant:r}),a),...n})});b.displayName="Alert",r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("h5",{ref:t,className:(0,o.cn)("mb-1 font-medium leading-none tracking-tight",a),...r})}).displayName="AlertTitle";let w=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,o.cn)("text-sm [&_p]:leading-relaxed",a),...r})});w.displayName="AlertDescription";let k=(0,l.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function S(e){let{className:t,variant:a,...r}=e;return(0,s.jsx)("div",{className:(0,o.cn)(k({variant:a}),t),...r})}var T=a(9511),C=a(5229);let A=T.bL;T.l9;let E=T.ZL;T.bm;let D=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(T.hJ,{ref:t,className:(0,o.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...r})});D.displayName=T.hJ.displayName;let P=r.forwardRef((e,t)=>{let{className:a,children:r,...n}=e;return(0,s.jsxs)(E,{children:[(0,s.jsx)(D,{}),(0,s.jsxs)(T.UC,{ref:t,className:(0,o.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...n,children:[r,(0,s.jsxs)(T.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,s.jsx)(C.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});P.displayName=T.UC.displayName;let I=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,o.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...a})};I.displayName="DialogHeader";let O=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,o.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a})};O.displayName="DialogFooter";let R=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(T.hE,{ref:t,className:(0,o.cn)("text-lg font-semibold leading-none tracking-tight",a),...r})});R.displayName=T.hE.displayName;let L=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(T.VY,{ref:t,className:(0,o.cn)("text-sm text-muted-foreground",a),...r})});L.displayName=T.VY.displayName;var U=a(9708),M=a(523),F=a(2529),z=a(3327),W=a(6983),H=a(7910),J=a(5370),V=a(6132),_=a(5299),B=a(9068),q=a(5426);let Y="mxo-time-tracker-license",K=()=>{let[e,t]=(0,r.useState)(!1),[a,s]=(0,r.useState)(null),[n,i]=(0,r.useState)(!0);(0,r.useEffect)(()=>{(async()=>{let e=localStorage.getItem(Y);if(e){let a=localStorage.getItem("".concat(Y,"-last-checked")),r=new Date().getTime();if(a&&r-Number.parseInt(a)<864e5){t(!0),s(e),i(!1);return}await l(e)?(t(!0),s(e),localStorage.setItem("".concat(Y,"-last-checked"),r.toString())):(localStorage.removeItem(Y),localStorage.removeItem("".concat(Y,"-last-checked")))}i(!1)})()},[]);let l=async e=>{try{let t=await fetch("".concat("","/api/license"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({license_key:e.trim()})});if(!t.ok)return console.error("License validation API error:",t.status,t.statusText),!1;let a=await t.json();return!0===a.valid||"valid"===a.status}catch(t){return console.error("License validation error:",t),["MXO-DEV-2025"].includes(e.trim().toUpperCase())}},o=async()=>{try{if(a){let e=await fetch("".concat("","/api/license/logout"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({license_key:a.trim()})});e.ok||console.warn("Logout API error:",e.status,e.statusText)}}catch(e){console.error("Logout API error:",e)}finally{localStorage.removeItem(Y),localStorage.removeItem("".concat(Y,"-last-checked")),t(!1),s(null)}};return{isLicenseValid:e,validatedLicense:a,isInitializing:n,validateLicense:async e=>{let a=await l(e);if(!a)return console.warn("Invalid license key:",e),!1;if(a){let a=e.trim();return localStorage.setItem(Y,a),t(!0),s(a),!0}return!1},logout:o,getLicenseInfo:()=>{if(!a)return null;let e=["MXO-DEV-2025","MXO"].map(e=>e.toUpperCase()).includes(a.toUpperCase());return{key:a,type:e?"Demo":"Licensed",isDemo:e}},checkBackendAvailability:async()=>{try{return(await fetch("".concat("","/api/stats"),{method:"GET",signal:AbortSignal.timeout(3e3)})).ok}catch(e){return console.error("Backend health check failed:",e),!1}}}};var Z=a(9427),X=a(7494),G=a(5379);function Q(){let{theme:e,setTheme:t}=(0,G.D)(),[a,n]=r.useState(!1);return(r.useEffect(()=>{n(!0)},[]),a)?(0,s.jsxs)(d,{variant:"outline",size:"sm",onClick:()=>{t("dark"===e?"light":"dark")},className:"w-9 h-9 p-0 border-teal-200 hover:bg-teal-50 dark:border-teal-800 dark:hover:bg-teal-950 transition-all",title:"Switch to ".concat("dark"===e?"light":"dark"," mode"),children:[(0,s.jsx)(Z.A,{className:"h-[1.2rem] w-[1.2rem] rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0 text-teal-700 dark:text-teal-300"}),(0,s.jsx)(X.A,{className:"absolute h-[1.2rem] w-[1.2rem] rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100 text-teal-700 dark:text-teal-300"}),(0,s.jsx)("span",{className:"sr-only",children:"Toggle theme"})]}):(0,s.jsx)(d,{variant:"outline",size:"sm",className:"w-9 h-9 p-0",children:(0,s.jsx)("span",{className:"sr-only",children:"Toggle theme"})})}let $=["MXO-DEV-2025"];function ee(e){let{onValidate:t}=e,{checkBackendAvailability:a}=K(),[n,i]=(0,r.useState)(""),[l,o]=(0,r.useState)(""),[c,m]=(0,r.useState)(!1),[j,y]=(0,r.useState)(!1),[N,k]=(0,r.useState)(!1);(0,r.useEffect)(()=>{{let e=localStorage.getItem("privacy-acknowledged");k("true"===e),"true"!==e&&y(!0)}},[]),(0,r.useEffect)(()=>{{let e=new URLSearchParams(window.location.search),t=e.get("license")||e.get("licensekey");if(t){i(t),o("");let e=window.location.pathname;window.history.replaceState({},document.title,e),T(t)}}},[]);let T=async e=>{m(!0);try{await t(e.trim())||(await a()?o("The license key from login portal is invalid. Please try again."):o("Please open a PhpStorm project to access the dashboard."))}catch(e){o("Failed to validate license from login portal. Please check your connection.")}finally{m(!1)}},C=window.location.hostname.includes("v0.dev")||window.location.hostname.includes("vusercontent.net")||!1;console.log(window.location);let E=async e=>{e.preventDefault(),o(""),m(!0);try{await t(n.trim())||(await a()?o("Invalid license key. Please check your key and try again."):o("Please open a PhpStorm project to access the dashboard."))}catch(e){o("Failed to validate license. Please check your connection and try again.")}finally{m(!1)}};return(0,s.jsxs)("div",{className:"min-h-screen bg-stone-50 dark:bg-gray-900 flex items-center justify-center p-6 relative",children:[(0,s.jsx)("div",{className:"fixed top-6 right-6 z-50",children:(0,s.jsx)(Q,{})}),(0,s.jsx)(A,{open:j,onOpenChange:y,children:(0,s.jsxs)(P,{className:"max-w-2xl",children:[(0,s.jsxs)(I,{children:[(0,s.jsxs)(R,{className:"flex items-center gap-2 text-xl dark:text-gray-100",children:[(0,s.jsx)(U.A,{className:"h-6 w-6 text-teal-600 dark:text-teal-400"}),"Privacy & Data Storage"]}),(0,s.jsx)(L,{className:"dark:text-gray-400",children:"Understanding how your data is stored and protected"})]}),(0,s.jsxs)("div",{className:"space-y-4 py-4",children:[(0,s.jsxs)(b,{className:"border-teal-200 bg-teal-50 dark:border-teal-800 dark:bg-teal-950",children:[(0,s.jsx)(M.A,{className:"h-4 w-4 text-teal-600 dark:text-teal-400"}),(0,s.jsxs)(w,{className:"text-teal-800 dark:text-teal-200",children:[(0,s.jsx)("strong",{children:"All data stays on your computer."})," Your time tracking data is stored locally and never uploaded to any server."]})]}),(0,s.jsxs)("div",{className:"space-y-3 text-sm",children:[(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)(F.A,{className:"h-5 w-5 text-green-600 dark:text-green-400 shrink-0 mt-0.5"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium dark:text-gray-200",children:"Local Storage Only"}),(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"All time tracking data is stored in your browser's local storage on your computer. No data is sent to external servers."})]})]}),(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)(F.A,{className:"h-5 w-5 text-green-600 dark:text-green-400 shrink-0 mt-0.5"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium dark:text-gray-200",children:"No Cloud Synchronization"}),(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Your data remains private and is not synchronized or backed up to any cloud service."})]})]}),(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)(F.A,{className:"h-5 w-5 text-green-600 dark:text-green-400 shrink-0 mt-0.5"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium dark:text-gray-200",children:"License Validation Only"}),(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"The only external connection is for license validation. Your usage data and project information are never shared."})]})]}),(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)(z.A,{className:"h-5 w-5 text-blue-600 dark:text-blue-400 shrink-0 mt-0.5"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium dark:text-gray-200",children:"Your Responsibility"}),(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-2",children:"Since data is stored locally, you are responsible for backing up your data if needed."}),(0,s.jsxs)("p",{className:"text-gray-600 dark:text-gray-400 text-xs font-mono bg-gray-100 dark:bg-gray-800 p-2 rounded border dark:border-gray-700 break-all",children:["Database location: ",(()=>{let e=window.navigator.userAgent.toLowerCase(),t=e.includes("win"),a=e.includes("mac");return t?"%USERPROFILE%\\.cache\\phpstorm-time-tracker\\data.db":"~/.cache/phpstorm-time-tracker/data.db"})()]})]})]})]})]}),(0,s.jsx)(O,{children:(0,s.jsxs)(d,{onClick:()=>{localStorage.setItem("privacy-acknowledged","true"),k(!0),y(!1)},className:"w-full bg-teal-600 hover:bg-teal-700 dark:bg-teal-700 dark:hover:bg-teal-800",children:[(0,s.jsx)(F.A,{className:"w-4 h-4 mr-2"}),"I Understand - Continue"]})})]})}),(0,s.jsxs)("div",{className:"w-full max-w-md space-y-6",children:[(0,s.jsxs)("div",{className:"text-center space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-center gap-3",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-teal-600 to-teal-800 rounded-xl flex items-center justify-center shadow-lg",children:(0,s.jsx)(W.A,{className:"h-7 w-7 text-white"})}),(0,s.jsx)("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-amber-500 rounded-full flex items-center justify-center",children:(0,s.jsx)("div",{className:"w-2 h-2 bg-white rounded-full"})})]}),(0,s.jsx)(H.A,{className:"h-8 w-8 text-teal-600 dark:text-teal-400"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-teal-800 dark:text-teal-400",children:"Development Time Tracker"}),(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"License validation required"})]})]}),(0,s.jsxs)(u,{children:[(0,s.jsxs)(h,{children:[(0,s.jsxs)(x,{className:"flex items-center gap-2",children:[(0,s.jsx)(J.A,{className:"h-5 w-5"}),"Enter License Key"]}),(0,s.jsx)(g,{children:"Please enter your valid license key to access the time tracking dashboard."})]}),(0,s.jsx)(p,{children:(0,s.jsxs)("form",{onSubmit:E,className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(v,{htmlFor:"license-key",children:"License Key"}),(0,s.jsx)(f,{id:"license-key",name:"username",type:"text",placeholder:"Enter your license key",value:n,onChange:e=>i(e.target.value),required:!0,className:"font-mono",disabled:c})]}),l&&(0,s.jsxs)(b,{variant:"destructive",children:[(0,s.jsx)(V.A,{className:"h-4 w-4"}),(0,s.jsx)(w,{children:l})]}),n&&!l&&(0,s.jsxs)(b,{className:"border-green-200 bg-green-50 dark:border-green-800 dark:bg-green-950",children:[(0,s.jsx)(F.A,{className:"h-4 w-4 text-green-600 dark:text-green-400"}),(0,s.jsx)(w,{className:"text-green-800 dark:text-green-200",children:'License key loaded successfully. Click "Validate License" to continue.'})]}),(0,s.jsx)(d,{type:"submit",className:"w-full bg-teal-600 hover:bg-teal-700 dark:bg-teal-700 dark:hover:bg-teal-800",disabled:c||!n.trim(),children:c?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(_.A,{className:"w-4 h-4 animate-spin mr-2"}),"Validating with API..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(F.A,{className:"w-4 h-4 mr-2"}),"Validate License"]})}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,s.jsx)("span",{className:"w-full border-t"})}),(0,s.jsx)("div",{className:"relative flex justify-center text-xs uppercase",children:(0,s.jsx)("span",{className:"bg-background px-2 text-muted-foreground",children:"Or"})})]}),(0,s.jsxs)(d,{type:"button",variant:"outline",className:"w-full",onClick:()=>{let e=window.location.origin+window.location.pathname,t="https://addons.francislabonte.com/licenses/getkey/codepulse?return=".concat(encodeURIComponent(e));window.location.href=t},disabled:c,children:[(0,s.jsx)(B.A,{className:"w-4 h-4 mr-2"}),"Validate by Login"]})]})})]}),null!=C?C:(0,s.jsx)(u,{className:"border-blue-200 dark:border-blue-800",children:(0,s.jsxs)(h,{children:[(0,s.jsxs)(x,{className:"text-sm text-blue-800 dark:text-blue-400 flex items-center gap-2",children:[(0,s.jsx)(B.A,{className:"h-4 w-4"}),"License Validation"]}),(0,s.jsx)(g,{className:"text-xs dark:text-gray-400",children:C?"Running in preview mode - demo keys available below":"Licenses are validated through addons.francislabonte.com API"})]})}),C&&(0,s.jsxs)(u,{className:"border-teal-200 dark:border-teal-800",children:[(0,s.jsxs)(h,{children:[(0,s.jsx)(x,{className:"text-sm text-teal-800 dark:text-teal-400",children:"Demo License Key"}),(0,s.jsx)(g,{className:"text-xs dark:text-gray-400",children:"For testing purposes, you can use this demo key:"})]}),(0,s.jsx)(p,{className:"space-y-3",children:$.map((e,t)=>(0,s.jsxs)("div",{className:"flex items-center justify-between p-2 bg-teal-50 dark:bg-teal-950 rounded border dark:border-teal-800",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(S,{variant:"outline",className:"text-xs dark:border-teal-700",children:e.includes("DEV")?"DEV":e.includes("PRO")?"PRO":"DEMO"}),(0,s.jsx)("code",{className:"text-xs font-mono text-teal-700 dark:text-teal-300",children:e})]}),(0,s.jsxs)("div",{className:"flex gap-1",children:[(0,s.jsx)(d,{variant:"ghost",size:"sm",onClick:()=>{navigator.clipboard.writeText(e)},className:"h-6 w-6 p-0 hover:bg-teal-100 dark:hover:bg-teal-900",title:"Copy to clipboard",disabled:c,children:(0,s.jsx)(q.A,{className:"h-3 w-3"})}),(0,s.jsx)(d,{variant:"ghost",size:"sm",onClick:()=>{i(e),o("")},className:"h-6 px-2 text-xs hover:bg-teal-100 dark:hover:bg-teal-900",disabled:c,children:"Use"})]})]},e))})]}),(0,s.jsxs)("div",{className:"text-center space-y-2",children:[(0,s.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:C?"Preview mode: Demo keys work offline for testing.":"License validation requires an internet connection."}),(0,s.jsx)("button",{onClick:()=>y(!0),className:"text-xs text-teal-600 dark:text-teal-400 hover:text-teal-700 dark:hover:text-teal-300 underline",children:"View Privacy & Data Storage Information"})]})]})]})}function et(){return(0,s.jsxs)("div",{className:"min-h-screen bg-stone-50 dark:bg-gray-900 flex items-center justify-center p-6 relative",children:[(0,s.jsx)("div",{className:"fixed top-6 right-6 z-50",children:(0,s.jsx)(Q,{})}),(0,s.jsxs)("div",{className:"text-center space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-center gap-3",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-teal-600 to-teal-800 rounded-xl flex items-center justify-center shadow-lg",children:(0,s.jsx)(W.A,{className:"h-7 w-7 text-white"})}),(0,s.jsx)("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-amber-500 rounded-full flex items-center justify-center",children:(0,s.jsx)("div",{className:"w-2 h-2 bg-white rounded-full"})})]}),(0,s.jsx)(H.A,{className:"h-8 w-8 text-teal-600 dark:text-teal-400"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-teal-800 dark:text-teal-400",children:"Development Time Tracker"}),(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:"Initializing application..."})]}),(0,s.jsxs)("div",{className:"flex items-center justify-center gap-3",children:[(0,s.jsx)(_.A,{className:"h-6 w-6 animate-spin text-teal-600 dark:text-teal-400"}),(0,s.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Validating license..."})]}),(0,s.jsxs)("div",{className:"flex justify-center gap-2",children:[(0,s.jsx)("div",{className:"w-2 h-2 bg-teal-600 dark:bg-teal-400 rounded-full animate-pulse"}),(0,s.jsx)("div",{className:"w-2 h-2 bg-teal-600 dark:bg-teal-400 rounded-full animate-pulse",style:{animationDelay:"0.2s"}}),(0,s.jsx)("div",{className:"w-2 h-2 bg-teal-600 dark:bg-teal-400 rounded-full animate-pulse",style:{animationDelay:"0.4s"}})]})]})]})}var ea=a(2286);let es=ea.bL,er=ea.l9,en=r.forwardRef((e,t)=>{let{className:a,align:r="center",sideOffset:n=4,...i}=e;return(0,s.jsx)(ea.ZL,{children:(0,s.jsx)(ea.UC,{ref:t,align:r,sideOffset:n,className:(0,o.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]",a),...i})})});en.displayName=ea.UC.displayName;var ei=a(21),el=a(5870),eo=a(4926),ec=a(6083),ed=a(4033);let em=ec.bL,eu=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(ec.q7,{ref:t,className:(0,o.cn)("border-b",a),...r})});eu.displayName="AccordionItem";let eh=r.forwardRef((e,t)=>{let{className:a,children:r,...n}=e;return(0,s.jsx)(ec.Y9,{className:"flex",children:(0,s.jsxs)(ec.l9,{ref:t,className:(0,o.cn)("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",a),...n,children:[r,(0,s.jsx)(ed.A,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})})});eh.displayName=ec.l9.displayName;let ex=r.forwardRef((e,t)=>{let{className:a,children:r,...n}=e;return(0,s.jsx)(ec.UC,{ref:t,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...n,children:(0,s.jsx)("div",{className:(0,o.cn)("pb-4 pt-0",a),children:r})})});function eg(e){let{idleTimeoutMinutes:t,onIdleTimeoutChange:a,storageType:n,onStorageTypeChange:i,onRefresh:l,onLogout:o,onRestartTour:c,settingsLoading:u=!1}=e,{getLicenseInfo:h}=K(),x=h(),g=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3,[t,a]=(0,r.useState)(void 0);return(0,r.useEffect)(()=>{let t=setTimeout(()=>{a(!!document.getElementById("mxo-toolbar"))},e);return()=>clearTimeout(t)},[e]),t}(),[p,f]=(0,r.useState)(!0);(0,r.useEffect)(()=>{f("true"!==localStorage.getItem("chromeExtInstallDismissed"))},[]);let[j,y]=(0,r.useState)("");return(0,r.useEffect)(()=>{window.navigator.userAgent.toLowerCase().includes("win")?y("%USERPROFILE%\\.cache\\phpstorm-time-tracker\\chrome-extension"):y("~/.cache/phpstorm-time-tracker/chrome-extension")},[]),(0,s.jsxs)(s.Fragment,{children:[!1===g&&p&&(0,s.jsxs)(b,{className:"mb-4",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(z.A,{className:"h-5 w-5 mr-2 text-teal-600 dark:text-teal-400"}),(0,s.jsx)(w,{children:"Install Chrome plugin to add URL tracing"})]}),(0,s.jsx)("button",{type:"button",onClick:()=>{localStorage.setItem("chromeExtInstallDismissed","true"),f(!1)},className:"text-gray-400 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-300","aria-label":"Dismiss installation prompt",children:(0,s.jsx)(C.A,{className:"h-5 w-5"})})]}),(0,s.jsx)(em,{type:"single",collapsible:!0,className:"mt-2",children:(0,s.jsxs)(eu,{value:"install",children:[(0,s.jsx)(eh,{children:"How to install?"}),(0,s.jsx)(ex,{children:(0,s.jsxs)("ol",{className:"list-decimal list-inside space-y-1",children:[(0,s.jsxs)("li",{children:["Open Chrome and go to ",(0,s.jsx)("code",{children:"chrome://extensions"})]}),(0,s.jsx)("li",{children:"Enable Developer mode (toggle upper-right)"}),(0,s.jsxs)("li",{children:["Click “Load unpacked” and select ",(0,s.jsx)("code",{children:j})]})]})})]})})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between","data-tour":"header",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-teal-600 to-teal-800 rounded-lg flex items-center justify-center shadow-md",children:(0,s.jsx)(W.A,{className:"h-6 w-6 text-white"})}),(0,s.jsx)("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-amber-500 rounded-full flex items-center justify-center",children:(0,s.jsx)("div",{className:"w-1.5 h-1.5 bg-white rounded-full"})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-teal-800 dark:text-teal-400",children:"Development Time Tracking"}),(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Monitor your development productivity and project progress"})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[!1,c&&(0,s.jsxs)(d,{onClick:c,variant:"outline",size:"sm",className:"border-teal-200 text-teal-700 hover:bg-teal-50 dark:border-teal-800 dark:text-teal-300 dark:hover:bg-teal-950",title:"Restart the guided tour",children:[(0,s.jsx)(ei.A,{className:"w-4 h-4 mr-2"}),"Help"]}),(0,s.jsxs)(d,{onClick:l,variant:"outline",size:"sm",className:"border-teal-200 text-teal-700 hover:bg-teal-50 dark:border-teal-800 dark:text-teal-300 dark:hover:bg-teal-950",children:[(0,s.jsx)(m.A,{className:"w-4 h-4 mr-2"}),"Refresh"]}),(0,s.jsxs)(es,{children:[(0,s.jsx)(er,{asChild:!0,children:(0,s.jsxs)(d,{variant:"outline",size:"sm",className:"border-teal-200 text-teal-700 hover:bg-teal-50 dark:border-teal-800 dark:text-teal-300 dark:hover:bg-teal-950",children:[(0,s.jsx)(el.A,{className:"w-4 h-4 mr-2"}),"Settings"]})}),(0,s.jsx)(en,{className:"w-80 dark:bg-gray-800 dark:border-gray-700",children:(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("h4",{className:"font-medium dark:text-gray-100",children:"Dashboard Settings"}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("label",{htmlFor:"idle-timeout",className:"text-sm font-medium dark:text-gray-200",children:["Idle Timeout: ",t," minutes"]}),(0,s.jsxs)("select",{id:"idle-timeout",value:t,onChange:e=>a(Number(e.target.value)),className:"bg-white border rounded px-2 py-1 text-sm dark:bg-gray-700 dark:border-gray-600 dark:text-gray-200",disabled:u,children:[(0,s.jsx)("option",{value:5,children:"5 minutes"}),(0,s.jsx)("option",{value:10,children:"10 minutes"}),(0,s.jsx)("option",{value:15,children:"15 minutes"}),(0,s.jsx)("option",{value:20,children:"20 minutes"}),(0,s.jsx)("option",{value:30,children:"30 minutes"})]})]}),(0,s.jsxs)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Sessions within ",t," minutes of each other will be merged"]})]}),!1,x&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("hr",{className:"dark:border-gray-700"}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("h5",{className:"font-medium text-sm dark:text-gray-100",children:"License Information"}),(0,s.jsxs)("div",{className:"text-xs space-y-1",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Type:"}),(0,s.jsx)("span",{className:"dark:text-gray-200",children:x.type})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Key:"}),(0,s.jsx)("span",{className:"font-mono dark:text-gray-200",children:x.isDemo?"Demo":"...".concat(x.key.slice(-6))})]})]}),o&&(0,s.jsxs)(d,{onClick:o,variant:"outline",size:"sm",className:"w-full mt-3 text-red-600 border-red-200 hover:bg-red-50 dark:text-red-400 dark:border-red-900 dark:hover:bg-red-950",children:[(0,s.jsx)(eo.A,{className:"w-4 h-4 mr-2"}),"Logout"]})]})]})]})})]}),(0,s.jsx)(Q,{})]})]})]})}function ep(e){let{currentWeek:t,onNavigateWeek:a}=e,r=e=>{let t=new Date(e),a=t.getDay(),s=t.getDate()-a;return new Date(t.setDate(s))},n=()=>{let e=new Date,a=r(t),s=r(e);return a.getTime()===s.getTime()};return(0,s.jsx)(u,{"data-tour":"week-navigation",children:(0,s.jsx)(p,{className:"py-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)(d,{onClick:()=>a("prev"),variant:"outline",size:"sm",className:"border-teal-200 text-teal-700 hover:bg-teal-50 dark:border-teal-800 dark:text-teal-300 dark:hover:bg-teal-950",children:"← Previous Week"}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsxs)("div",{className:"text-lg font-semibold text-teal-800 dark:text-teal-400",children:[r(t).toLocaleDateString("en-US",{month:"short",day:"numeric"})," ","-"," ",new Date(r(t).getTime()+5184e5).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})]}),(0,s.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:n()?"Current Week":"Week of "+r(t).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})})]}),(0,s.jsx)(d,{onClick:()=>a("next"),variant:"outline",size:"sm",className:"border-teal-200 text-teal-700 hover:bg-teal-50 dark:border-teal-800 dark:text-teal-300 dark:hover:bg-teal-950",disabled:n(),children:"Next Week →"})]}),!n()&&(0,s.jsx)(d,{onClick:()=>a("current"),variant:"default",size:"sm",className:"bg-teal-600 hover:bg-teal-700 dark:bg-teal-700 dark:hover:bg-teal-800",children:"Back to Current Week"})]})})})}ex.displayName=ec.UC.displayName;var ef=a(574);let ej=ef.bL,ey=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(ef.B8,{ref:t,className:(0,o.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",a),...r})});ey.displayName=ef.B8.displayName;let ev=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(ef.l9,{ref:t,className:(0,o.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",a),...r})});ev.displayName=ef.l9.displayName;let eN=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(ef.UC,{ref:t,className:(0,o.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",a),...r})});eN.displayName=ef.UC.displayName;var eb=a(5644),ew=a(2108),ek=a(5917);let eS=eb.bL;eb.YJ;let eT=eb.WT,eC=r.forwardRef((e,t)=>{let{className:a,children:r,...n}=e;return(0,s.jsxs)(eb.l9,{ref:t,className:(0,o.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...n,children:[r,(0,s.jsx)(eb.In,{asChild:!0,children:(0,s.jsx)(ed.A,{className:"h-4 w-4 opacity-50"})})]})});eC.displayName=eb.l9.displayName;let eA=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(eb.PP,{ref:t,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",a),...r,children:(0,s.jsx)(ew.A,{className:"h-4 w-4"})})});eA.displayName=eb.PP.displayName;let eE=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(eb.wn,{ref:t,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",a),...r,children:(0,s.jsx)(ed.A,{className:"h-4 w-4"})})});eE.displayName=eb.wn.displayName;let eD=r.forwardRef((e,t)=>{let{className:a,children:r,position:n="popper",...i}=e;return(0,s.jsx)(eb.ZL,{children:(0,s.jsxs)(eb.UC,{ref:t,className:(0,o.cn)("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:n,...i,children:[(0,s.jsx)(eA,{}),(0,s.jsx)(eb.LM,{className:(0,o.cn)("p-1","popper"===n&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),(0,s.jsx)(eE,{})]})})});eD.displayName=eb.UC.displayName,r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(eb.JU,{ref:t,className:(0,o.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",a),...r})}).displayName=eb.JU.displayName;let eP=r.forwardRef((e,t)=>{let{className:a,children:r,...n}=e;return(0,s.jsxs)(eb.q7,{ref:t,className:(0,o.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...n,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(eb.VF,{children:(0,s.jsx)(ek.A,{className:"h-4 w-4"})})}),(0,s.jsx)(eb.p4,{children:r})]})});eP.displayName=eb.q7.displayName,r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(eb.wv,{ref:t,className:(0,o.cn)("-mx-1 my-1 h-px bg-muted",a),...r})}).displayName=eb.wv.displayName;let eI="America/New_York",eO=e=>new Date(e+"T00:00:00"),eR=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{month:"2-digit",day:"2-digit",year:"numeric"};return eO(e).toLocaleDateString("en-US",{timeZone:eI,...t})},eL=e=>eR(e,{month:"short",day:"numeric"}),eU=e=>eR(e,{month:"long",day:"numeric",year:"numeric"}),eM=e=>eR(e,{weekday:"short"}),eF=e=>e.toLocaleDateString("en-CA",{timeZone:eI}),ez=(e,t,a)=>{let s=e=>{let t=new Date(e),a=t.getDay(),s=t.getDate()-a;return new Date(t.setDate(s))},r=e=>{let t=[];for(let a=0;a<7;a++){let s=new Date(e.getTime()+24*a*36e5);t.push(eF(s))}return t},n=()=>{if(!e||0===Object.keys(e).length)return{};let a=r(s(t)),n={};return a.forEach(t=>{e[t]&&(n[t]=e[t])}),n},i=e=>{let t=eO(e).getDay();return 8*(t>=1&&t<=5)},l=e=>{let t=Math.floor(e/3600),a=Math.floor(e%3600/60);return"".concat(t,"h ").concat(a,"m")},o=e=>e.sessionIds&&e.sessionIds.length>0?e.sessionIds:"number"!=typeof e.id||Number.isNaN(e.id)?[]:[e.id],c=e=>{if(0===e.length)return e;let t=[...e].sort((e,t)=>new Date(e.start).getTime()-new Date(t.start).getTime()),s=[],r={...t[0],sessionIds:o(t[0])};for(let e=1;e<t.length;e++){let n=t[e],i=new Date(r.end).getTime();if(new Date(n.start).getTime()-i<=60*a*1e3&&r.type===n.type){r.end=n.end;let e=new Set(r.sessionIds||[]);o(n).forEach(t=>e.add(t)),r={...r,sessionIds:Array.from(e)}}else s.push(r),r={...n,sessionIds:o(n)}}return s.push(r),s},d=e=>{let t=[];return Object.values(e).forEach(e=>{t.push(...e.sessions)}),c(t)},m=e=>c(e.sessions),u=e=>e.reduce((e,t)=>e+(new Date(t.end).getTime()-new Date(t.start).getTime())/1e3,0),h=()=>{let e={},t=n();return 0===Object.keys(t).length?[]:(Object.entries(t).forEach(t=>{let[a,s]=t;Object.entries(s).forEach(t=>{let[a,s]=t,r=u(m(s));e[a]=(e[a]||0)+r})}),Object.entries(e).map(e=>{let[t,a]=e;return{name:t,duration:a,hours:a/3600}}).sort((e,t)=>t.duration-e.duration))},x=()=>{let e=r(s(t)),a=n();return e.map(e=>{let t=u(d(a[e]||{})),s=eM(e),r=i(e);return{day:s,date:e,hours:t/3600,target:r}})},g=()=>{let e=[],t=n();return 0===Object.keys(t).length?[]:(Object.entries(t).sort((e,t)=>{let[a]=e,[s]=t;return s.localeCompare(a)}).forEach(t=>{let[a,s]=t;Object.entries(s).forEach(t=>{let[s,r]=t;m(r).slice(-3).forEach((t,r)=>{let n=new Date(t.end).getTime()-new Date(t.start).getTime();e.push({id:"".concat(a,"-").concat(s,"-").concat(r),project:s,task:"".concat(t.type," session"),duration:l(n/1e3),status:"completed",date:a,type:t.type})})})}),e.slice(0,10))};return{getWeekStart:s,getWeekEnd:e=>new Date(s(e).getTime()+5184e5),getWeekDates:r,getCurrentWeekData:n,isCurrentWeek:()=>{let e=new Date,a=s(t),r=s(e);return a.getTime()===r.getTime()},formatDuration:l,formatHoursForChart:e=>{let t=Math.floor(e),a=Math.round((e-t)*60);return 0===t&&0===a?"0h":0===a?"".concat(t,"h"):"".concat(t,"h").concat(a.toString().padStart(2,"0"))},formatDateInEST:eR,formatDateShort:eL,formatDateLong:eU,getTargetHoursForDate:i,mergeSessions:c,getMergedSessionsForDay:d,getMergedSessionsForProjectDay:m,calculateMergedDuration:u,getProjectTotals:h,getWeeklyData:x,getStackedWeeklyData:()=>{let e=r(s(t)),a=n();return e.map(e=>{let t=a[e]||{},s=eM(e),r=i(e),n={};return Object.entries(t).forEach(e=>{let[t,a]=e,s=u(m(a));n[t]=s/3600}),{day:s,date:e,target:r,...n}})},getWeeklyDataForProject:e=>{let a=r(s(t)),i=n();return a.map(t=>{let a=(i[t]||{})[e],s=eM(t),r=0;return a&&(r=u(m(a))/3600),{day:s,date:t,hours:r}})},getProjectSessionDetails:e=>{let t=[];return Object.entries(n()).forEach(a=>{let[s,r]=a;if(r[e]){let a=m(r[e]);t.push(...a.map(e=>({...e,date:s})))}}),t.sort((e,t)=>new Date(t.start).getTime()-new Date(e.start).getTime())},getRecentActivities:g,getTotalHoursThisWeek:()=>x().reduce((e,t)=>e+t.hours,0),getAvgHoursPerDay:()=>{let e=x().filter(e=>e.target>0);return e.length>0?e.reduce((e,t)=>e+t.hours,0)/e.length:0},getTargetHoursThisWeek:()=>x().reduce((e,t)=>e+t.target,0),getActiveProjects:()=>h().length,getCompletedTasks:()=>g().filter(e=>"completed"===e.status).length,getProjectChartData:()=>{let e=h().slice(0,8),t=["#2D5A5A","#4A7C7C","#A67C5A","#8B4513","#D2B48C","#5F8A8B","#8FBC8F","#CD853F","#DEB887","#F4A460"];return e.map((e,a)=>({name:e.name,hours:Number(e.hours.toFixed(1)),color:t[a%t.length]}))},getMonthlyTrend:()=>{let t={};return e&&0!==Object.keys(e).length?(Object.entries(e).forEach(e=>{let[a,s]=e,r=eR(a,{month:"short"}),n=0;Object.entries(s).forEach(e=>{let[t,a]=e,s=m(a);n+=u(s)}),t[r]=(t[r]||0)+n}),Object.entries(t).map(e=>{let[t,a]=e;return{month:t,hours:Number((a/3600).toFixed(1))}})):[]},getProjectBreakdown:e=>{let t=[];return Object.entries(n()).forEach(a=>{let[s,r]=a;if(r[e]){let a=m(r[e]);t.push(...a.map(e=>({...e,date:s})))}}),t.sort((e,t)=>new Date(t.start).getTime()-new Date(e.start).getTime())},getDailyTotalsForProject:e=>{let t={};return Object.entries(n()).forEach(a=>{let[s,r]=a;if(r[e]){let a=m(r[e]),n=u(a);t[s]={duration:n,sessions:a}}}),Object.entries(t).map(e=>{let[t,a]=e;return{date:t,...a}}).sort((e,t)=>t.date.localeCompare(e.date)).slice(0,14)},getFileActivityForProject:(e,t)=>{let a=n()[t];if(!a||!a[e])return[];let s=a[e].sessions.filter(e=>"coding"===e.type&&e.file),r={};return s.forEach(e=>{if(e.file){let t=e.file.split("/").pop()||e.file;r[t]||(r[t]=[]),r[t].push(e)}}),Object.entries(r).map(e=>{let[t,a]=e,s=a.reduce((e,t)=>e+(new Date(t.end).getTime()-new Date(t.start).getTime())/1e3,0),r=Array(24).fill(0);return a.forEach(e=>{let t=new Date(e.start).getHours(),a=(new Date(e.end).getTime()-new Date(e.start).getTime())/1e3;r[t]+=a}),{filename:t,extension:t.split(".").pop()||"",totalSeconds:s,timeByHour:r,fullPath:a[0].file}}).sort((e,t)=>t.totalSeconds-e.totalSeconds)},getUrlActivityForProject:(e,t)=>{let a=n()[t];if(!a||!a[e])return[];let s=a[e].sessions.filter(e=>"browsing"===e.type&&e.url),r={};return s.forEach(e=>{e.url&&(r[e.url]||(r[e.url]=[]),r[e.url].push(e))}),Object.entries(r).map(e=>{let[t,a]=e,s=a.reduce((e,t)=>e+(new Date(t.end).getTime()-new Date(t.start).getTime())/1e3,0);return{url:t,host:a[0].host||new URL(t).hostname,totalSeconds:s,sessionCount:a.length}}).sort((e,t)=>t.totalSeconds-e.totalSeconds)},dateToESTString:eF,createESTDate:eO}};var eW=a(5880),eH=a(9602),eJ=a(890),eV=a(9715),e_=a(8514),eB=a(1360),eq=a(3924);let eY=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{className:"relative w-full overflow-auto",children:(0,s.jsx)("table",{ref:t,className:(0,o.cn)("w-full caption-bottom text-sm",a),...r})})});eY.displayName="Table";let eK=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("thead",{ref:t,className:(0,o.cn)("[&_tr]:border-b",a),...r})});eK.displayName="TableHeader";let eZ=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("tbody",{ref:t,className:(0,o.cn)("[&_tr:last-child]:border-0",a),...r})});eZ.displayName="TableBody",r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("tfoot",{ref:t,className:(0,o.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",a),...r})}).displayName="TableFooter";let eX=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("tr",{ref:t,className:(0,o.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",a),...r})});eX.displayName="TableRow";let eG=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("th",{ref:t,className:(0,o.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",a),...r})});eG.displayName="TableHead";let eQ=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("td",{ref:t,className:(0,o.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",a),...r})});eQ.displayName="TableCell",r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("caption",{ref:t,className:(0,o.cn)("mt-4 text-sm text-muted-foreground",a),...r})}).displayName="TableCaption";var e$=a(5646);let e0=e$.bL;e$.l9;let e4=e$.ZL,e1=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(e$.hJ,{className:(0,o.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...r,ref:t})});e1.displayName=e$.hJ.displayName;let e2=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsxs)(e4,{children:[(0,s.jsx)(e1,{}),(0,s.jsx)(e$.UC,{ref:t,className:(0,o.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...r})]})});e2.displayName=e$.UC.displayName;let e5=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,o.cn)("flex flex-col space-y-2 text-center sm:text-left",t),...a})};e5.displayName="AlertDialogHeader";let e3=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,o.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a})};e3.displayName="AlertDialogFooter";let e6=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(e$.hE,{ref:t,className:(0,o.cn)("text-lg font-semibold",a),...r})});e6.displayName=e$.hE.displayName;let e8=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(e$.VY,{ref:t,className:(0,o.cn)("text-sm text-muted-foreground",a),...r})});e8.displayName=e$.VY.displayName;let e7=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(e$.rc,{ref:t,className:(0,o.cn)(c(),a),...r})});e7.displayName=e$.rc.displayName;let e9=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(e$.ZD,{ref:t,className:(0,o.cn)(c({variant:"outline"}),"mt-2 sm:mt-0",a),...r})});e9.displayName=e$.ZD.displayName;var te=a(9738),tt=a.n(te);function ta(e){let{statsData:t,currentWeek:a,idleTimeoutMinutes:n,ignoredProjects:i=[],projectCustomNames:l=[],projectClients:o=[],commits:c=[],wrikeProjectMappings:m=[],onReassignSessions:f,onDeleteSessions:j}=e,[y,v]=(0,r.useState)(null),[N,b]=(0,r.useState)(!1),[w,k]=(0,r.useState)(null),[T,C]=(0,r.useState)(!1),[E,D]=(0,r.useState)(!1);(0,r.useEffect)(()=>{k(null),C(!1),D(!1)},[y]);let O=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success";tt()({text:e,duration:4e3,gravity:"top",position:"right",close:!0,style:{background:"success"===t?"linear-gradient(135deg, #14b8a6 0%, #0f766e 100%)":"linear-gradient(135deg, #f87171 0%, #b91c1c 100%)"}}).showToast()},{getStackedWeeklyData:L,getProjectChartData:U,formatHoursForChart:M,getMergedSessionsForProjectDay:F,calculateMergedDuration:z}=ez(t,a,n,i),H=e=>{let t=l.find(t=>t.projectName===e);return t?t.customName:e},J=e=>{switch(e){case"coding":return"#2D5A5A";case"meeting":return"#8B5CF6";default:return"#F59E0B"}},V=e=>{switch(e){case"coding":return"Coding";case"meeting":return"Meeting";default:return"Browsing"}},q=e=>e.sessionIds&&e.sessionIds.length>0?e.sessionIds:"number"!=typeof e.id||Number.isNaN(e.id)?[]:[e.id],Y=L(),K=U().reduce((e,t)=>(e[t.name]=t.color,e),{}),Z=Y.reduce((e,t)=>(Object.entries(t).forEach(t=>{let[a,s]=t;["day","date","target"].includes(a)||(e[a]=(e[a]||0)+s)}),e),{}),X=Array.from(new Set(Y.flatMap(e=>Object.keys(e).filter(e=>!["day","date","target"].includes(e))))).sort((e,t)=>(Z[t]||0)-(Z[e]||0));X.reduce((e,t)=>(e[t]={label:t,color:K[t]||"#8884d8"},e),{}).target={label:"Target Hours",color:"#e5e7eb"};let G=Y.map(e=>{let t={},a=0;return Object.entries(e).forEach(e=>{let[s,r]=e;["day","date","target"].includes(s)||(t[s]=r,a+=r)}),{day:e.day,date:e.date,totalHours:a,projectHours:t}}),Q=X.reduce((e,t)=>{let a=G.reduce((e,a)=>e+(a.projectHours[t]||0),0);return e[t]=a,e},{}),$=Object.values(Q).reduce((e,t)=>e+t,0),ee=e=>{k(t=>t?{...t,selectedProject:e}:t)},et=()=>{T||k(null)},ea=async()=>{if(w){if(w.selectedProject===w.currentProject)return void k(null);try{C(!0);let{sessionIds:e,selectedProject:t}=w;await f(e,t);let a=!1;v(t=>{if(!t)return t;let s=new Set(e),r=t.sessions.filter(e=>!q(e).some(e=>s.has(e)));if(0===r.length)return a=!0,null;let n=r.reduce((e,t)=>e+t.duration,0);return{...t,sessions:r,hours:n/3600}}),a&&b(!1);let s=e.length,r=H(t);O("".concat(s," session").concat(1===s?"":"s"," reassigned to ").concat(r,".")),k(null)}catch(e){console.error("Failed to reassign session project",e),O("Failed to reassign sessions. Please try again.","error")}finally{C(!1)}}},[es,er]=(0,r.useState)(null),en=async()=>{if(!es||E)return;let e=es.ids;try{D(!0),await j(e);let t=new Set(e),a=!1;v(e=>{if(!e)return e;let s=e.sessions.filter(e=>!q(e).some(e=>t.has(e)));if(0===s.length)return a=!0,null;let r=s.reduce((e,t)=>e+t.duration,0);return{...e,sessions:s,hours:r/3600}}),k(null),er(null),a&&b(!1)}catch(e){console.error("Failed to delete session",e)}finally{D(!1)}};return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)(u,{children:[(0,s.jsxs)(h,{children:[(0,s.jsx)(x,{children:"Weekly Timesheet"}),(0,s.jsx)(g,{children:"Click any cell to view session details for that day and project"})]}),(0,s.jsx)(p,{children:(0,s.jsx)("div",{className:"rounded-md border dark:border-gray-700",children:(0,s.jsxs)(eY,{children:[(0,s.jsx)(eK,{children:(0,s.jsxs)(eX,{children:[(0,s.jsx)(eG,{className:"text-left font-semibold bg-gray-50 dark:bg-gray-800",children:"Project"}),G.map(e=>(0,s.jsx)(eG,{className:"text-right font-semibold bg-gray-50 dark:bg-gray-800",children:e.day},e.date)),(0,s.jsx)(eG,{className:"text-right font-semibold bg-teal-50 dark:bg-teal-950",children:"Total"})]})}),(0,s.jsxs)(eZ,{children:[X.map(e=>{let a=m.find(t=>t.projectName===e),r=(e=>{let t=o.find(t=>t.projectName===e);return t?t.clientName:null})(e);return(0,s.jsxs)(eX,{children:[(0,s.jsx)(eQ,{className:"font-medium",children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:K[e]}}),(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)("span",{children:H(e)}),r&&(0,s.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-400 font-normal",children:r})]}),a&&(0,s.jsx)("a",{href:a.wrikePermalink,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 ml-1",title:"Open ".concat(a.wrikeProjectTitle," in Wrike"),children:(0,s.jsx)(eW.A,{className:"w-3.5 h-3.5"})})]})}),G.map(a=>{let r=a.projectHours[e]||0;return(0,s.jsx)(eQ,{className:"text-right ".concat(r>0?"cursor-pointer hover:bg-teal-50 dark:hover:bg-teal-950 font-medium":"text-gray-400 dark:text-gray-600"),onClick:()=>r>0&&((e,a,s,r)=>{if(0===r)return;let n=t[a];if(!n||!n[s])return;let i=F(n[s]).map(e=>{let t=new Date(e.start),a=new Date(e.end),s=e.sessionIds&&e.sessionIds.length>0?e.sessionIds:"number"!=typeof e.id||Number.isNaN(e.id)?[]:[e.id];return{id:e.id,start:e.start,end:e.end,duration:(a.getTime()-t.getTime())/1e3,type:e.type,file:e.file,url:e.url,host:e.host,meetingTitle:e.meetingTitle||e.host,sessionIds:s}});v({day:e,date:a,project:s,hours:r,sessions:i}),b(!0)})(a.day,a.date,e,r),children:r>0?M(r):"-"},a.date)}),(0,s.jsx)(eQ,{className:"text-right font-bold text-teal-800 dark:text-teal-300 bg-teal-50 dark:bg-teal-950",children:M(Q[e])})]},e)}),(0,s.jsxs)(eX,{className:"bg-gray-100 dark:bg-gray-800 border-t-2 border-gray-300 dark:border-gray-700",children:[(0,s.jsx)(eQ,{className:"font-bold",children:"Total"}),G.map(e=>(0,s.jsx)(eQ,{className:"text-right font-bold",children:M(e.totalHours)},e.date)),(0,s.jsx)(eQ,{className:"text-right font-bold text-teal-900 dark:text-teal-200 bg-teal-100 dark:bg-teal-900",children:M($)})]})]})]})})})]}),(0,s.jsx)(A,{open:N,onOpenChange:e=>{e||(k(null),C(!1),D(!1)),b(e)},children:(0,s.jsxs)(P,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[(0,s.jsx)(I,{children:(0,s.jsx)(R,{children:y&&(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:K[y.project]}}),(0,s.jsxs)("span",{children:[y.day," - ",H(y.project)]}),(0,s.jsx)(S,{variant:"outline",children:M(y.hours)})]})})}),y&&(0,s.jsxs)(ej,{defaultValue:"timeline",className:"w-full",children:[(0,s.jsxs)(ey,{children:[(0,s.jsx)(ev,{value:"timeline",children:"Timeline"}),(0,s.jsx)(ev,{value:"files",children:"Files"}),(0,s.jsx)(ev,{value:"websites",children:"Websites"}),(0,s.jsx)(ev,{value:"commits",children:"Commits"})]}),(0,s.jsxs)(eN,{value:"timeline",className:"space-y-4",children:[(0,s.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[y.sessions.length," session",1!==y.sessions.length?"s":""]}),(0,s.jsxs)("div",{className:"border dark:border-gray-700 rounded-lg p-4 bg-gray-50 dark:bg-gray-800",children:[(0,s.jsx)("h4",{className:"text-sm font-semibold mb-3 dark:text-gray-200",children:"Activity Timeline"}),(0,s.jsxs)("div",{className:"relative h-12 bg-white dark:bg-gray-900 rounded border dark:border-gray-700",children:[(0,s.jsx)("div",{className:"absolute inset-0 flex",children:Array.from({length:24},(e,t)=>(0,s.jsx)("div",{className:"flex-1 border-r border-gray-200 dark:border-gray-700 text-xs text-gray-400 dark:text-gray-500 px-1",children:t.toString().padStart(2,"0")},t))}),(0,s.jsx)("div",{className:"absolute inset-0 pt-6",children:y.sessions.map((e,t)=>{let a=new Date(e.start),r=new Date(e.end),n=a.getHours()+a.getMinutes()/60,i=r.getHours()+r.getMinutes()/60,l=J(e.type);return(0,s.jsx)("div",{className:"absolute h-6 rounded",style:{left:"".concat(n/24*100,"%"),width:"".concat((i-n)/24*100,"%"),backgroundColor:l,opacity:.8},title:"".concat(a.toLocaleTimeString()," - ").concat(r.toLocaleTimeString())},t)})})]}),(0,s.jsxs)("div",{className:"flex gap-4 mt-2 text-xs dark:text-gray-300",children:[(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)("div",{className:"w-3 h-3 rounded",style:{backgroundColor:J("coding")}}),(0,s.jsx)("span",{children:"Coding"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)("div",{className:"w-3 h-3 rounded",style:{backgroundColor:J("browsing")}}),(0,s.jsx)("span",{children:"Browsing"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)("div",{className:"w-3 h-3 rounded",style:{backgroundColor:J("meeting")}}),(0,s.jsx)("span",{children:"Meeting"})]})]})]}),(0,s.jsx)("div",{className:"space-y-2",children:y.sessions.map((e,t)=>{var a;let r=q(e),n=(null==w?void 0:w.index)===t,i=T||E,l=r.length>0,o=Array.from(new Set([y.project,...X].filter(Boolean)));return(0,s.jsxs)("div",{className:"flex items-start gap-3 p-3 border dark:border-gray-700 rounded-lg bg-gray-50 dark:bg-gray-800",children:[(0,s.jsx)("div",{className:"flex items-center gap-2 pt-1",children:"coding"===e.type?(0,s.jsx)(eH.A,{className:"w-4 h-4 text-teal-600 dark:text-teal-400"}):"meeting"===e.type?(0,s.jsx)(eJ.A,{className:"w-4 h-4 text-violet-500 dark:text-violet-300"}):(0,s.jsx)(B.A,{className:"w-4 h-4 text-amber-600 dark:text-amber-400"})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,s.jsx)(S,{variant:"coding"===e.type?"default":"meeting"===e.type?"outline":"secondary",children:V(e.type)}),(0,s.jsxs)("div",{className:"text-sm font-medium dark:text-gray-200",children:[new Date(e.start).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})," ","-"," ",new Date(e.end).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]}),e.file&&(0,s.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400 truncate",title:e.file,children:[(0,s.jsx)(eV.A,{className:"w-3 h-3 inline mr-1"}),e.file]}),"meeting"===e.type?(0,s.jsxs)("div",{className:"text-sm text-violet-600 dark:text-violet-300 flex items-center gap-1 truncate",children:[(0,s.jsx)(eJ.A,{className:"w-3 h-3"}),e.meetingTitle||e.host||"Meeting",e.url&&(0,s.jsx)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"text-violet-500 dark:text-violet-200 hover:text-violet-700 dark:hover:text-violet-100 flex items-center gap-1",title:e.url,children:(0,s.jsx)(eW.A,{className:"w-3 h-3"})})]}):e.url?(0,s.jsxs)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 flex items-center gap-1 truncate",title:e.url,children:[(0,s.jsx)(B.A,{className:"w-3 h-3"}),e.host||new URL(e.url).hostname,(0,s.jsx)(eW.A,{className:"w-3 h-3"})]}):null]}),(0,s.jsxs)("div",{className:"flex flex-col items-end gap-2 min-w-[180px]",children:[(0,s.jsxs)("div",{className:"flex items-center gap-1 text-sm font-medium text-gray-600 dark:text-gray-400",children:[(0,s.jsx)(W.A,{className:"w-3 h-3"}),M(e.duration/3600)]}),l?(0,s.jsxs)("div",{className:"flex gap-2",children:[n?(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)(eS,{value:null!=(a=null==w?void 0:w.selectedProject)?a:y.project,onValueChange:ee,disabled:i,children:[(0,s.jsx)(eC,{className:"w-44 h-6 text-left",children:(0,s.jsx)(eT,{placeholder:"Select project"})}),(0,s.jsx)(eD,{children:o.map(e=>(0,s.jsx)(eP,{value:e,children:H(e)},e))})]}),(0,s.jsx)(d,{size:"xs",onClick:ea,disabled:i||!w||!w.selectedProject||w.selectedProject===w.currentProject,children:T?(0,s.jsx)(_.A,{className:"w-4 h-4 animate-spin"}):"Save"}),(0,s.jsx)(d,{variant:"ghost",size:"xs",onClick:et,disabled:i,children:"Cancel"})]}):(0,s.jsx)(d,{variant:"ghost",size:"xs",className:"flex items-center gap-1",onClick:()=>((e,t)=>{if(!y)return;let a=q(e);0!==a.length&&k({index:t,sessionIds:a,selectedProject:y.project,currentProject:y.project})})(e,t),disabled:i,children:(0,s.jsx)(e_.A,{className:"w-4 h-4"})}),(0,s.jsx)(d,{variant:"destructive",size:"xs",className:"flex items-center gap-1",onClick:()=>(e=>{let t=q(e);if(0===t.length)return;e.start;let a="".concat(new Date(e.start).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})," – ").concat(new Date(e.end).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})),s="".concat(V(e.type)," session");e.file?s=e.file:e.meetingTitle||e.host?s=e.meetingTitle||e.host||s:e.url&&(s=e.url),er({ids:t,description:"".concat(s," • ").concat(a)})})(e),disabled:i,children:(0,s.jsx)(eB.A,{className:"w-4 h-4"})})]}):(0,s.jsx)("span",{className:"text-xs text-gray-400 dark:text-gray-500",children:"Cannot edit"})]})]},t)})})]}),(0,s.jsx)(eN,{value:"files",className:"space-y-2",children:(()=>{let e=Object.values(y.sessions.filter(e=>"coding"===e.type&&e.file).reduce((e,t)=>{let a=t.file;return e[a]||(e[a]={file:a,duration:0,sessions:0}),e[a].duration+=t.duration,e[a].sessions+=1,e},{})).sort((e,t)=>t.duration-e.duration);return e.length>0?e.map((e,t)=>(0,s.jsxs)("div",{className:"flex items-center justify-between p-3 border dark:border-gray-700 rounded-lg dark:bg-gray-800",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[(0,s.jsx)(eV.A,{className:"w-4 h-4 text-gray-600 dark:text-gray-400 flex-shrink-0"}),(0,s.jsx)("span",{className:"text-sm dark:text-gray-200 truncate",title:e.file,children:e.file})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3 text-sm text-gray-600 dark:text-gray-400",children:[(0,s.jsxs)("span",{children:[e.sessions," session",1!==e.sessions?"s":""]}),(0,s.jsx)("span",{className:"font-medium",children:M(e.duration/3600)})]})]},t)):(0,s.jsx)("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:"No files recorded"})})()}),(0,s.jsx)(eN,{value:"websites",className:"space-y-2",children:(()=>{let e=Object.values(y.sessions.filter(e=>"browsing"===e.type&&e.url).reduce((e,t)=>{let a=t.url;return e[a]||(e[a]={url:a,host:t.host||new URL(a).hostname,duration:0,sessions:0}),e[a].duration+=t.duration,e[a].sessions+=1,e},{})).sort((e,t)=>t.duration-e.duration);return e.length>0?e.map((e,t)=>(0,s.jsxs)("div",{className:"flex items-center justify-between p-3 border dark:border-gray-700 rounded-lg dark:bg-gray-800",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[(0,s.jsx)(B.A,{className:"w-4 h-4 text-amber-600 dark:text-amber-400 flex-shrink-0"}),(0,s.jsxs)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 truncate flex items-center gap-1",title:e.url,children:[e.host,(0,s.jsx)(eW.A,{className:"w-3 h-3"})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3 text-sm text-gray-600 dark:text-gray-400",children:[(0,s.jsxs)("span",{children:[e.sessions," session",1!==e.sessions?"s":""]}),(0,s.jsx)("span",{className:"font-medium",children:M(e.duration/3600)})]})]},t)):(0,s.jsx)("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:"No websites recorded"})})()}),(0,s.jsx)(eN,{value:"commits",className:"space-y-2",children:(()=>{let e=c.filter(e=>new Date(e.commitTime).toISOString().split("T")[0]===y.date&&e.project===y.project).sort((e,t)=>new Date(t.commitTime).getTime()-new Date(e.commitTime).getTime());return e.length>0?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:[e.length," commit",1!==e.length?"s":""]}),e.map((e,t)=>(0,s.jsx)("div",{className:"p-3 border dark:border-gray-700 rounded-lg bg-gray-50 dark:bg-gray-800 space-y-2",children:(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)(eq.A,{className:"w-4 h-4 text-purple-600 dark:text-purple-400 flex-shrink-0 mt-1"}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,s.jsx)("code",{className:"text-xs font-mono bg-gray-200 dark:bg-gray-700 dark:text-gray-200 px-2 py-0.5 rounded",children:e.commitHash.substring(0,7)}),e.branch&&(0,s.jsx)(S,{variant:"outline",className:"text-xs",children:e.branch}),(0,s.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:new Date(e.commitTime).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),(0,s.jsx)("div",{className:"text-sm text-gray-900 dark:text-gray-100 mb-2",children:e.commitMessage}),(0,s.jsxs)("div",{className:"flex items-center gap-4 text-xs text-gray-600 dark:text-gray-400",children:[e.authorName&&(0,s.jsxs)("span",{children:[(0,s.jsx)("strong",{children:"Author:"})," ",e.authorName]}),e.filesChanged>0&&(0,s.jsxs)("span",{children:[(0,s.jsx)("strong",{children:"Files:"})," ",e.filesChanged]}),(e.linesAdded>0||e.linesDeleted>0)&&(0,s.jsxs)("span",{children:[(0,s.jsxs)("span",{className:"text-green-600 dark:text-green-400",children:["+",e.linesAdded]})," /"," ",(0,s.jsxs)("span",{className:"text-red-600 dark:text-red-400",children:["-",e.linesDeleted]})]})]})]})]})},t))]}):(0,s.jsx)("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:"No commits recorded for this day"})})()})]})]})}),(0,s.jsx)(e0,{open:null!==es,onOpenChange:e=>!e&&!E&&er(null),children:(0,s.jsxs)(e2,{children:[(0,s.jsxs)(e5,{children:[(0,s.jsx)(e6,{children:"Delete session?"}),(0,s.jsxs)(e8,{children:[(null==es?void 0:es.description)&&(0,s.jsx)("span",{className:"block text-sm text-gray-600 dark:text-gray-300",children:es.description}),(0,s.jsx)("span",{className:"block mt-3 text-sm text-gray-600 dark:text-gray-300",children:"This action permanently removes the tracked time and cannot be undone."})]})]}),(0,s.jsxs)(e3,{children:[(0,s.jsx)(e9,{disabled:E,children:"Cancel"}),(0,s.jsx)(e7,{onClick:en,className:"bg-red-600 hover:bg-red-700 focus:ring-red-600",disabled:E,children:E?(0,s.jsx)(_.A,{className:"w-4 h-4 animate-spin"}):"Delete"})]})]})})]})}var ts=a(368),tr=a(7937),tn=a(6485);function ti(e){let{statsData:t,currentWeek:a,idleTimeoutMinutes:n,ignoredProjects:i=[],selectedDate:l,onDateChange:o}=e,[c,m]=(0,r.useState)(()=>l||eF(new Date)),{formatDuration:f,formatHoursForChart:j,getMergedSessionsForProjectDay:y,getProjectChartData:v}=ez(t,a,n,i),N=Object.keys(t).sort().reverse(),b=t[c]||{},w=v().reduce((e,t)=>(e[t.name]=t.color,e),{}),k=Object.entries(b).flatMap(e=>{let[t,a]=e;return y(a).map(e=>{let a=new Date(e.start),s=new Date(e.end);return{project:t,color:w[t]||"#8884d8",start:e.start,end:e.end,duration:(s.getTime()-a.getTime())/1e3,type:e.type}})}).sort((e,t)=>new Date(e.start).getTime()-new Date(t.start).getTime()),T=Object.entries(b).map(e=>{let[t,a]=e,s=y(a),r=s.reduce((e,t)=>{let a=new Date(t.start);return e+(new Date(t.end).getTime()-a.getTime())/1e3},0);return{project:t,duration:r,hours:r/3600,sessions:s.length,color:w[t]||"#8884d8"}}),C=T.reduce((e,t)=>e+t.hours,0),A=e=>{let t=new Date(eO(c));t.setDate(t.getDate()+("next"===e?1:-1));let a=eF(t);m(a),o&&o(a)};return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)(u,{children:(0,s.jsx)(h,{children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(d,{variant:"outline",size:"sm",onClick:()=>A("prev"),children:(0,s.jsx)(ts.A,{className:"w-4 h-4"})}),(0,s.jsx)(d,{variant:"outline",size:"sm",onClick:()=>A("next"),children:(0,s.jsx)(tr.A,{className:"w-4 h-4"})})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)(x,{className:"flex items-center gap-2",children:[(0,s.jsx)(tn.A,{className:"w-5 h-5"}),"Daily Details"]}),(0,s.jsx)(g,{children:eU(c)})]})]}),(0,s.jsx)("div",{className:"flex items-center gap-4",children:(0,s.jsxs)(eS,{value:c,onValueChange:e=>{m(e),o&&o(e)},children:[(0,s.jsx)(eC,{className:"w-48",children:(0,s.jsx)(eT,{placeholder:"Select a date"})}),(0,s.jsx)(eD,{children:N.map(e=>(0,s.jsx)(eP,{value:e,children:eR(e,{weekday:"short",month:"short",day:"numeric"})},e))})]})})]})})}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,s.jsx)(u,{children:(0,s.jsxs)(p,{className:"p-4",children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-teal-800",children:j(C)}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Total Hours"})]})}),(0,s.jsx)(u,{children:(0,s.jsxs)(p,{className:"p-4",children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-teal-800",children:k.length}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Total Sessions"})]})}),(0,s.jsx)(u,{children:(0,s.jsxs)(p,{className:"p-4",children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-teal-800",children:k.filter(e=>"coding"===e.type).length}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Coding Sessions"})]})}),(0,s.jsx)(u,{children:(0,s.jsxs)(p,{className:"p-4",children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-teal-800",children:T.length}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Active Projects"})]})})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,s.jsxs)(u,{children:[(0,s.jsxs)(h,{children:[(0,s.jsx)(x,{children:"Project Breakdown"}),(0,s.jsx)(g,{children:"Time spent on each project today"})]}),(0,s.jsx)(p,{children:0===T.length?(0,s.jsx)("div",{className:"text-center py-8 text-gray-500",children:"No activity recorded for this day"}):(0,s.jsx)("div",{className:"space-y-3",children:T.sort((e,t)=>t.hours-e.hours).map(e=>(0,s.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:e.color}}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"font-medium",children:e.project}),(0,s.jsxs)("div",{className:"text-sm text-gray-600",children:[e.sessions," sessions"]})]})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsx)("div",{className:"font-medium",children:j(e.hours)}),(0,s.jsxs)("div",{className:"text-sm text-gray-600",children:[Math.round(e.hours/C*100),"%"]})]})]},e.project))})})]}),(0,s.jsxs)(u,{children:[(0,s.jsxs)(h,{children:[(0,s.jsx)(x,{children:"Session Timeline"}),(0,s.jsx)(g,{children:"Chronological view of your work sessions"})]}),(0,s.jsx)(p,{children:0===k.length?(0,s.jsx)("div",{className:"text-center py-8 text-gray-500",children:"No sessions recorded for this day"}):(0,s.jsx)("div",{className:"space-y-3 max-h-[400px] overflow-y-auto",children:k.map((e,t)=>(0,s.jsxs)("div",{className:"flex items-center gap-3 p-3 border rounded-lg",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:e.color}}),"coding"===e.type?(0,s.jsx)(eH.A,{className:"w-4 h-4 text-teal-600"}):"meeting"===e.type?(0,s.jsx)(eJ.A,{className:"w-4 h-4 text-violet-500"}):(0,s.jsx)(B.A,{className:"w-4 h-4 text-amber-600"})]}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("div",{className:"font-medium",children:e.project}),(0,s.jsx)(S,{variant:"coding"===e.type?"default":"meeting"===e.type?"outline":"secondary",children:e.type})]}),(0,s.jsxs)("div",{className:"text-sm text-gray-600",children:[new Date(e.start).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})," ","-"," ",new Date(e.end).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-1 text-sm font-medium",children:[(0,s.jsx)(W.A,{className:"w-3 h-3"}),f(e.duration)]})]},t))})})]})]})]})}var tl=a(8162);let to=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(tl.bL,{ref:t,className:(0,o.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",a),...r,children:(0,s.jsx)(tl.C1,{className:(0,o.cn)("flex items-center justify-center text-current"),children:(0,s.jsx)(ek.A,{className:"h-4 w-4"})})})});to.displayName=tl.bL.displayName;var tc=a(8734),td=a(532),tm=a(7726),tu=a(6651),th=a(562),tx=a(8803),tg=a(3341),tp=a(6046),tf=a(7828),tj=a(6191);function ty(e){let{statsData:t,ignoredProjects:a,projectCustomNames:n,projectClients:i,projectUrls:l,currentWeek:o,idleTimeoutMinutes:c,onIdleTimeoutChange:m,onAddIgnoredProject:j,onRemoveIgnoredProject:y,onSaveProjectCustomName:N,onRemoveProjectCustomName:b,onSaveProjectClient:w,onRemoveProjectClient:k,onCreateUrl:T,onUpdateUrl:E,onDeleteUrl:D}=e,[L,U]=(0,r.useState)(""),[M,F]=(0,r.useState)(!1),[z,H]=(0,r.useState)(""),[J,V]=(0,r.useState)(!1),[_,B]=(0,r.useState)(null),[q,Y]=(0,r.useState)(""),[K,Z]=(0,r.useState)(null),[X,G]=(0,r.useState)(""),[Q,$]=(0,r.useState)(!1),[ee,et]=(0,r.useState)(null),[ea,es]=(0,r.useState)({project:"",url:"",description:""}),[er,en]=(0,r.useState)(null),[ei,eo]=(0,r.useState)(""),[ec,em]=(0,r.useState)(1),[eu,eh]=(0,r.useState)(10),[ex,eg]=(0,r.useState)(!0),[ep,ef]=(0,r.useState)(!1),[eb,ew]=(0,r.useState)(new Set),[ek,eA]=(0,r.useState)("comfortable"),[eE,eI]=(0,r.useState)("lastWorkedOn"),[eO,eR]=(0,r.useState)("desc"),[eL,eU]=(0,r.useState)(()=>localStorage.getItem("settings-active-tab")||"projects");r.useEffect(()=>{localStorage.setItem("settings-active-tab",eL)},[eL]);let{getProjectTotals:eM,formatDuration:eF}=ez(t,o,c),eW=e=>{let t=n.find(t=>t.projectName===e);return t?t.customName:e},eH=e=>n.find(t=>t.projectName===e),eJ=e=>i.find(t=>t.projectName===e),eV=(()=>{let e=new Set;return Object.values(t).forEach(t=>{Object.keys(t).forEach(t=>{e.add(t)})}),Array.from(e).sort()})(),eq=(()=>{let e=new Map,a=new Map;return Object.values(t).forEach(t=>{Object.entries(t).forEach(t=>{let[s,r]=t;if(!r.sessions)return;let n=0;r.sessions.forEach(e=>{let t=new Date(e.start).getTime(),r=new Date(e.end).getTime();n+=(r-t)/1e3,r>(a.get(s)||0)&&a.set(s,r)});let i=e.get(s)||0;e.set(s,i+n)})}),Array.from(e.entries()).map(e=>{let[t,s]=e;return{name:t,duration:s,lastWorkedOn:a.get(t)||null}}).sort((e,t)=>t.duration-e.duration)})();a.map(e=>e.projectName);let e$=e=>l?l.filter(t=>t.project===e):[],e0=e=>{eE===e?eR("asc"===eO?"desc":"asc"):(eI(e),eR("lastWorkedOn"===e?"desc":"asc"))},e4=(()=>{let e=new Map;return eq.forEach(t=>{e.set(t.name,{name:t.name,displayName:eW(t.name),duration:t.duration,lastWorkedOn:t.lastWorkedOn,isIgnored:!1,urls:e$(t.name)})}),a.forEach(t=>{let a=e.get(t.projectName);a?(a.isIgnored=!0,a.ignoredAt=t.ignoredAt):e.set(t.projectName,{name:t.projectName,displayName:eW(t.projectName),duration:0,lastWorkedOn:null,isIgnored:!0,ignoredAt:t.ignoredAt,urls:e$(t.projectName)})}),Array.from(e.values())})(),e1=e4.filter(e=>{if(!ex&&e.isIgnored)return!1;if(L){let t=L.toLowerCase();return e.name.toLowerCase().includes(t)||e.displayName.toLowerCase().includes(t)||e.urls.some(e=>e.url.toLowerCase().includes(t))}return!0}).sort((e,t)=>{let a=0;switch(eE){case"projectName":a=e.name.localeCompare(t.name);break;case"customName":a=e.displayName.localeCompare(t.displayName);break;case"client":var s,r;let n=(null==(s=eJ(e.name))?void 0:s.clientName)||"",i=(null==(r=eJ(t.name))?void 0:r.clientName)||"";a=n.localeCompare(i);break;case"lastWorkedOn":a=(e.lastWorkedOn||0)-(t.lastWorkedOn||0)}return"asc"===eO?a:-a}),e2=r.useMemo(()=>{if(!ep)return[];let e=new Map;return e1.forEach(t=>{let a=eJ(t.name),s=(null==a?void 0:a.clientName)||"Unassigned";e.has(s)||e.set(s,[]),e.get(s).push(t)}),Array.from(e.entries()).map(e=>{let[t,a]=e;return{clientName:t,projects:a}}).sort((e,t)=>"Unassigned"===e.clientName?1:"Unassigned"===t.clientName?-1:e.clientName.localeCompare(t.clientName))},[e1,ep,i]),e5=Math.ceil(e1.length/eu),e3=(ec-1)*eu,e6=e3+eu,e8=e1.slice(e3,e6),e7=r.useRef(L),e9=r.useRef(ex);r.useEffect(()=>{(e7.current!==L||e9.current!==ex)&&(em(1),e7.current=L,e9.current=ex)},[L,ex]);let te=async e=>{V(!0);try{await y(e)}finally{V(!1)}},tt=async e=>{V(!0);try{await j(e)}finally{V(!1)}},ta=async e=>{if(e.isIgnored){let t=a.find(t=>t.projectName===e.name);t&&await te(t.id)}else await tt(e.name)},ts=e=>{let t=eH(e);B(e),Y((null==t?void 0:t.customName)||"")},tn=async e=>{if(q.trim()){V(!0);try{await N(e,q.trim()),B(null),Y("")}finally{V(!1)}}},ti=()=>{B(null),Y("")},tl=e=>{let t=eJ(e);Z(e),G((null==t?void 0:t.clientName)||"")},ty=async e=>{if(X.trim()){V(!0);try{await w(e,X.trim()),Z(null),G("")}finally{V(!1)}}},tv=()=>{Z(null),G("")},tN=e=>{et(e),es({project:e.project,url:e.url,description:e.description||""}),$(!0)},tb=()=>{es({project:"",url:"",description:""})},tw=e=>{$(e),e||(et(null),tb())},tk=async e=>{e.preventDefault(),V(!0);try{ee?await E(ee.id,ea):await T(ea),$(!1),tb(),et(null)}finally{V(!1)}},tS=async e=>{V(!0);try{await D(e)}finally{V(!1)}},tT=async e=>{if(!ei.trim()){en(null),eo("");return}V(!0);try{await T({project:e,url:ei.trim(),description:""}),en(null),eo("")}finally{V(!1)}},tC=()=>{en(null),eo("")};return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)(u,{children:(0,s.jsx)(h,{children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(el.A,{className:"w-6 h-6 text-teal-600 dark:text-teal-400"}),(0,s.jsxs)("div",{children:[(0,s.jsx)(x,{children:"Settings"}),(0,s.jsx)(g,{children:"Manage your time tracker preferences and projects"})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsxs)(S,{variant:"outline",className:"px-3 py-1",children:[(0,s.jsx)(tc.A,{className:"w-4 h-4 mr-1"}),eq.length," Total Projects"]}),(0,s.jsxs)(S,{variant:"secondary",className:"px-3 py-1",children:[(0,s.jsx)(td.A,{className:"w-4 h-4 mr-1"}),a.length," Ignored"]}),(0,s.jsxs)(S,{variant:"outline",className:"px-3 py-1",children:[(0,s.jsx)(tm.A,{className:"w-4 h-4 mr-1"}),n.length," Custom Names"]})]})]})})}),(0,s.jsxs)(ej,{value:eL,onValueChange:eU,className:"w-full",children:[(0,s.jsxs)(ey,{children:[(0,s.jsxs)(ev,{value:"projects",children:[(0,s.jsx)(tc.A,{className:"w-4 h-4 mr-2"}),"Projects"]}),(0,s.jsxs)(ev,{value:"general",children:[(0,s.jsx)(W.A,{className:"w-4 h-4 mr-2"}),"General"]})]}),(0,s.jsx)(eN,{value:"general",className:"space-y-6",children:(0,s.jsxs)(u,{children:[(0,s.jsxs)(h,{children:[(0,s.jsx)(x,{children:"Idle Timeout"}),(0,s.jsx)(g,{children:"Set the time after which inactivity will split sessions. This affects how sessions are grouped together."})]}),(0,s.jsx)(p,{children:(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)(v,{htmlFor:"idle-timeout",className:"text-sm font-medium",children:"Idle timeout duration:"}),(0,s.jsxs)(eS,{value:c.toString(),onValueChange:e=>m(parseInt(e)),children:[(0,s.jsx)(eC,{id:"idle-timeout",className:"w-48",children:(0,s.jsx)(eT,{})}),(0,s.jsx)(eD,{children:[5,10,15,20,30].map(e=>(0,s.jsxs)(eP,{value:e.toString(),children:[e," minutes"]},e))})]})]})})]})}),(0,s.jsxs)(eN,{value:"projects",className:"space-y-6",children:[(0,s.jsxs)(u,{children:[(0,s.jsx)(h,{children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(x,{children:"Projects"}),(0,s.jsx)(g,{children:"Manage project visibility, custom names, and URLs"})]}),(0,s.jsx)("div",{className:"flex items-center gap-2",children:(0,s.jsxs)(S,{variant:"outline",children:[e1.length," of ",e4.length," projects"]})})]})}),(0,s.jsxs)(p,{children:[(0,s.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[(0,s.jsxs)("div",{className:"flex-1 relative",children:[(0,s.jsx)(tu.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 dark:text-gray-500 h-4 w-4"}),(0,s.jsx)(f,{placeholder:"Search projects or URLs...",value:L,onChange:e=>U(e.target.value),className:"pl-10"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(to,{id:"show-ignored",checked:ex,onCheckedChange:e=>eg(e)}),(0,s.jsx)(v,{htmlFor:"show-ignored",className:"text-sm cursor-pointer dark:text-gray-300",children:"Show ignored"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(to,{id:"group-by-client",checked:ep,onCheckedChange:e=>ef(e)}),(0,s.jsx)(v,{htmlFor:"group-by-client",className:"text-sm cursor-pointer dark:text-gray-300",children:"Group by client"})]}),(0,s.jsxs)(eS,{value:ek,onValueChange:e=>eA(e),children:[(0,s.jsx)(eC,{className:"w-36",children:(0,s.jsx)(eT,{})}),(0,s.jsxs)(eD,{children:[(0,s.jsx)(eP,{value:"comfortable",children:"Comfortable"}),(0,s.jsx)(eP,{value:"compact",children:"Compact"})]})]}),(0,s.jsxs)(eS,{value:eu.toString(),onValueChange:e=>eh(Number(e)),children:[(0,s.jsx)(eC,{className:"w-32",children:(0,s.jsx)(eT,{})}),(0,s.jsxs)(eD,{children:[(0,s.jsx)(eP,{value:"10",children:"10 / page"}),(0,s.jsx)(eP,{value:"25",children:"25 / page"}),(0,s.jsx)(eP,{value:"50",children:"50 / page"}),(0,s.jsx)(eP,{value:"100",children:"100 / page"})]})]})]}),(0,s.jsx)("div",{className:"rounded-md border dark:border-gray-700",children:(0,s.jsxs)(eY,{children:[(0,s.jsx)(eK,{children:(0,s.jsxs)(eX,{className:"compact"===ek?"text-xs":"",children:[(0,s.jsx)(eG,{children:(0,s.jsxs)("button",{onClick:()=>e0("projectName"),className:"flex items-center gap-1 hover:text-teal-600 dark:hover:text-teal-400",children:["Project Name","projectName"===eE?"asc"===eO?(0,s.jsx)(th.A,{className:"w-4 h-4"}):(0,s.jsx)(tx.A,{className:"w-4 h-4"}):(0,s.jsx)(tg.A,{className:"w-4 h-4 opacity-50"})]})}),(0,s.jsx)(eG,{children:(0,s.jsxs)("button",{onClick:()=>e0("customName"),className:"flex items-center gap-1 hover:text-teal-600 dark:hover:text-teal-400",children:["Custom Name","customName"===eE?"asc"===eO?(0,s.jsx)(th.A,{className:"w-4 h-4"}):(0,s.jsx)(tx.A,{className:"w-4 h-4"}):(0,s.jsx)(tg.A,{className:"w-4 h-4 opacity-50"})]})}),(0,s.jsx)(eG,{children:(0,s.jsxs)("button",{onClick:()=>e0("client"),className:"flex items-center gap-1 hover:text-teal-600 dark:hover:text-teal-400",children:["Client","client"===eE?"asc"===eO?(0,s.jsx)(th.A,{className:"w-4 h-4"}):(0,s.jsx)(tx.A,{className:"w-4 h-4"}):(0,s.jsx)(tg.A,{className:"w-4 h-4 opacity-50"})]})}),(0,s.jsx)(eG,{className:"w-40",children:(0,s.jsxs)("button",{onClick:()=>e0("lastWorkedOn"),className:"flex items-center gap-1 hover:text-teal-600 dark:hover:text-teal-400",children:["Last Worked On","lastWorkedOn"===eE?"asc"===eO?(0,s.jsx)(th.A,{className:"w-4 h-4"}):(0,s.jsx)(tx.A,{className:"w-4 h-4"}):(0,s.jsx)(tg.A,{className:"w-4 h-4 opacity-50"})]})}),(0,s.jsx)(eG,{children:"URLs"}),(0,s.jsx)(eG,{className:"w-32",children:"Actions"})]})}),(0,s.jsx)(eZ,{children:0===e8.length?(0,s.jsx)(eX,{children:(0,s.jsx)(eQ,{colSpan:6,className:"text-center text-gray-500 dark:text-gray-400 py-8",children:L?"No projects match your search.":"No projects found."})}):ep?e2.flatMap(e=>{let t=eb.has(e.clientName),a=e.projects.slice(e3,e6);return[(0,s.jsx)(eX,{className:"bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 cursor-pointer",onClick:()=>{var t;return t=e.clientName,void ew(e=>{let a=new Set(e);return a.has(t)?a.delete(t):a.add(t),a})},children:(0,s.jsx)(eQ,{colSpan:6,className:"font-semibold dark:text-gray-200",children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[t?(0,s.jsx)(tr.A,{className:"w-4 h-4"}):(0,s.jsx)(ed.A,{className:"w-4 h-4"}),(0,s.jsxs)("span",{children:[e.clientName," (",e.projects.length," project",1!==e.projects.length?"s":"",")"]})]})})},"group-".concat(e.clientName)),...t?[]:a.map(e=>{var t,a;return(0,s.jsxs)(eX,{className:"".concat(e.isIgnored?"bg-orange-50 dark:bg-orange-950/20":""," ").concat("compact"===ek?"text-xs":""),children:[(0,s.jsx)(eQ,{children:(0,s.jsxs)("div",{className:"flex items-center gap-2 pl-6",children:[(0,s.jsx)("div",{className:"w-2 h-2 rounded-full ".concat(e.isIgnored?"bg-orange-500 dark:bg-orange-400":"bg-green-500 dark:bg-green-400")}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"font-medium dark:text-gray-200",children:e.name}),e.isIgnored&&e.ignoredAt&&(0,s.jsxs)("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Ignored ",new Date(e.ignoredAt).toLocaleDateString()]})]})]})}),(0,s.jsx)(eQ,{children:_===e.name?(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(f,{value:q,onChange:e=>Y(e.target.value),placeholder:"Enter custom name",className:"h-8",autoFocus:!0,onKeyDown:t=>{"Enter"===t.key?tn(e.name):"Escape"===t.key&&ti()}}),(0,s.jsx)(d,{size:"sm",onClick:()=>tn(e.name),disabled:!q.trim()||J,className:"h-8 px-2",children:(0,s.jsx)(tp.A,{className:"w-4 h-4"})}),(0,s.jsx)(d,{size:"sm",variant:"outline",onClick:ti,className:"h-8 px-2",children:(0,s.jsx)(C.A,{className:"w-4 h-4"})})]}):(0,s.jsx)("span",{className:"text-sm cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 px-2 py-1 rounded -mx-2 dark:text-gray-200",onClick:()=>ts(e.name),title:"Click to edit custom name",children:eH(e.name)?null==(t=eH(e.name))?void 0:t.customName:(0,s.jsx)("span",{className:"text-gray-400 dark:text-gray-500 italic",children:"Not set"})})}),(0,s.jsx)(eQ,{children:K===e.name?(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(f,{value:X,onChange:e=>G(e.target.value),placeholder:"Enter client name",className:"h-8",autoFocus:!0,onKeyDown:t=>{"Enter"===t.key?ty(e.name):"Escape"===t.key&&tv()}}),(0,s.jsx)(d,{size:"sm",onClick:()=>ty(e.name),disabled:!X.trim()||J,className:"h-8 px-2",children:(0,s.jsx)(tp.A,{className:"w-4 h-4"})}),(0,s.jsx)(d,{size:"sm",variant:"outline",onClick:tv,className:"h-8 px-2",children:(0,s.jsx)(C.A,{className:"w-4 h-4"})})]}):(0,s.jsx)("span",{className:"text-sm cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 px-2 py-1 rounded -mx-2 dark:text-gray-200",onClick:()=>tl(e.name),title:"Click to assign/edit client",children:eJ(e.name)?null==(a=eJ(e.name))?void 0:a.clientName:(0,s.jsx)("span",{className:"text-gray-400 dark:text-gray-500 italic",children:"Not set"})})}),(0,s.jsx)(eQ,{children:e.lastWorkedOn?(0,s.jsxs)("div",{className:"flex items-center gap-1 text-sm dark:text-gray-200",children:[(0,s.jsx)(W.A,{className:"w-3 h-3"}),new Date(e.lastWorkedOn).toLocaleDateString()]}):(0,s.jsx)("span",{className:"text-gray-400 dark:text-gray-500 text-sm",children:"-"})}),(0,s.jsx)(eQ,{children:(0,s.jsxs)("div",{className:"space-y-1",children:[e.urls.map(e=>(0,s.jsxs)("div",{className:"flex items-center gap-1 text-xs",children:[(0,s.jsx)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"text-teal-600 dark:text-teal-400 hover:text-teal-800 dark:hover:text-teal-300 truncate max-w-[200px] inline-block",title:e.url,children:e.url}),(0,s.jsx)(d,{variant:"ghost",size:"sm",onClick:()=>tN(e),className:"h-5 w-5 p-0",children:(0,s.jsx)(e_.A,{className:"h-3 w-3"})}),(0,s.jsx)(d,{variant:"ghost",size:"sm",onClick:()=>tS(e.id),className:"h-5 w-5 p-0 text-red-500 hover:text-red-600",disabled:J,children:(0,s.jsx)(eB.A,{className:"h-3 w-3"})})]},e.id)),er===e.name?(0,s.jsxs)("div",{className:"flex items-center gap-1 mt-1",children:[(0,s.jsx)(f,{value:ei,onChange:e=>eo(e.target.value),placeholder:"https://example.com",className:"h-7 text-xs",autoFocus:!0,onKeyDown:t=>{"Enter"===t.key?tT(e.name):"Escape"===t.key&&tC()}}),(0,s.jsx)(d,{size:"sm",onClick:()=>tT(e.name),disabled:!ei.trim()||J,className:"h-7 px-2",children:(0,s.jsx)(tp.A,{className:"w-3 h-3"})}),(0,s.jsx)(d,{size:"sm",variant:"outline",onClick:tC,className:"h-7 px-2",children:(0,s.jsx)(C.A,{className:"w-3 h-3"})})]}):0===e.urls.length?(0,s.jsx)("span",{className:"text-xs text-gray-400 dark:text-gray-500",children:"No URLs"}):null]})}),(0,s.jsx)(eQ,{children:(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(d,{size:"sm",variant:"ghost",onClick:()=>ta(e),disabled:J,className:"h-7 px-2",title:e.isIgnored?"Show project":"Ignore project",children:e.isIgnored?(0,s.jsx)(td.A,{className:"w-4 h-4 text-orange-600 dark:text-orange-400"}):(0,s.jsx)(tf.A,{className:"w-4 h-4 text-green-600 dark:text-green-400"})}),(0,s.jsxs)(d,{size:"sm",variant:"ghost",onClick:()=>{en(e.name),eo("")},className:"h-7 px-2 text-xs",title:"Add URL",disabled:er===e.name,children:[(0,s.jsx)(tj.A,{className:"w-3 h-3 mr-1"}),"Add URL"]})]})})]},e.name)})]}):e8.map(e=>{var t,a;return(0,s.jsxs)(eX,{className:"".concat(e.isIgnored?"bg-orange-50 dark:bg-orange-950/20":""," ").concat("compact"===ek?"text-xs":""),children:[(0,s.jsx)(eQ,{children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"w-2 h-2 rounded-full ".concat(e.isIgnored?"bg-orange-500 dark:bg-orange-400":"bg-green-500 dark:bg-green-400")}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"font-medium dark:text-gray-200",children:e.name}),e.isIgnored&&e.ignoredAt&&(0,s.jsxs)("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Ignored ",new Date(e.ignoredAt).toLocaleDateString()]})]})]})}),(0,s.jsx)(eQ,{children:_===e.name?(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(f,{value:q,onChange:e=>Y(e.target.value),placeholder:"Enter custom name",className:"h-8",autoFocus:!0,onKeyDown:t=>{"Enter"===t.key?tn(e.name):"Escape"===t.key&&ti()}}),(0,s.jsx)(d,{size:"sm",onClick:()=>tn(e.name),disabled:!q.trim()||J,className:"h-8 px-2",children:(0,s.jsx)(tp.A,{className:"w-4 h-4"})}),(0,s.jsx)(d,{size:"sm",variant:"outline",onClick:ti,className:"h-8 px-2",children:(0,s.jsx)(C.A,{className:"w-4 h-4"})})]}):(0,s.jsx)("span",{className:"text-sm cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 px-2 py-1 rounded -mx-2 dark:text-gray-200",onClick:()=>ts(e.name),title:"Click to edit custom name",children:eH(e.name)?null==(t=eH(e.name))?void 0:t.customName:(0,s.jsx)("span",{className:"text-gray-400 dark:text-gray-500 italic",children:"Not set"})})}),(0,s.jsx)(eQ,{children:K===e.name?(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(f,{value:X,onChange:e=>G(e.target.value),placeholder:"Enter client name",className:"h-8",autoFocus:!0,onKeyDown:t=>{"Enter"===t.key?ty(e.name):"Escape"===t.key&&tv()}}),(0,s.jsx)(d,{size:"sm",onClick:()=>ty(e.name),disabled:!X.trim()||J,className:"h-8 px-2",children:(0,s.jsx)(tp.A,{className:"w-4 h-4"})}),(0,s.jsx)(d,{size:"sm",variant:"outline",onClick:tv,className:"h-8 px-2",children:(0,s.jsx)(C.A,{className:"w-4 h-4"})})]}):(0,s.jsx)("span",{className:"text-sm cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 px-2 py-1 rounded -mx-2 dark:text-gray-200",onClick:()=>tl(e.name),title:"Click to assign/edit client",children:eJ(e.name)?null==(a=eJ(e.name))?void 0:a.clientName:(0,s.jsx)("span",{className:"text-gray-400 dark:text-gray-500 italic",children:"Not set"})})}),(0,s.jsx)(eQ,{children:e.lastWorkedOn?(0,s.jsxs)("div",{className:"flex items-center gap-1 text-sm dark:text-gray-200",children:[(0,s.jsx)(W.A,{className:"w-3 h-3"}),new Date(e.lastWorkedOn).toLocaleDateString()]}):(0,s.jsx)("span",{className:"text-gray-400 dark:text-gray-500 text-sm",children:"-"})}),(0,s.jsx)(eQ,{children:(0,s.jsxs)("div",{className:"space-y-1",children:[e.urls.map(e=>(0,s.jsxs)("div",{className:"flex items-center gap-1 text-xs",children:[(0,s.jsx)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"text-teal-600 dark:text-teal-400 hover:text-teal-800 dark:hover:text-teal-300 truncate max-w-[200px] inline-block",title:e.url,children:e.url}),(0,s.jsx)(d,{variant:"ghost",size:"sm",onClick:()=>tN(e),className:"h-5 w-5 p-0",children:(0,s.jsx)(e_.A,{className:"h-3 w-3"})}),(0,s.jsx)(d,{variant:"ghost",size:"sm",onClick:()=>tS(e.id),className:"h-5 w-5 p-0 text-red-500 hover:text-red-600",disabled:J,children:(0,s.jsx)(eB.A,{className:"h-3 w-3"})})]},e.id)),er===e.name?(0,s.jsxs)("div",{className:"flex items-center gap-1 mt-1",children:[(0,s.jsx)(f,{value:ei,onChange:e=>eo(e.target.value),placeholder:"https://example.com",className:"h-7 text-xs",autoFocus:!0,onKeyDown:t=>{"Enter"===t.key?tT(e.name):"Escape"===t.key&&tC()}}),(0,s.jsx)(d,{size:"sm",onClick:()=>tT(e.name),disabled:!ei.trim()||J,className:"h-7 px-2",children:(0,s.jsx)(tp.A,{className:"w-3 h-3"})}),(0,s.jsx)(d,{size:"sm",variant:"outline",onClick:tC,className:"h-7 px-2",children:(0,s.jsx)(C.A,{className:"w-3 h-3"})})]}):0===e.urls.length?(0,s.jsx)("span",{className:"text-xs text-gray-400 dark:text-gray-500",children:"No URLs"}):null]})}),(0,s.jsx)(eQ,{children:(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(d,{size:"sm",variant:"ghost",onClick:()=>ta(e),disabled:J,className:"h-7 px-2",title:e.isIgnored?"Show project":"Ignore project",children:e.isIgnored?(0,s.jsx)(td.A,{className:"w-4 h-4 text-orange-600 dark:text-orange-400"}):(0,s.jsx)(tf.A,{className:"w-4 h-4 text-green-600 dark:text-green-400"})}),(0,s.jsxs)(d,{size:"sm",variant:"ghost",onClick:()=>{en(e.name),eo("")},className:"h-7 px-2 text-xs",title:"Add URL",disabled:er===e.name,children:[(0,s.jsx)(tj.A,{className:"w-3 h-3 mr-1"}),"Add URL"]})]})})]},e.name)})})]})}),e5>1&&(0,s.jsxs)("div",{className:"flex items-center justify-between mt-4",children:[(0,s.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Showing ",e3+1,"-",Math.min(e6,e1.length)," of ",e1.length," projects"]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(d,{variant:"outline",size:"sm",onClick:()=>em(e=>Math.max(1,e-1)),disabled:1===ec,children:"Previous"}),(0,s.jsx)("div",{className:"flex items-center gap-1",children:Array.from({length:Math.min(5,e5)},(e,t)=>{let a;return a=e5<=5||ec<=3?t+1:ec>=e5-2?e5-4+t:ec-2+t,(0,s.jsx)(d,{variant:ec===a?"default":"outline",size:"sm",onClick:()=>em(a),className:"w-8 h-8 p-0",children:a},a)})}),(0,s.jsx)(d,{variant:"outline",size:"sm",onClick:()=>em(e=>Math.min(e5,e+1)),disabled:ec===e5,children:"Next"})]})]})]})]}),(0,s.jsx)(A,{open:Q,onOpenChange:tw,children:(0,s.jsxs)(P,{className:"sm:max-w-[500px]",children:[(0,s.jsx)(I,{children:(0,s.jsx)(R,{children:ee?"Edit Project URL":"Add Project URL"})}),(0,s.jsxs)("form",{onSubmit:tk,children:[(0,s.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,s.jsx)("label",{htmlFor:"url-project",className:"text-right font-medium",children:"Project"}),(0,s.jsx)("div",{className:"col-span-3",children:(0,s.jsxs)(eS,{value:ea.project,onValueChange:e=>es({...ea,project:e}),children:[(0,s.jsx)(eC,{children:(0,s.jsx)(eT,{placeholder:"Select a project"})}),(0,s.jsx)(eD,{children:eV.map(e=>(0,s.jsx)(eP,{value:e,children:eW(e)},e))})]})})]}),(0,s.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,s.jsx)("label",{htmlFor:"url-input",className:"text-right font-medium",children:"URL"}),(0,s.jsx)(f,{id:"url-input",value:ea.url,onChange:e=>es({...ea,url:e.target.value}),className:"col-span-3",placeholder:"https://example.com",required:!0})]})]}),(0,s.jsxs)(O,{children:[(0,s.jsx)(d,{type:"button",variant:"outline",onClick:()=>tw(!1),children:"Cancel"}),(0,s.jsx)(d,{type:"submit",disabled:J,children:ee?"Update":"Add"})]})]})]})})]})]})]})}function tv(e){let{statsData:t,ignoredProjects:a,projectCustomNames:r,projectClients:n,projectUrls:i,commits:l,wrikeProjects:o,wrikeProjectsLoading:c,wrikeProjectMappings:d,currentWeek:m,idleTimeoutMinutes:u,onIdleTimeoutChange:h,onAddIgnoredProject:x,onRemoveIgnoredProject:g,onSaveProjectCustomName:p,onRemoveProjectCustomName:f,onSaveProjectClient:j,onRemoveProjectClient:y,onCreateUrl:v,onUpdateUrl:N,onDeleteUrl:b,onReassignSessionsProject:w,onDeleteSessions:k,onFetchWrikeProjects:S,onSaveWrikeMapping:T,activeTab:C,onTabChange:A}=e;return(0,s.jsxs)(ej,{value:C,onValueChange:A,className:"space-y-4",children:[(0,s.jsxs)(ey,{children:[(0,s.jsxs)(ev,{value:"timesheet","data-tour":"timesheet-tab",children:[(0,s.jsx)(tn.A,{className:"w-4 h-4 mr-2"}),"Weekly Timesheet"]}),(0,s.jsxs)(ev,{value:"daily","data-tour":"daily-details-tab",children:[(0,s.jsx)(W.A,{className:"w-4 h-4 mr-2"}),"Daily Details"]}),(0,s.jsxs)(ev,{value:"settings","data-tour":"settings-tab",children:[(0,s.jsx)(el.A,{className:"w-4 h-4 mr-2"}),"Settings"]})]}),(0,s.jsx)(eN,{value:"timesheet",children:(0,s.jsx)(ta,{statsData:t,currentWeek:m,idleTimeoutMinutes:u,ignoredProjects:a.map(e=>e.projectName),projectCustomNames:r,projectClients:n,commits:l,wrikeProjectMappings:d,onReassignSessions:w,onDeleteSessions:k})}),(0,s.jsx)(eN,{value:"daily",children:(0,s.jsx)(ti,{statsData:t,currentWeek:m,idleTimeoutMinutes:u,ignoredProjects:a.map(e=>e.projectName)})}),(0,s.jsx)(eN,{value:"settings",children:(0,s.jsx)(ty,{statsData:t,ignoredProjects:a,projectCustomNames:r,projectClients:n,projectUrls:i,currentWeek:m,idleTimeoutMinutes:u,onIdleTimeoutChange:h,onAddIgnoredProject:x,onRemoveIgnoredProject:g,onSaveProjectCustomName:p,onRemoveProjectCustomName:f,onSaveProjectClient:j,onRemoveProjectClient:y,onCreateUrl:v,onUpdateUrl:N,onDeleteUrl:b})})]})}var tN=a(4579);function tb(e){let{onComplete:t,onSkip:a}=e,s=(0,r.useRef)(null);return(0,r.useEffect)(()=>{let e=[{element:"body",popover:{title:"Welcome to PhpStorm Time Tracker",description:"Let's take a quick tour to help you get started. This will only take a minute to show you the main features and views of the application.",side:"top",align:"center"}},{element:"[data-tour='header']",popover:{title:"Header Controls",description:"Access your settings, refresh data, view license information, and logout from here. You can also adjust idle timeout and storage preferences.",side:"bottom",align:"center"}},{element:"[data-tour='week-navigation']",popover:{title:"Week Navigation",description:"Navigate between different weeks to view your time tracking data. Click the arrows to move forward or backward in time.",side:"bottom",align:"center"}},{element:"[data-tour='quick-stats']",popover:{title:"Quick Stats Overview",description:"Get a quick overview of your key metrics for the selected week, including total hours, active projects, and productivity insights.",side:"bottom",align:"center"}},{element:"[data-tour='timesheet-tab']",popover:{title:"Weekly Timesheet View",description:"This is your main timesheet view showing all projects and hours for the week. Use this to track time across different projects and days.",side:"top",align:"start"}},{element:"[data-tour='daily-details-tab']",popover:{title:"Daily Details View",description:"Switch to this tab to see a detailed breakdown of your activities by day, including individual sessions, files worked on, and websites visited.",side:"top",align:"start"}},{element:"[data-tour='settings-tab']",popover:{title:"Settings & Configuration",description:"Manage your projects here: hide/show projects, set custom names, assign clients, and configure project URLs. This is where you customize your tracking experience.",side:"top",align:"start"}},{element:"body",popover:{title:"You're All Set!",description:"That's it! You now know the main features of the Time Tracker. Start tracking your time and manage your projects efficiently. You can restart this tour anytime from the help button in the header.",side:"top",align:"center"}}],r=(0,tN.B)({showProgress:!0,steps:e,onDestroyStarted:()=>{r.getActiveIndex()!==e.length-1&&r.hasNextStep()?a():t(),r.destroy()},popoverClass:"driverjs-theme",progressText:"{{current}} of {{total}}",nextBtnText:"Next",prevBtnText:"Previous",doneBtnText:"Finish"});return s.current=r,r.drive(),()=>{s.current&&s.current.destroy()}},[t,a]),null}a(2516);let tw=0,tk=new Map,tS=e=>{if(tk.has(e))return;let t=setTimeout(()=>{tk.delete(e),tA({type:"REMOVE_TOAST",toastId:e})},1e6);tk.set(e,t)},tT=[],tC={toasts:[]};function tA(e){tC=((e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:a}=t;return a?tS(a):e.toasts.forEach(e=>{tS(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===a||void 0===a?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}})(tC,e),tT.forEach(e=>{e(tC)})}function tE(e){let{...t}=e,a=(tw=(tw+1)%Number.MAX_SAFE_INTEGER).toString(),s=()=>tA({type:"DISMISS_TOAST",toastId:a});return tA({type:"ADD_TOAST",toast:{...t,id:a,open:!0,onOpenChange:e=>{e||s()}}}),{id:a,dismiss:s,update:e=>tA({type:"UPDATE_TOAST",toast:{...e,id:a}})}}class tD{setBearerToken(e){this.bearerToken=e}async request(e){if(!this.bearerToken)throw Error("Wrike bearer token not configured");let t=this.useProxy?"".concat(this.baseUrl).concat(e):"https://www.wrike.com/api/v4".concat(e),a={"Content-Type":"application/json"};this.useProxy?a["X-Wrike-Token"]=this.bearerToken:a.Authorization="Bearer ".concat(this.bearerToken);let s=await fetch(t,{method:"GET",headers:a});if(!s.ok){let e="Wrike API error: ".concat(s.status," ").concat(s.statusText);try{let t=await s.text();if(t){let a=JSON.parse(t);a.errorDescription?e=a.errorDescription:a.error&&(e=a.error)}}catch(e){}throw 401===s.status?e="Invalid Wrike bearer token. Please check that your token is correct and hasn't expired.":404===s.status&&(e="Wrike API endpoint not found. The backend proxy may not be running."),Error(e)}return s.json()}async getProjects(){try{return(await this.request("/folders?project=true")).data.filter(e=>e.project).map(e=>{var t;return{id:e.id,title:e.title,permalink:e.permalink,customStatusId:null==(t=e.project)?void 0:t.customStatusId}})}catch(e){throw console.error("Failed to fetch Wrike projects:",e),e}}async getProjectById(e){try{let t=(await this.request("/folders/".concat(e))).data[0];if(!t||!t.project)return null;return{id:t.id,title:t.title,permalink:t.permalink,customStatusId:t.project.customStatusId}}catch(t){return console.error("Failed to fetch Wrike project ".concat(e,":"),t),null}}async testConnection(){try{return await this.request("/contacts?me=true"),!0}catch(e){return console.error("Wrike connection test failed:",e),!1}}constructor(e,t=!0){this.bearerToken=null,this.useProxy=t,this.baseUrl="/api/wrike",e&&(this.bearerToken=e)}}let tP=null,tI=()=>{let e={},t=["Dashboard Redesign","API Integration","Mobile App","Documentation","Bug Fixes"],a=new Date,s=1,r=["src/components/dashboard.tsx","src/hooks/use-time-tracking-data.ts","src/pages/api/stats.ts","src/components/header.tsx","src/utils/date-utils.ts","src/components/project-detail-view.tsx","src/hooks/use-time-calculations.ts","package.json","README.md","src/styles/globals.css"],n=["https://github.com/company/project","https://stackoverflow.com/questions/react-hooks","https://docs.nextjs.org/api-reference","https://tailwindcss.com/docs","https://localhost:3000/dashboard"];for(let i=0;i<14;i++){let l=new Date(a);l.setDate(l.getDate()-i);let o=eF(l);e[o]={};let c=Math.floor(3*Math.random())+1;t.slice(0,c).forEach(t=>{let a=[],i=Math.floor(4*Math.random())+1;for(let e=0;e<i;e++){let e=9+Math.floor(8*Math.random()),t=Math.floor(120*Math.random())+30,i=new Date(l);i.setHours(e,Math.floor(60*Math.random()));let o=new Date(i.getTime()+6e4*t),c=Math.random(),d=c>.6?"coding":c>.3?"browsing":"meeting",m=s++,u={id:m,start:i.toISOString(),end:o.toISOString(),type:d,sessionIds:[m]};if("coding"===d)u.file=r[Math.floor(Math.random()*r.length)];else if("browsing"===d){let e=n[Math.floor(Math.random()*n.length)];u.url=e,u.host=new URL(e).hostname}else{let e=["Daily Standup","Sprint Planning","Client Review","Design Sync","Retrospective"],t=e[Math.floor(Math.random()*e.length)];u.url="https://meet.google.com/".concat(Math.random().toString(36).substring(2,12)),u.host=t,u.meetingTitle=t}a.push(u)}let c=a.reduce((e,t)=>e+(new Date(t.end).getTime()-new Date(t.start).getTime())/1e3,0);e[o][t]={duration:c,sessions:a}})}return e},tO=()=>[{id:"1",project:"Dashboard Redesign",url:"https://github.com/company/dashboard-redesign",description:"Main repository for dashboard redesign project"},{id:"2",project:"Dashboard Redesign",url:"https://figma.com/dashboard-mockups",description:"Design mockups and wireframes"},{id:"3",project:"API Integration",url:"https://api-docs.company.com",description:"API documentation and endpoints"},{id:"4",project:"API Integration",url:"https://github.com/company/api-integration",description:"Integration code repository"},{id:"5",project:"Mobile App",url:"https://github.com/company/mobile-app",description:"React Native mobile application"},{id:"6",project:"Documentation",url:"https://docs.company.com",description:"Project documentation site"}],tR=e=>Math.max(0,(new Date(e.end).getTime()-new Date(e.start).getTime())/1e3),tL=e=>e.sessionIds&&e.sessionIds.length>0?e.sessionIds:(e=>"number"==typeof e.id&&!Number.isNaN(e.id))(e)?[e.id]:[],tU=(e,t)=>{if(0===t.length)return e;let a=new Set(t),s={};return Object.entries(e).forEach(e=>{let[t,r]=e,n={};Object.entries(r).forEach(e=>{let[t,s]=e,r=s.sessions.map(e=>({...e})).filter(e=>!tL(e).some(e=>a.has(e)));r.length>0&&(n[t]={duration:r.reduce((e,t)=>e+tR(t),0),sessions:r})}),Object.keys(n).length>0&&(s[t]=n)}),s},tM=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],[a,s]=(0,r.useState)({}),[n,i]=(0,r.useState)({}),[l,o]=(0,r.useState)([]),[c,d]=(0,r.useState)([]),[m,u]=(0,r.useState)([]),[h,x]=(0,r.useState)([]),[g,p]=(0,r.useState)([]),[f,j]=(0,r.useState)([]),[y,v]=(0,r.useState)([]),[N,b]=(0,r.useState)(!1),[w,k]=(0,r.useState)(!1),[S,T]=(0,r.useState)(null),[C,A]=(0,r.useState)(10),[E,D]=(0,r.useState)(!1),[P,I]=(0,r.useState)("cloud"),O=window.location.hostname.includes("v0.dev")||window.location.hostname.includes("vusercontent.net")||t;(0,r.useEffect)(()=>{i(((e,t)=>{if(0===t.length)return e;let a={};return Object.entries(e).forEach(e=>{let[s,r]=e,n={};Object.entries(r).forEach(e=>{let[a,s]=e;t.includes(a)||(n[a]=s)}),Object.keys(n).length>0&&(a[s]=n)}),a})(a,c.map(e=>e.projectName)))},[a,c]);let R=async()=>{if(!e){s({}),i({}),k(!1);return}try{if(k(!0),T(null),O)return void setTimeout(()=>{let e=tI();s(e),k(!1)},1e3);let e=new AbortController,t=setTimeout(()=>e.abort(),5e3);try{let a=await fetch("".concat("","/api/stats"),{signal:e.signal});if(clearTimeout(t),!a.ok)throw Error("HTTP error! status: ".concat(a.status));let r=await a.json(),n=(e=>{let t={};return Object.entries(e).forEach(e=>{let[a,s]=e,r=a;if(a.includes("T")&&(r=a.split("T")[0]),!/^\d{4}-\d{2}-\d{2}$/.test(r))return void console.warn("Invalid date format received from API: ".concat(a));let n={};Object.entries(s).forEach(e=>{let[t,a]=e,s=a.sessions.map(e=>{let t=e.sessionIds&&e.sessionIds.length>0?e.sessionIds:"number"==typeof e.id?[e.id]:[],a={...e,sessionIds:t};return"meeting"===a.type&&a.host&&!a.meetingTitle&&(a.meetingTitle=a.host),a});n[t]={...a,sessions:s}}),t[r]=n}),t})(r);s(n)}catch(a){clearTimeout(t),console.warn("API not available, using fake data:",a);let e=tI();s(e)}}catch(e){console.warn("Error in fetchStats, using fake data:",e),s(tI())}finally{k(!1)}},L=async()=>{if(!e)return void o([]);try{if(T(null),O)return void o(tO());let e=new AbortController,t=setTimeout(()=>e.abort(),5e3);try{let a=await fetch("".concat("","/api/urls"),{signal:e.signal});if(clearTimeout(t),!a.ok)throw Error("HTTP error! status: ".concat(a.status));let s=await a.json();o(s)}catch(e){clearTimeout(t),console.warn("API not available for URLs, using fake data:",e),o(tO())}}catch(e){console.warn("Error fetching project URLs, using fake data:",e),o(tO())}},U=async()=>{if(!e)return void A(10);try{if(D(!0),O){let e=localStorage.getItem("idle-timeout-minutes");e&&A(Number(e));let t=localStorage.getItem("storage-type");t&&I(t),D(!1);return}let e=new AbortController,t=setTimeout(()=>e.abort(),5e3);try{let a=await fetch("".concat("","/api/settings"),{signal:e.signal});if(clearTimeout(t),!a.ok)throw Error("HTTP error! status: ".concat(a.status));let s=await a.json();A(s.idleTimeoutMinutes||10),I(s.storageType||"cloud")}catch(a){clearTimeout(t),console.warn("Settings API not available, using localStorage:",a);let e=localStorage.getItem("idle-timeout-minutes");e&&A(Number(e))}}catch(e){console.warn("Error fetching settings, using default:",e)}finally{D(!1)}},M=async t=>{if(e)try{if(D(!0),O){localStorage.setItem("idle-timeout-minutes",t.toString()),A(t),D(!1);return}let e=new AbortController,a=setTimeout(()=>e.abort(),5e3);try{let s=await fetch("".concat("","/api/settings"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({idleTimeoutMinutes:t}),signal:e.signal});if(clearTimeout(a),!s.ok)throw Error("HTTP error! status: ".concat(s.status));A(t),tE({title:"Settings Saved",description:"Idle timeout updated to ".concat(t," minutes")})}catch(e){clearTimeout(a),console.warn("Settings API not available, saving to localStorage:",e),localStorage.setItem("idle-timeout-minutes",t.toString()),A(t),tE({title:"Settings Saved Locally",description:"Idle timeout updated to ".concat(t," minutes (saved locally)")})}}catch(e){console.error("Error saving settings:",e),tE({title:"Error",description:"Failed to save idle timeout setting",variant:"destructive"})}finally{D(!1)}},F=async t=>{if(e)try{if(D(!0),O){localStorage.setItem("storage-type",t),I(t),D(!1);return}let e=new AbortController,a=setTimeout(()=>e.abort(),5e3);try{let s=await fetch("".concat("","/api/settings"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({idleTimeoutMinutes:C,storageType:t}),signal:e.signal});if(clearTimeout(a),!s.ok)throw Error("HTTP error! status: ".concat(s.status));I(t),tE({title:"Settings Saved",description:"Storage preference updated to ".concat(t)})}catch(e){clearTimeout(a),localStorage.setItem("storage-type",t),I(t),tE({title:"Settings Saved Locally",description:"Storage preference updated to ".concat(t," (saved locally)")})}}catch(e){console.error("Error saving storage type:",e),tE({title:"Error",description:"Failed to save storage preference",variant:"destructive"})}finally{D(!1)}},z=async t=>{if(e)try{if(O){let e={id:Date.now().toString(),project:t.project,url:t.url,description:t.description};o(t=>[...t,e]),tE({title:"Success",description:"Project URL has been created (preview mode)"});return}let e=await fetch("".concat("","/api/urls"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!e.ok)throw Error("HTTP error! status: ".concat(e.status));await L(),tE({title:"Success",description:"Project URL has been created"})}catch(e){tE({title:"Error",description:e instanceof Error?e.message:"Failed to create project URL",variant:"destructive"})}},W=async(t,a)=>{if(e)try{if(O){o(e=>e.map(e=>e.id===t?{...e,project:a.project,url:a.url,description:a.description}:e)),tE({title:"Success",description:"Project URL has been updated (preview mode)"});return}let e=await fetch("".concat("","/api/urls/").concat(t),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!e.ok)throw Error("HTTP error! status: ".concat(e.status));await L(),tE({title:"Success",description:"Project URL has been updated"})}catch(e){tE({title:"Error",description:e instanceof Error?e.message:"Failed to update project URL",variant:"destructive"})}},H=async t=>{if(e)try{if(O){o(e=>e.filter(e=>e.id!==t)),tE({title:"Success",description:"Project URL has been deleted (preview mode)"});return}let e=await fetch("".concat("","/api/urls/").concat(t),{method:"DELETE"});if(!e.ok)throw Error("HTTP error! status: ".concat(e.status));await L(),tE({title:"Success",description:"Project URL has been deleted"})}catch(e){tE({title:"Error",description:e instanceof Error?e.message:"Failed to delete project URL",variant:"destructive"})}},J=async(t,a)=>{if(!e)return;let r=a.trim();if(!r)return void tE({title:"Invalid project",description:"Please select a valid project name",variant:"destructive"});try{if(O){s(e=>((e,t,a)=>{if(0===t.length)return e;let s=new Set(t),r={};return Object.entries(e).forEach(e=>{let[t,n]=e,i={},l=[];if(Object.entries(n).forEach(e=>{let[t,a]=e,r=[],n=[];a.sessions.forEach(e=>{tL(e).some(e=>s.has(e))?n.push({...e}):r.push({...e})}),r.length>0&&(i[t]={duration:r.reduce((e,t)=>e+tR(t),0),sessions:r}),n.length>0&&(l=l.concat(n))}),l.length>0){let e=i[a],t=[...e?e.sessions:[],...l.map(e=>({...e}))];i[a]={duration:t.reduce((e,t)=>e+tR(t),0),sessions:t}}Object.keys(i).length>0&&(r[t]=i)}),r})(e,t,r)),tE({title:"Project updated",description:'Session reassigned to "'.concat(r,'"')});return}let e=1===t.length,a=e?"".concat("","/api/sessions/").concat(t[0]):"".concat("","/api/sessions/reassign"),n=e?{project:r}:{project:r,sessionIds:t},i=await fetch(a,{method:e?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(!i.ok)throw Error("HTTP error! status: ".concat(i.status));await R(),tE({title:"Project updated",description:'Session reassigned to "'.concat(r,'"')})}catch(e){throw tE({title:"Error",description:e instanceof Error?e.message:"Failed to update session project",variant:"destructive"}),e}},V=async t=>{if(e&&0!==t.length)try{let e;if(O){s(e=>tU(e,t)),tE({title:"Session deleted",description:"The session has been removed"});return}if(!(e=1===t.length?await fetch("".concat("","/api/sessions/").concat(t[0]),{method:"DELETE"}):await fetch("".concat("","/api/sessions/delete"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sessionIds:t})})).ok)throw Error("HTTP error! status: ".concat(e.status));s(e=>tU(e,t)),await R(),tE({title:"Session deleted",description:1===t.length?"The session has been removed":"Sessions have been removed"})}catch(e){throw tE({title:"Error",description:e instanceof Error?e.message:"Failed to delete sessions",variant:"destructive"}),e}},_=async()=>{if(!e)return void d([]);try{if(O){let e=localStorage.getItem("ignored-projects");e&&d(JSON.parse(e));return}let e=new AbortController,t=setTimeout(()=>e.abort(),5e3);try{let a=await fetch("".concat("","/api/ignored-projects"),{signal:e.signal});if(clearTimeout(t),!a.ok)throw Error("HTTP error! status: ".concat(a.status));let s=await a.json();d(s)}catch(a){clearTimeout(t),console.warn("Ignored projects API not available, using localStorage:",a);let e=localStorage.getItem("ignored-projects");e&&d(JSON.parse(e))}}catch(e){console.warn("Error fetching ignored projects:",e)}},B=async()=>{if(!e)return void u([]);try{if(O){let e=localStorage.getItem("project-custom-names");e&&u(JSON.parse(e));return}let e=new AbortController,t=setTimeout(()=>e.abort(),5e3);try{let a=await fetch("".concat("","/api/project-names"),{signal:e.signal});if(clearTimeout(t),!a.ok)throw Error("HTTP error! status: ".concat(a.status));let s=await a.json();u(s)}catch(a){clearTimeout(t),console.warn("Project custom names API not available, using localStorage:",a);let e=localStorage.getItem("project-custom-names");e&&u(JSON.parse(e))}}catch(e){console.warn("Error fetching project custom names:",e)}},q=async t=>{if(e)try{let e={id:Date.now().toString(),projectName:t,ignoredAt:new Date().toISOString()};if(O){let a=[...c,e];d(a),localStorage.setItem("ignored-projects",JSON.stringify(a)),tE({title:"Success",description:'"'.concat(t,'" has been ignored and will be excluded from all calculations')});return}let a=await fetch("".concat("","/api/ignored-projects"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({projectName:t})});if(!a.ok)throw Error("HTTP error! status: ".concat(a.status));await _(),tE({title:"Success",description:'"'.concat(t,'" has been ignored and will be excluded from all calculations')})}catch(e){tE({title:"Error",description:e instanceof Error?e.message:"Failed to ignore project",variant:"destructive"})}},Y=async t=>{if(e)try{let e=c.find(e=>e.id===t),a=(null==e?void 0:e.projectName)||"Project";if(O){let e=c.filter(e=>e.id!==t);d(e),localStorage.setItem("ignored-projects",JSON.stringify(e)),tE({title:"Success",description:'"'.concat(a,'" has been unignored and will be included in calculations')});return}let s=await fetch("".concat("","/api/ignored-projects/").concat(t),{method:"DELETE"});if(!s.ok)throw Error("HTTP error! status: ".concat(s.status));await _(),tE({title:"Success",description:'"'.concat(a,'" has been unignored and will be included in calculations')})}catch(e){tE({title:"Error",description:e instanceof Error?e.message:"Failed to unignore project",variant:"destructive"})}},K=async(t,a)=>{if(e)try{let e=m.find(e=>e.projectName===t);if(O){let s;if(e)s=m.map(e=>e.projectName===t?{...e,customName:a,updatedAt:new Date().toISOString()}:e);else{let e={id:Date.now().toString(),projectName:t,customName:a,updatedAt:new Date().toISOString()};s=[...m,e]}u(s),localStorage.setItem("project-names",JSON.stringify(s)),tE({title:"Success",description:'Custom name for "'.concat(t,'" has been saved')});return}let s=e?"PUT":"POST",r=e?"".concat("","/api/project-names/").concat(e.id):"".concat("","/api/project-names"),n=await fetch(r,{method:s,headers:{"Content-Type":"application/json"},body:JSON.stringify({projectName:t,customName:a})});if(!n.ok)throw Error("HTTP error! status: ".concat(n.status));await B(),tE({title:"Success",description:'Custom name for "'.concat(t,'" has been saved')})}catch(e){tE({title:"Error",description:e instanceof Error?e.message:"Failed to save custom name",variant:"destructive"})}},Z=async t=>{if(e)try{let e=m.find(e=>e.id===t),a=(null==e?void 0:e.projectName)||"Project";if(O){let e=m.filter(e=>e.id!==t);u(e),localStorage.setItem("project-custom-names",JSON.stringify(e)),tE({title:"Success",description:'Custom name for "'.concat(a,'" has been removed')});return}let s=await fetch("".concat("","/api/project-names/").concat(t),{method:"DELETE"});if(!s.ok)throw Error("HTTP error! status: ".concat(s.status));await B(),tE({title:"Success",description:'Custom name for "'.concat(a,'" has been removed')})}catch(e){tE({title:"Error",description:e instanceof Error?e.message:"Failed to remove custom name",variant:"destructive"})}},X=async()=>{if(!e)return void x([]);try{if(O){let e=localStorage.getItem("project-clients");e&&x(JSON.parse(e));return}let e=new AbortController,t=setTimeout(()=>e.abort(),5e3);try{let a=await fetch("".concat("","/api/project-clients"),{signal:e.signal});if(clearTimeout(t),!a.ok)throw Error("HTTP error! status: ".concat(a.status));let s=await a.json();x(s)}catch(a){clearTimeout(t),console.warn("Project clients API not available, using localStorage:",a);let e=localStorage.getItem("project-clients");e&&x(JSON.parse(e))}}catch(e){console.warn("Error fetching project clients:",e)}},G=async(t,a)=>{if(e)try{let e=h.find(e=>e.projectName===t);if(O){let s;if(e)s=h.map(e=>e.projectName===t?{...e,clientName:a,updatedAt:new Date().toISOString()}:e);else{let e={id:Date.now().toString(),projectName:t,clientName:a,updatedAt:new Date().toISOString()};s=[...h,e]}x(s),localStorage.setItem("project-clients",JSON.stringify(s)),tE({title:"Success",description:'Client for "'.concat(t,'" has been saved')});return}let s=e?"PUT":"POST",r=e?"".concat("","/api/project-clients/").concat(e.id):"".concat("","/api/project-clients"),n=await fetch(r,{method:s,headers:{"Content-Type":"application/json"},body:JSON.stringify({projectName:t,clientName:a})});if(!n.ok)throw Error("HTTP error! status: ".concat(n.status));await X(),tE({title:"Success",description:'Client for "'.concat(t,'" has been saved')})}catch(e){tE({title:"Error",description:e instanceof Error?e.message:"Failed to save client",variant:"destructive"})}},Q=async t=>{if(e)try{let e=h.find(e=>e.id===t),a=(null==e?void 0:e.projectName)||"Project";if(O){let e=h.filter(e=>e.id!==t);x(e),localStorage.setItem("project-clients",JSON.stringify(e)),tE({title:"Success",description:'Client for "'.concat(a,'" has been removed')});return}let s=await fetch("".concat("","/api/project-clients/").concat(t),{method:"DELETE"});if(!s.ok)throw Error("HTTP error! status: ".concat(s.status));await X(),tE({title:"Success",description:'Client for "'.concat(a,'" has been removed')})}catch(e){tE({title:"Error",description:e instanceof Error?e.message:"Failed to remove client",variant:"destructive"})}},$=async()=>{if(!e)return void p([]);try{if(O){let e=localStorage.getItem("commits");e&&p(JSON.parse(e));return}let e=new AbortController,t=setTimeout(()=>e.abort(),5e3);try{let a=await fetch("".concat("","/api/commits"),{signal:e.signal});if(clearTimeout(t),!a.ok)throw Error("HTTP error! status: ".concat(a.status));let s=await a.json();p(s)}catch(a){clearTimeout(t),console.warn("Commits API not available, using localStorage:",a);let e=localStorage.getItem("commits");e&&p(JSON.parse(e))}}catch(e){console.warn("Error fetching commits:",e)}},ee=async t=>{if(!e||!t)return void j([]);try{b(!0),T(null);let e=(tP?t&&tP.setBearerToken(t):tP=new tD(t),tP),a=await e.getProjects();j(a)}catch(e){console.error("Error fetching Wrike projects:",e),j([]),tE({title:"Error",description:e instanceof Error?e.message:"Failed to fetch Wrike projects",variant:"destructive"})}finally{b(!1)}},et=async()=>{if(!e)return void v([]);try{if(O){let e=localStorage.getItem("wrike-project-mappings");e&&v(JSON.parse(e));return}let e=new AbortController,t=setTimeout(()=>e.abort(),5e3);try{let a=await fetch("".concat("","/api/wrike-mappings"),{signal:e.signal});if(clearTimeout(t),!a.ok)throw Error("HTTP error! status: ".concat(a.status));let s=await a.json();v(s)}catch(a){clearTimeout(t),console.warn("Wrike mappings API not available, using localStorage:",a);let e=localStorage.getItem("wrike-project-mappings");e&&v(JSON.parse(e))}}catch(e){console.warn("Error fetching Wrike project mappings:",e)}},ea=async(t,a)=>{if(e)try{let e=y.find(e=>e.projectName===t),s={id:(null==e?void 0:e.id)||Date.now().toString(),projectName:t,wrikeProjectId:a.id,wrikeProjectTitle:a.title,wrikePermalink:a.permalink,createdAt:(null==e?void 0:e.createdAt)||new Date().toISOString()};if(O){let r;r=e?y.map(e=>e.projectName===t?s:e):[...y,s],v(r),localStorage.setItem("wrike-project-mappings",JSON.stringify(r)),tE({title:"Success",description:'"'.concat(t,'" has been linked to Wrike project "').concat(a.title,'"')});return}let r=e?"PUT":"POST",n=e?"".concat("","/api/wrike-mappings/").concat(e.id):"".concat("","/api/wrike-mappings"),i=await fetch(n,{method:r,headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!i.ok)throw Error("HTTP error! status: ".concat(i.status));await et(),tE({title:"Success",description:'"'.concat(t,'" has been linked to Wrike project "').concat(a.title,'"')})}catch(e){tE({title:"Error",description:e instanceof Error?e.message:"Failed to save Wrike project mapping",variant:"destructive"})}},es=async t=>{if(e)try{let e=y.find(e=>e.projectName===t);if(!e)return;if(O){let e=y.filter(e=>e.projectName!==t);v(e),localStorage.setItem("wrike-project-mappings",JSON.stringify(e)),tE({title:"Success",description:'Wrike link for "'.concat(t,'" has been removed')});return}let a=await fetch("".concat("","/api/wrike-mappings/").concat(e.id),{method:"DELETE"});if(!a.ok)throw Error("HTTP error! status: ".concat(a.status));await et(),tE({title:"Success",description:'Wrike link for "'.concat(t,'" has been removed')})}catch(e){tE({title:"Error",description:e instanceof Error?e.message:"Failed to remove Wrike project mapping",variant:"destructive"})}};return(0,r.useEffect)(()=>{e&&(R(),L(),U(),_(),B(),X(),$(),et())},[e]),{statsData:n,projectUrls:l,ignoredProjects:c,projectCustomNames:m,projectClients:h,commits:g,wrikeProjects:f,wrikeProjectMappings:y,wrikeProjectsLoading:N,loading:w,error:S,idleTimeoutMinutes:C,setIdleTimeoutMinutes:M,settingsLoading:E,fetchStats:R,fetchProjectUrls:L,fetchSettings:U,fetchIgnoredProjects:_,fetchProjectCustomNames:B,fetchProjectClients:X,fetchCommits:$,fetchWrikeProjects:ee,fetchWrikeProjectMappings:et,saveWrikeProjectMapping:ea,removeWrikeProjectMapping:es,createProjectUrl:z,updateProjectUrl:W,deleteProjectUrl:H,reassignSessionsProject:J,deleteSessions:V,addIgnoredProject:q,removeIgnoredProject:Y,storageType:P,setStorageType:F,saveProjectCustomName:K,removeProjectCustomName:Z,saveProjectClient:G,removeProjectClient:Q}},tF="mxo-time-tracker-onboarding-completed",tz=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],[t,a]=(0,r.useState)(!0),[s,n]=(0,r.useState)(!0);return(0,r.useEffect)(()=>{(()=>{if(!e){a(!0),n(!1);return}try{n(!0);let e=localStorage.getItem(tF);a("true"===e)}catch(e){console.warn("Error fetching onboarding status:",e),a(!1)}finally{n(!1)}})()},[e]),{hasCompletedOnboarding:t,isLoading:s,markOnboardingComplete:()=>{if(e)try{localStorage.setItem(tF,"true"),a(!0)}catch(e){console.error("Error marking onboarding complete:",e)}},resetOnboarding:()=>{if(e)try{localStorage.setItem(tF,"false"),a(!1)}catch(e){console.error("Error resetting onboarding:",e)}}}};function tW(){let e=(0,n.useRouter)(),t=(0,n.useSearchParams)(),{isLicenseValid:a,isInitializing:i,validateLicense:l,logout:o,getLicenseInfo:c}=K(),u=c(),{hasCompletedOnboarding:h,isLoading:x,markOnboardingComplete:g,resetOnboarding:p}=tz(a),[f,j]=(0,r.useState)(!1),y=t.get("tab")||"timesheet",v=t.get("week"),[N,b]=(0,r.useState)(()=>{if(v){let e=new Date(v);if(!isNaN(e.getTime()))return e}return new Date}),w=(0,r.useRef)(!1),{statsData:k,projectUrls:S,ignoredProjects:T,projectCustomNames:C,projectClients:A,commits:E,wrikeProjects:D,wrikeProjectsLoading:P,loading:I,error:O,idleTimeoutMinutes:R,setIdleTimeoutMinutes:L,storageType:U,setStorageType:M,settingsLoading:F,fetchStats:z,fetchProjectUrls:W,fetchWrikeProjects:H,createProjectUrl:J,updateProjectUrl:V,deleteProjectUrl:_,reassignSessionsProject:B,deleteSessions:q,addIgnoredProject:Y,removeIgnoredProject:Z,saveProjectCustomName:X,removeProjectCustomName:G,saveProjectClient:Q,removeProjectClient:$}=tM(a,(null==u?void 0:u.isDemo)||!1);(0,r.useEffect)(()=>{if(v&&!w.current){let e=new Date(v);isNaN(e.getTime())||v!==N.toISOString().split("T")[0]&&b(e)}},[v,N]);let ea=a=>{w.current=!0;let s=new URLSearchParams(t.toString());a.tab&&s.set("tab",a.tab),a.week&&s.set("week",a.week);let r="".concat(window.location.pathname,"?").concat(s.toString());e.push(r,{scroll:!1}),setTimeout(()=>{w.current=!1},100)};return((0,r.useEffect)(()=>{x||h||I||!a||j(!0)},[x,h,I,a]),i)?(0,s.jsx)(et,{}):a?I?(0,s.jsx)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 p-6 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)(m.A,{className:"w-8 h-8 animate-spin mx-auto mb-4 text-teal-600 dark:text-teal-400"}),(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading time tracking data..."})]})}):O?(0,s.jsx)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 p-6 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsxs)("p",{className:"text-red-600 dark:text-red-400 mb-4",children:["Error: ",O]}),(0,s.jsxs)(d,{onClick:z,children:[(0,s.jsx)(m.A,{className:"w-4 h-4 mr-2"}),"Retry"]})]})}):(0,s.jsx)("div",{className:"min-h-screen bg-stone-50 dark:bg-gray-900 p-6",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto space-y-6",children:[(0,s.jsx)(eg,{idleTimeoutMinutes:R,onIdleTimeoutChange:L,storageType:U,onStorageTypeChange:M,onRefresh:z,onLogout:o,onRestartTour:()=>{p(),j(!0)},settingsLoading:F}),(0,s.jsx)(ep,{currentWeek:N,onNavigateWeek:e=>{let t;"current"===e?t=new Date:(t=new Date(N)).setDate(t.getDate()+("next"===e?7:-7)),b(t),ea({week:t.toISOString().split("T")[0]})}}),(0,s.jsx)(tv,{statsData:k,ignoredProjects:T,projectCustomNames:C,projectClients:A,projectUrls:S,commits:E,wrikeProjects:D,wrikeProjectsLoading:P,wrikeProjectMappings:[],currentWeek:N,idleTimeoutMinutes:R,onIdleTimeoutChange:L,onAddIgnoredProject:Y,onRemoveIgnoredProject:Z,onSaveProjectCustomName:X,onRemoveProjectCustomName:G,onSaveProjectClient:Q,onRemoveProjectClient:$,onCreateUrl:J,onUpdateUrl:V,onDeleteUrl:_,onReassignSessionsProject:B,onDeleteSessions:q,onFetchWrikeProjects:H,onSaveWrikeMapping:()=>Promise.resolve(),activeTab:y,onTabChange:e=>{ea({tab:e})}}),f&&(0,s.jsx)(tb,{onComplete:()=>{g(),j(!1)},onSkip:()=>{g(),j(!1)}})]})}):(0,s.jsx)(ee,{onValidate:l})}a(7645)},8871:(e,t,a)=>{Promise.resolve().then(a.bind(a,7990))}},e=>{e.O(0,[852,817,602,441,255,358],()=>e(e.s=8871)),_N_E=e.O()}]);