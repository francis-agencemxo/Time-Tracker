(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[105],{7152:(e,t,s)=>{Promise.resolve().then(s.bind(s,8065))},8065:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>C});var a=s(5155),r=s(2115),n=s(5695),c=s(7168),i=s(3904),o=s(3927),l=s(8768),d=s(1692),m=s(4135),x=s(8482),h=s(4186),j=s(3786),u=s(9946);let p=(0,u.A)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);var g=s(4395),f=s(2657);let N=(0,u.A)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);var w=s(6237);function k(e){let{statsData:t,currentWeek:s,idleTimeoutMinutes:r,onViewProject:n}=e,{getTotalHoursThisWeek:i,getAvgHoursPerDay:o,getTargetHoursThisWeek:l,getActiveProjects:d,getCompletedTasks:m,getProjectTotals:u,getWeekStart:k,getWeekEnd:v,isCurrentWeek:b,formatHoursForChart:y}=(0,w.L)(t,s,r),S=i(),T=l(),C=o(),P=d(),R=m(),W=u()[0];return(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6","data-tour":"quick-stats",children:[(0,a.jsxs)(x.Zp,{children:[(0,a.jsxs)(x.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(x.ZB,{className:"text-sm font-medium",children:b()?"Total Hours This Week":"Total Hours Selected Week"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(h.A,{className:"h-4 w-4 text-muted-foreground"}),(0,a.jsx)(c.$,{variant:"ghost",size:"sm",onClick:()=>{let e=new URL(window.location.href),t="".concat(e.origin,"/dashboard?tab=weekly&week=").concat(s.toISOString().split("T")[0]);navigator.clipboard.writeText(t).then(()=>{console.log("Link copied to clipboard!")})},className:"h-6 w-6 p-0 hover:bg-gray-100",title:"Copy shareable link",children:(0,a.jsx)(j.A,{className:"h-3 w-3"})})]})]}),(0,a.jsxs)(x.Wu,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:y(S)}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Target: ",T,"h (",k(s).toLocaleDateString("en-US",{month:"short",day:"numeric"})," -"," ",v(s).toLocaleDateString("en-US",{month:"short",day:"numeric"}),")"]})]})]}),(0,a.jsxs)(x.Zp,{children:[(0,a.jsxs)(x.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(x.ZB,{className:"text-sm font-medium",children:"Average per Weekday"}),(0,a.jsx)(p,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsxs)(x.Wu,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:y(C)}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Target: 8h per weekday (Mon-Fri)"})]})]}),(0,a.jsxs)(x.Zp,{children:[(0,a.jsxs)(x.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(x.ZB,{className:"text-sm font-medium",children:"Active Projects"}),(0,a.jsx)(g.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsxs)(x.Wu,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:P}),(0,a.jsxs)("div",{className:"flex items-center justify-between mt-2",children:[(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:W?"".concat(W.name," is top project"):"No projects"}),W&&n&&(0,a.jsxs)(c.$,{variant:"ghost",size:"sm",onClick:()=>n(W.name),className:"h-6 px-2 text-xs text-teal-600 hover:text-teal-700 hover:bg-teal-50",children:[(0,a.jsx)(f.A,{className:"w-3 h-3 mr-1"}),"View"]})]})]})]}),(0,a.jsxs)(x.Zp,{children:[(0,a.jsxs)(x.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(x.ZB,{className:"text-sm font-medium",children:"Recent Sessions"}),(0,a.jsx)(N,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsxs)(x.Wu,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:R}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Last 3 days"})]})]})]})}var v=s(3366),b=s(3811),y=s(3600),S=s(7416),T=s(836);function C(){let e=(0,n.useRouter)(),t=(0,n.useSearchParams)(),{isLicenseValid:s,isInitializing:x,validateLicense:h,logout:j}=(0,S.Y)(),{hasCompletedOnboarding:u,isLoading:p,markOnboardingComplete:g,resetOnboarding:f}=(0,T.z)(s),[N,w]=(0,r.useState)(!1),C=t.get("tab")||"timesheet",P=t.get("project"),R=t.get("week"),[W,D]=(0,r.useState)(()=>{if(R){let e=new Date(R);if(!isNaN(e.getTime()))return e}return new Date}),[L,U]=(0,r.useState)(P),A=(0,r.useRef)(!1),{statsData:M,projectUrls:Z,ignoredProjects:I,projectCustomNames:E,projectClients:_,commits:O,wrikeProjects:B,wrikeProjectsLoading:z,wrikeProjectMappings:H,loading:V,error:$,idleTimeoutMinutes:q,setIdleTimeoutMinutes:F,settingsLoading:Y,fetchStats:G,fetchProjectUrls:J,createProjectUrl:K,updateProjectUrl:Q,deleteProjectUrl:X,addIgnoredProject:ee,removeIgnoredProject:et,saveProjectCustomName:es,removeProjectCustomName:ea,saveProjectClient:er,removeProjectClient:en,fetchWrikeProjects:ec,saveWrikeProjectMapping:ei}=(0,y.u)(s);(0,r.useEffect)(()=>{U(P)},[P]),(0,r.useEffect)(()=>{if(R&&!A.current){let e=new Date(R);isNaN(e.getTime())||R===W.toISOString().split("T")[0]||D(e)}},[R,W]);let eo=s=>{A.current=!0;let a=new URLSearchParams(t.toString());s.tab&&a.set("tab",s.tab),void 0!==s.project&&(s.project?a.set("project",s.project):a.delete("project")),s.week&&a.set("week",s.week);let r="".concat(window.location.pathname,"?").concat(a.toString());e.push(r,{scroll:!1}),setTimeout(()=>{A.current=!1},100)};return((0,r.useEffect)(()=>{p||u||V||!s||w(!0)},[p,u,V,s]),x)?(0,a.jsx)(l.U,{}):s?V?(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 p-6 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(i.A,{className:"w-8 h-8 animate-spin mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Loading time tracking data..."})]})}):$?(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 p-6 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("p",{className:"text-red-600 mb-4",children:["Error: ",$]}),(0,a.jsxs)(c.$,{onClick:G,children:[(0,a.jsx)(i.A,{className:"w-4 h-4 mr-2"}),"Retry"]})]})}):(0,a.jsx)("div",{className:"min-h-screen bg-stone-50 p-6",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto space-y-6",children:[(0,a.jsx)(d.Y,{idleTimeoutMinutes:q,onIdleTimeoutChange:F,onRefresh:G,onLogout:j,onRestartTour:()=>{f(),w(!0)},settingsLoading:Y}),(0,a.jsx)(m.p,{currentWeek:W,onNavigateWeek:e=>{let t;"current"===e?t=new Date:(t=new Date(W)).setDate(t.getDate()+("next"===e?7:-7)),D(t),eo({week:t.toISOString().split("T")[0]})}}),(0,a.jsx)(k,{statsData:M,currentWeek:W,idleTimeoutMinutes:q,onViewProject:e=>{U(e),eo({project:e})}}),(0,a.jsx)(v.Z,{statsData:M,ignoredProjects:I,projectCustomNames:E,projectClients:_,projectUrls:Z,commits:O,wrikeProjects:B,wrikeProjectsLoading:z,wrikeProjectMappings:H,currentWeek:W,idleTimeoutMinutes:q,onIdleTimeoutChange:F,onAddIgnoredProject:ee,onRemoveIgnoredProject:et,onSaveProjectCustomName:es,onRemoveProjectCustomName:ea,onSaveProjectClient:er,onRemoveProjectClient:en,onCreateUrl:K,onUpdateUrl:Q,onDeleteUrl:X,onFetchWrikeProjects:ec,onSaveWrikeMapping:ei,activeTab:C,onTabChange:e=>{eo({tab:e})}}),N&&(0,a.jsx)(b.I,{onComplete:()=>{g(),w(!1)},onSkip:()=>{g(),w(!1)}})]})}):(0,a.jsx)(o.N,{onValidate:h})}s(1987)}},e=>{var t=t=>e(e.s=t);e.O(0,[111,776,149,812,441,684,358],()=>t(7152)),_N_E=e.O()}]);